<?xml version="1.0" encoding="utf-8"?>
<vxml version="2.1" xml:lang="en-US"
		xmlns="http://www.w3.org/2001/vxml"
		xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
		xmlns:gvp="http://www.genesyslab.com/2006/vxml21-extension" application="../src/ComposerRoot.vxml">

	
	<!-- VXML code generated by Composer 8.1.440.22 -->
	<!-- Diagram created by Composer: Composer 8.1.440.22 -->
	<!-- Project version: 8.1.440.22 -->
	<!-- Diagram version: 1.0 CreatedOn:  -->
	<!-- Application Author:  -->
	<!-- Release Mode: true -->

	<!-- Global Scripts includes -->
	<script src="../include/common.js" />
	<script src="../include/ctic.js" />
	<script src="../include/json.js" />
	<script src="../include/DataAccess.js" />

	<!-- Global Vars declarations -->
	<script>
		var AppState = new Object();
		AppState.System = new Object();
		AppState.System.RetainInputTypeVariableDefaultValue = false;
		AppState.CallUUID = session.connection.uuid;
		AppState.ANI = getANI();
		AppState.DNIS = getDNIS();
		AppState.USE_LCASE_USERDATAKEY = initSystemTypeVariable('USE_LCASE_USERDATAKEY',0);
  		
  		if (session.connection.protocol.sip.headers != undefined &amp;&amp;
			    session.connection.protocol.sip.headers['x-genesys-gvp-session-id']){
			AppState.GVPSessionID = session.connection.protocol.sip.headers['x-genesys-gvp-session-id'];
		} else {
			AppState.GVPSessionID = 'undefined';
		}
  			
		
		AppState.APP_ASR_LANGUAGE = initSystemTypeVariable('APP_ASR_LANGUAGE','en-US');
		AppState.APP_LANGUAGE = initSystemTypeVariable('APP_LANGUAGE','en-US');
		AppState.APP_OPM = initSystemTypeVariable('APP_OPM',eval('('+session.connection.protocol.sip.requesturi['parameters']+')'));
		AppState.COMPOSER_WSSTUBBING = initSystemTypeVariable('COMPOSER_WSSTUBBING','0');
		AppState.contextoClave = 'No Ingreso de Clave';
		AppState.EnableFCR = initSystemTypeVariable('EnableFCR',true);
		AppState.EnableReports = initSystemTypeVariable('EnableReports',false);
		AppState.EnableSNMP = initSystemTypeVariable('EnableSNMP',false);
		AppState.EstadoError = 0;
		AppState.GRAMMARFILEDIR = initSystemTypeVariable('GRAMMARFILEDIR','../Resources/Grammars');
		AppState.idCuenta = '';
		AppState.intentos = 0;
		AppState.LAST_EVENT_ELEMENT = initSystemTypeVariable('LAST_EVENT_ELEMENT','undefined');
		AppState.LAST_EVENT_LINE = initSystemTypeVariable('LAST_EVENT_LINE','undefined');
		AppState.LAST_EVENT_MSG = initSystemTypeVariable('LAST_EVENT_MSG','undefined');
		AppState.LAST_EVENT_NAME = initSystemTypeVariable('LAST_EVENT_NAME','undefined');
		AppState.LAST_EVENT_URL = initSystemTypeVariable('LAST_EVENT_URL','undefined');
		AppState.LoggerCallflow = 'Main';
		AppState.OCS_Record = initSystemTypeVariable('OCS_Record',getCallflowOCSRecord());
		AppState.OCS_RecordURI = initSystemTypeVariable('OCS_RecordURI',getCallflowRecordURI());
		AppState.OCS_URI = initSystemTypeVariable('OCS_URI',getCallflowOCSURI());
		AppState.PREV_APP_ASR_LANGUAGE = initSystemTypeVariable('PREV_APP_ASR_LANGUAGE','undefined');
		AppState.PREV_APP_LANGUAGE = initSystemTypeVariable('PREV_APP_LANGUAGE','undefined');
		AppState.prioridad = 0;
		AppState.returnSP_GI = '';
		AppState.SCRIPTSDIR = initSystemTypeVariable('SCRIPTSDIR','../Scripts');
		AppState.ultimosDigitos = '';
		AppState.valorRegularizacion = 0;
		AppState.var_access_token = '';
		AppState.var_ambiente = '';
		AppState.var_APLICACION = 'Tarjetas';
		AppState.var_att_AudioMsjM = '';
		AppState.var_att_CATContextoOpc1 = '...';
		AppState.var_att_CATContextoOpc4 = '';
		AppState.var_att_CATContextoOpc5 = '';
		AppState.var_att_CATContextoOpc6 = '';
		AppState.var_att_CATTipoCliente = '';
		AppState.var_att_CNoEnrolado = '';
		AppState.var_att_CNoEnroladoC = '';
		AppState.var_att_CNoEnroladoC1 = '';
		AppState.var_att_HoraDom = '';
		AppState.var_att_HoraEspecial = '';
		AppState.var_att_HoraJuev = '';
		AppState.var_att_HoraLun = '';
		AppState.var_att_HoraMart = '';
		AppState.var_att_HoraMierc = '';
		AppState.var_att_HoraSaba = '';
		AppState.var_att_HoraVier = '';
		AppState.var_att_IVR = '';
		AppState.var_att_MsjMasivo = '';
		AppState.var_att_Opc0 = '';
		AppState.var_att_Opc1 = '';
		AppState.var_att_Opc2 = '';
		AppState.var_att_Opc3 = '';
		AppState.var_att_Opc4 = '';
		AppState.var_att_Opc5 = '';
		AppState.var_att_Opc6 = '';
		AppState.var_att_Opc9 = '';
		AppState.var_att_var_ewt_mas = '';
		AppState.var_att_var_ewt_pref = '';
		AppState.var_att_WhatsApp_BD = '';
		AppState.var_att_WhatsApp_envioSMS = '';
		AppState.var_att_WhatsApp_EWT = '';
		AppState.var_att_WhatsApp_EWT_Valor = '';
		AppState.var_att_WhatsApp_NLlamadas = '';
		AppState.var_att_WhatsApp_NLlamadas_Valor = '';
		AppState.var_aux = 0;
		AppState.var_aux_hora = 0;
		AppState.var_aux_log_navegacion = '';
		AppState.var_aux_min = 0;
		AppState.var_auxMinIni = '';
		AppState.var_auxMinTer = '';
		AppState.var_AWT = '';
		AppState.var_CallsInQueue = '';
		AppState.var_cerrar_sesion_http = '';
		AppState.var_cerrar_sesion_url = '';
		AppState.var_clave = '';
		AppState.var_cliente = '';
		AppState.var_cont_clave_incorrecta = 0;
		AppState.var_cont_m1 = 0;
		AppState.var_cont_m2 = 0;
		AppState.var_cont_previo_rut = 0;
		AppState.var_cont_rut = 0;
		AppState.var_crear_sesion_dhr1 = '';
		AppState.var_crear_sesion_dhr2 = '';
		AppState.var_crear_sesion_http = '';
		AppState.var_crear_sesion_id_sesion = '';
		AppState.var_crear_sesion_result = '';
		AppState.var_crear_sesion_url = '';
		AppState.var_Date = '';
		AppState.var_datos_cliente_castigada = '';
		AppState.var_datos_cliente_facturacion_http = 0;
		AppState.var_datos_cliente_guid = '';
		AppState.var_datos_cliente_hdr1 = '';
		AppState.var_datos_cliente_http = '';
		AppState.var_datos_cliente_input = '';
		AppState.var_datos_cliente_mora = '';
		AppState.var_datos_cliente_mora_http = '';
		AppState.var_datos_cliente_mora_url = '';
		AppState.var_datos_cliente_numero_tarjeta = '';
		AppState.var_datos_cliente_result = '';
		AppState.var_datos_cliente_result_json_obj = '';
		AppState.var_datos_cliente_tipo_tarjeta = '';
		AppState.var_datos_cliente_url = '';
		AppState.var_Decision = '';
		AppState.var_DiaSemana = 0;
		AppState.var_dnis = '';
		AppState.var_EndPointCerrarSesionCRM = '';
		AppState.var_EndPointCrearSesionCRM = '';
		AppState.var_EndPointDatosCliente = '';
		AppState.var_EndPointGetToken = '';
		AppState.var_ErrorSS = '';
		AppState.var_f_deudaTotal = 0;
		AppState.var_f_fechaVencimiento = '';
		AppState.var_f_montoAdeudado = 0;
		AppState.var_f_montoFacturado = 0;
		AppState.var_f_pagoMinimo = 0;
		AppState.var_f_saldoPendiente = 0;
		AppState.var_f_Vigencia = '';
		AppState.var_Facturacion_url = '';
		AppState.var_flag_crear_sesion = 0;
		AppState.var_flujo_ivr = 'tarjetas';
		AppState.var_FonoPreferenteDB = '';
		AppState.var_FonoVipDB = '';
		AppState.var_getActivos = 0;
		AppState.var_getFacturacion = 0;
		AppState.var_GetMora_URL = '';
		AppState.var_GetToken_HttpCode = '';
		AppState.var_GetToken_json = '';
		AppState.var_GetToken_Token = '';
		AppState.var_GetToken_URL = '';
		AppState.var_HdrLog = '[CAT_Tarjetas][' + AppState.ANI + ']';
		AppState.var_Hora = '';
		AppState.var_HorarioDia = '';
		AppState.var_inListaNegra = 0;
		AppState.var_log_ani = AppState.ANI;
		AppState.var_log_dia = '';
		AppState.var_log_dnis = AppState.DNIS;
		AppState.var_log_hora_fin = '';
		AppState.var_log_hora_ini = '';
		AppState.var_log_navegacion = 'Inicio';
		AppState.var_log_rut = '000000003';
		AppState.var_menu0 = '';
		AppState.var_menu1 = '';
		AppState.var_menu2 = '';
		AppState.var_mf_cortaLlamada = 0;
		AppState.var_mini_ivr = '';
		AppState.var_Minuto = 0;
		AppState.var_MsjIntentos = '';
		AppState.var_NombrePreferenteDB = '';
		AppState.var_NombreVipDB = '';
		AppState.var_obtiene_ewt_Ewt = '';
		AppState.var_obtiene_ewt_HttpCode = '';
		AppState.var_obtiene_ewt_URL = '';
		AppState.var_obtiene_smsWhatsapp_URL = '';
		AppState.var_out_marca = '';
		AppState.var_out_marca_mw = '';
		AppState.var_preferente = '';
		AppState.var_RUT = '';
		AppState.var_RUT_dv = 0;
		AppState.var_RUT_num = 0;
		AppState.var_RUT_num_rev = 0;
		AppState.var_RUT_num_sum = 0;
		AppState.var_RUT_num_sum_mod11 = 0;
		AppState.var_status_clave = 0;
		AppState.var_Status_ClienteNoEnrolado = '';
		AppState.var_Status_GeoInfDB = '';
		AppState.var_Status_OfertableDB = '';
		AppState.var_Status_OfertableDescrip = '';
		AppState.var_status_previo_rut = '';
		AppState.var_status_smsWhatsapp = '';
		AppState.var_StatusListaNegraDB = 0;
		AppState.var_StatusPreferenteDB = 0;
		AppState.var_StatusVipDB = 0;
		AppState.var_switch_crear_sesion = 0;
		AppState.var_tag_clave = '';
		AppState.var_tieneCredCons = 0;
		AppState.var_TipoCliente = '';
		AppState.var_TipoTarjeta = '';
		AppState.var_token = '';
		AppState.var_token_input = '';
		AppState.var_token_result = '';
		AppState.var_token_result_json_obj = '';
		AppState.var_token_url = '';
		AppState.var_TokenValidaTarjeta_url = '';
		AppState.var_TranferVDN = '';
		AppState.var_transferir_guid = '';
		AppState.var_transferir_idsesion = '';
		AppState.var_transferir_mora = '';
		AppState.var_transferir_rut = '';
		AppState.var_transferir_token = '';
		AppState.var_url_comun = '';
		AppState.var_validaClave_http = '';
		AppState.var_validaClave_url = '';
		AppState.var_vip = 0;
		AppState.varAccion = '';
		AppState.varCliente = '';
		AppState.varControlHorario = undefined;
		AppState.varDestino = '';
		AppState.varError = undefined;
		AppState.varGeoInfDB = '';
		AppState.varHorarioFin = undefined;
		AppState.varHorarioIni = undefined;
		AppState.varNombre = '';
		AppState.varNumeroHorasMoviles = 0;
		AppState.varNumeroLlamadasANIDesconectar = 0;
		AppState.varNumeroLlamadasRUTDesconectar = 0;
		AppState.varOfertaDB = '';
		AppState.varOpcion = '';
		AppState.varPesoDB = '';
		AppState.varPrioridad = 0;
		AppState.varRetornaListaNegra = undefined;
		AppState.varRetornaRegistroANIRUT = undefined;
		AppState.varRetornaValidaANIRUT = undefined;
		AppState.varSendMailFree_emlBody = '';
		AppState.varSendMailFree_emlFrom = '';
		AppState.varSendMailFree_emlSubject = '';
		AppState.varSendMailFree_emlTo = '';
		AppState.varSendMailFree_srvIp = '';
		AppState.varSendMailFree_srvPassw = '';
		AppState.varSendMailFree_srvPort = '';
		AppState.varSendMailFree_srvSsl = '';
		AppState.varSendMailFree_srvUser = '';
		AppState.varServicio = '';
		AppState.varURL = '';
		AppState.varValidaRUT = '';
		AppState.VOXFILEDIR = initSystemTypeVariable('VOXFILEDIR','../Resources/Prompts');
		AppState.var_att_WhatsApp_EnviaMensaje = '';
		AppState.var_obtiene_hsmWhatsapp_URL = '';
		AppState.varURLDymanics = '';
		AppState.varRutDynamics = '';
		AppState.var_url_actualiza_sesion = '';
		AppState.att_CATClienteOfertable = 0;
		AppState.var_TxBlackFriday = 0;
		AppState.varFromTarjetas = '';
		AppState.varOrigen = '';
		AppState.vardst = '';
		AppState.var_idNivelAutenticacion = '';
		AppState.RUT_Encriptado = '';
		AppState.id_Cliente = '';
		AppState.var_estado_oferta = '';
		AppState.var_ConsultaOfertas_url = '';
		AppState.var_ConsultaActivos_url = '';
	</script>

		
	<!-- Global Scripts -->
	<script srcexpr="AppState.VOXFILEDIR + '/PromptSwitch.js'" />
	<script srcexpr="AppState.VOXFILEDIR + '/en-US/en-US.js'" />
	<script>var f = new Format();</script>
	<script srcexpr="AppState.SCRIPTSDIR + '/' + 'Funciones.js'" />

	
	<script srcexpr="AppState.VOXFILEDIR + '/en-US/customprompts.js'" />
	
	
	<!-- Global Properties declarations -->
	<property name="com.genesyslab.logtoasr" value="false" />   	
	<property name="com.genesyslab.loglevel" value="5" />

	<!-- Metadata information -->
	<meta name="com.genesyslab.studio.resourcePath" content="/Callflows/Main.callflow"/>

	<!-- Global links -->
	<form>
		<block>
			<log expr="'Running Main workflow.'"/>
			<log expr="'Code Generated by Composer: 8.1.440.22.'"/>
			<log expr="'Diagram created/upgraded by Composer: Composer 8.1.440.22.'"/>
			<log expr="'Project version: 8.1.440.22.'"/>
			<log expr="'Diagram version: 1.0 CreatedOn: .'"/>
			<goto next="#Entry1" />
		</block>
	</form>
	<!-- This is the Entry block -->
	<form id="Entry1">
		<block name="Entry">
			<goto next="#Logger001" />
		</block>
	</form>	
	
	<catch event="connection.disconnect.hangup">
		<assign name="AppState.LAST_EVENT_ELEMENT" expr="_element"/>
    	<assign name="AppState.LAST_EVENT_MSG" expr="_message"/>
    	<assign name="AppState.LAST_EVENT_NAME" expr="_event"/>
    	<assign name="AppState.LAST_EVENT_LINE" expr="_line"/>
    	<assign name="AppState.LAST_EVENT_URL" expr="_url"/>
		<goto next="#Logger004" />
    </catch>
	<catch event="error">
		<assign name="AppState.LAST_EVENT_ELEMENT" expr="_element"/>
    	<assign name="AppState.LAST_EVENT_MSG" expr="_message"/>
    	<assign name="AppState.LAST_EVENT_NAME" expr="_event"/>
    	<assign name="AppState.LAST_EVENT_LINE" expr="_line"/>
    	<assign name="AppState.LAST_EVENT_URL" expr="_url"/>
		<goto next="#Logger003" />
    </catch>
	<catch event=".">
		<assign name="AppState.LAST_EVENT_ELEMENT" expr="_element"/>
    	<assign name="AppState.LAST_EVENT_MSG" expr="_message"/>
    	<assign name="AppState.LAST_EVENT_NAME" expr="_event"/>
    	<assign name="AppState.LAST_EVENT_LINE" expr="_line"/>
    	<assign name="AppState.LAST_EVENT_URL" expr="_url"/>
		<goto next="#Logger003" />
    </catch>    
    

	<!-- This is the Prompt block -->
	<form id="Dias">
        
    	<block name="DiasP0">
  			<prompt bargein="true"  gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'AudiosTarjetas/Menu/Buenos dias.wav'"></audio>
    		</prompt>
		</block>
    	<block>
    		<goto next="#Bienvenida" />
    	</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Hora">
		<block>
			
			<assign name="AppState.var_Date" expr="new Date()" />
			<assign name="AppState.var_Hora" expr="AppState.var_Date.getHours()" />
			<assign name="AppState.var_dnis" expr="getSIPHeaderValue('vardst')" />
			<assign name="AppState.var_log_hora_ini" expr="DiaHora()" />
			<assign name="AppState.var_Minuto" expr="AppState.var_Date.getMinutes()" />
			<assign name="AppState.var_att_IVR" expr="getSIPHeaderValue('att_IVR')" />
			<assign name="AppState.var_att_MsjMasivo" expr="getSIPHeaderValue('att_MsjMasivo')" />
			<assign name="AppState.var_att_AudioMsjM" expr="getSIPHeaderValue('att_AudioMsjM')" />
			<assign name="AppState.var_att_Opc1" expr="getSIPHeaderValue('att_Opc1')" />
			<assign name="AppState.var_att_Opc2" expr="getSIPHeaderValue('att_Opc2')" />
			<assign name="AppState.var_att_Opc3" expr="getSIPHeaderValue('att_Opc3')" />
			<assign name="AppState.var_att_Opc4" expr="getSIPHeaderValue('att_Opc4')" />
			<assign name="AppState.var_att_Opc5" expr="getSIPHeaderValue('att_Opc5')" />
			<assign name="AppState.var_att_Opc6" expr="getSIPHeaderValue('att_Opc6')" />
			<assign name="AppState.var_att_HoraLun" expr="getSIPHeaderValue('att_HoraLun')" />
			<assign name="AppState.var_att_HoraMart" expr="getSIPHeaderValue('att_HoraMart')" />
			<assign name="AppState.var_att_HoraMierc" expr="getSIPHeaderValue('att_HoraMierc')" />
			<assign name="AppState.var_att_HoraJuev" expr="getSIPHeaderValue('att_HoraJuev')" />
			<assign name="AppState.var_att_HoraVier" expr="getSIPHeaderValue('att_HoraVier')" />
			<assign name="AppState.var_att_HoraSaba" expr="getSIPHeaderValue('att_HoraSaba')" />
			<assign name="AppState.var_att_HoraDom" expr="getSIPHeaderValue('att_HoraDom')" />
			<assign name="AppState.var_DiaSemana" expr="AppState.var_Date.getDay()" />
			<assign name="AppState.var_att_Opc0" expr="getSIPHeaderValue('att_Opc0')" />
			<assign name="AppState.var_att_HoraEspecial" expr="getSIPHeaderValue('att_HoraEspecial')" />
			<assign name="AppState.var_att_Opc9" expr="getSIPHeaderValue('att_Opc9')" />
			<assign name="AppState.var_att_CATContextoOpc4" expr="getSIPHeaderValue('att_CATContextoOpc4')" />
			<assign name="AppState.var_att_CATContextoOpc5" expr="getSIPHeaderValue('att_CATContextoOpc5')" />
			<assign name="AppState.var_att_CATContextoOpc6" expr="getSIPHeaderValue('att_CATContextoOpc6')" />
			<assign name="AppState.var_att_CATTipoCliente" expr="getSIPHeaderValue('att_CATTipoCliente')" />
			<assign name="AppState.var_att_CNoEnrolado" expr="getSIPHeaderValue('att_CATCNoEnrolado')" />
			<assign name="AppState.var_att_CNoEnroladoC1" expr="getSIPHeaderValue('att_CATCNoEnroladoC')" />
			<assign name="AppState.var_att_WhatsApp_BD" expr="getSIPHeaderValue('att_CATWhatsAppBD')" />
			<assign name="AppState.var_att_WhatsApp_EWT" expr="getSIPHeaderValue('att_CATWhatsAppEWT')" />
			<assign name="AppState.var_att_WhatsApp_EWT_Valor" expr="getSIPHeaderValue('att_CATWhatsAppEWTValor')" />
			<assign name="AppState.var_att_WhatsApp_NLlamadas" expr="getSIPHeaderValue('att_CATWhatsAppNLlamadas')" />
			<assign name="AppState.var_att_WhatsApp_NLlamadas_Valor" expr="getSIPHeaderValue('att_CATWhatsAppNLlamadasValor')" />
			<assign name="AppState.var_att_var_ewt_mas" expr="getSIPHeaderValue('att_var_ewt_pref')" />
			<assign name="AppState.var_att_var_ewt_pref" expr="getSIPHeaderValue('att_var_ewt_mas')" />
			<assign name="AppState.var_att_WhatsApp_EnviaMensaje" expr="getSIPHeaderValue('att_CATWhatsAppEnvioMensaje')" />
			<assign name="AppState.att_CATClienteOfertable" expr="getSIPHeaderValue('att_CATClienteOfertable')" />				
			<goto next="#Parametros" />
		</block>
	</form>

	<!-- This is the Branching block -->
	<form id="Saludo">
		<block>
			<if cond="AppState.var_Hora &lt; 12">
				
				<!-- This is the OutLink -->
				<goto next="#Dias" />
			</if>
			<if cond="AppState.var_Hora &gt;= 12 &amp;&amp; AppState.var_Hora &lt; 20">
				
				<!-- This is the OutLink -->
				<goto next="#Tardes" />
			</if>
			<goto next="#Noches" />
		</block>
	</form>

	<!-- This is the Prompt block -->
	<form id="Tardes">
        
    	<block name="TardesP0">
  			<prompt bargein="true"  gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'AudiosTarjetas/Menu/Buenas tardes.wav'"></audio>
    		</prompt>
		</block>
    	<block>
    		<goto next="#Bienvenida" />
    	</block>
	</form>

	<!-- This is the Prompt block -->
	<form id="Noches">
        
    	<block name="NochesP0">
  			<prompt bargein="true"  gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'AudiosTarjetas/Menu/Buenas noches.wav'"></audio>
    		</prompt>
		</block>
    	<block>
    		<goto next="#Bienvenida" />
    	</block>
	</form>

	<!-- This is the Input block -->
	<form id="RUT">
		<property name="inputmodes" value="dtmf" />
		<property name="bargein" value="true" />
		<block name="RUTP0">
  			<prompt gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'AudiosTarjetas/Menu/Por favor ingrese su RUT.wav'"></audio>
    		</prompt>
		</block>
		
		
		<var name="retryCount" expr="1"/>
		
		<field name="RUTField" type="digits?minlength=2;maxlength=9">
			<property name="interdigittimeout" value="3s"/>
			<property name="termchar" value="" /> 
			<property name="timeout" value="4s"/>
		</field>
    	<filled mode="all" namelist="RUTField">
    		<assign name="AppState.var_RUT" expr="RUTField" />
    		<goto next="#RevisPrevioRut" />
    	</filled>
			
		<catch event="noinput" cond="retryCount == 1">
		<assign name="retryCount" expr="retryCount + 1"/>
		<prompt bargein="true" gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'AudiosTarjetas/Menu/El RUT ingresado es incorrecto.wav'"></audio>
  		</prompt>
  		<clear namelist="RUTP0"/>
  		</catch>
			
		<catch event="nomatch" cond="retryCount == 1">
		<assign name="retryCount" expr="retryCount + 1"/>
		<prompt bargein="true" gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'AudiosTarjetas/Menu/El RUT ingresado es incorrecto.wav'"></audio>
  		</prompt>
  		<clear namelist="RUTP0"/>
  		</catch>
			
		<catch event="noinput" cond="retryCount == 2">
		<assign name="retryCount" expr="retryCount + 1"/>
		<prompt bargein="true" gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'AudiosTarjetas/Menu/El RUT ingresado es incorrecto.wav'"></audio>
  		</prompt>
  		<clear namelist="RUTP0"/>
  		</catch>
			
		<catch event="nomatch" cond="retryCount == 2">
		<assign name="retryCount" expr="retryCount + 1"/>
		<prompt bargein="true" gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'AudiosTarjetas/Menu/El RUT ingresado es incorrecto.wav'"></audio>
  		</prompt>
  		<clear namelist="RUTP0"/>
  		</catch>
		<catch event="noinput"  cond="retryCount==3">
	  		<throw event="com.genesyslab.composer.toomanynoinputs" message="exceeded the number of noinput retries" />
	  	</catch>
		<catch event="nomatch"  cond="retryCount==3">
	  		<throw event="com.genesyslab.composer.toomanynomatches" message="exceeded the number of nomatch retries" />
	  	</catch>
		<catch event="com.genesyslab.composer.toomanynoinputs">
			<goto next="#superaNI" />
    	</catch>
		<catch event="com.genesyslab.composer.toomanynomatches">
			<goto next="#superaNM" />
    	</catch>
	</form>

	<!-- This is the Branching block -->
	<form id="BranchingRUT">
		<block>
			<if cond="AppState.var_cont_rut &gt;= 3">
				
				<!-- Post Action -->
				<script>try{
				AppState.var_TranferVDN = &quot;12345&quot;
				}
				catch(err){}
				
				</script>
				
				<!-- This is the OutLink -->
				<goto next="#Logger014" />
			</if>
			<goto next="#RutInvalido" />
		</block>
	</form>

	<!-- This is the Branching block -->
	<form id="ClienteVIP">
		<block>
			<log gvp:level="1">
				<value expr="'[CAT_Tarjetas] ClienteVIP , var_StatusVipDB=' + AppState.var_StatusVipDB"/>
			</log>
    	</block>
		<block>
			<if cond="AppState.var_StatusVipDB == 1">
				
				<!-- Post Action -->
				<script>try{
				AppState.var_TranferVDN = &quot;12345&quot;
				}
				catch(err){}
				
				</script>
				
				<!-- This is the OutLink -->
				<goto next="#Logger018" />
			</if>
			<goto next="#marcaNoVIP" />
		</block>
	</form>

	<!-- This is the Prompt block -->
	<form id="RutInvalido">
        
    	<block name="RutInvalidoP0">
  			<prompt bargein="true"  gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'AudiosTarjetas/Menu/El RUT ingresado es incorrecto.wav'"></audio>
    		</prompt>
		</block>
    	<block>
    		<goto next="#RUT" />
    	</block>
	</form>

	<!-- This is the Subdialog block -->
	<form id="Transfer1">

		<subdialog name="Transfer1Subdialog" fetchhint="prefetch"  src="../src-gen/Transfer.vxml">
    		<param name="varActionParentId" expr="''"/>
			<filled>
				<goto next="#WS_mail" />
			</filled>
		</subdialog>
		
    	<catch event="error.badfetch">
    <goto next="#Logger016" />
    	</catch>
    	<catch event="error">
    <goto next="#Logger016" />
    	</catch>
	</form>

	<!-- This is the Assign block -->
	<form id="CalculaDV">
		<block>
			
			<assign name="AppState.var_RUT_dv" expr="AppState.var_RUT.substr(AppState.var_RUT.length-1,AppState.var_RUT.length)" />
			<assign name="AppState.var_RUT_num" expr="AppState.var_RUT.substr(0,AppState.var_RUT.length-1)" />
			<assign name="AppState.var_RUT_num_rev" expr="AppState.var_RUT_num.toString().split('').reverse().join('');" />
			<assign name="AppState.var_aux" expr="AppState.var_RUT_num_rev.charAt(0)" />
			<assign name="AppState.var_RUT_num_sum" expr="AppState.var_RUT_num_rev.charAt(0)*2 + AppState.var_RUT_num_rev.charAt(1)*3 + AppState.var_RUT_num_rev.charAt(2)*4 + AppState.var_RUT_num_rev.charAt(3)*5 + AppState.var_RUT_num_rev.charAt(4)*6 + AppState.var_RUT_num_rev.charAt(5)*7 + AppState.var_RUT_num_rev.charAt(6)*2 + AppState.var_RUT_num_rev.charAt(7)*3" />
			<assign name="AppState.var_RUT_num_sum_mod11" expr="11 - (AppState.var_RUT_num_sum % 11)" />				
			<goto next="#Copy_1_Logger013" />
		</block>
	</form>

	<!-- This is the Branching block -->
	<form id="ValidaRUT">
		<block>
			<log gvp:level="1">
				<value expr="AppState.var_HdrLog + ' Branching ValidaRUT'"/>
			</log>
    	</block>
		<block>
			<if cond="AppState.var_RUT_num_sum_mod11 == AppState.var_RUT_dv">
				
				<!-- This is the OutLink -->
				<goto next="#RUT_OK" />
			</if>
			<if cond="AppState.var_RUT_num_sum_mod11 == 10">
				
				<!-- This is the OutLink -->
				<goto next="#RutK" />
			</if>
			<if cond="AppState.var_RUT_num_sum_mod11 == 11">
				
				<!-- This is the OutLink -->
				<goto next="#Rut0" />
			</if>
			<goto next="#RUT_NOOK" />
		</block>
	</form>

	<!-- This is the Branching block -->
	<form id="RutK">
		<block>
			<if cond="AppState.var_RUT_dv == 1">
				
				<!-- Post Action -->
				<script>try{
				AppState.var_RUT = AppState.var_RUT_num +'K'
				}
				catch(err){}
				
				</script>
				
				<!-- This is the OutLink -->
				<goto next="#RUT_OK" />
			</if>
			<goto next="#RUT_NOOK" />
		</block>
	</form>

	<!-- This is the Branching block -->
	<form id="Rut0">
		<block>
			<if cond="AppState.var_RUT_dv == 0">
				
				<!-- This is the OutLink -->
				<goto next="#RUT_OK" />
			</if>
			<goto next="#RUT_NOOK" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="contRut">
		<block>
			
			<assign name="AppState.var_cont_rut" expr="AppState.var_cont_rut + 1" />				
			<goto next="#BranchingRUT" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="VIPaPreferente1p">
		<block>
			<log gvp:level="1">
				<value expr="'[CAT_Tarjetas] VIPaPreferente1p'"/>
			</log>
    	</block>
		<block>
			
			<assign name="AppState.varAccion" expr="'transferir'" />
			<assign name="AppState.varDestino" expr="'interno'" />
			<assign name="AppState.varServicio" expr="'preferente'" />
			<assign name="AppState.varOpcion" expr="'VIP'" />
			<assign name="AppState.varPrioridad" expr="'1'" />				
			<goto next="#Transfer1" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="superaNI">
		<block>
			
			<assign name="AppState.varAccion" expr="'cortar'" />
			<assign name="AppState.varServicio" expr="'FonoClientes'" />
			<assign name="AppState.var_RUT" expr="'NO INGRESA RUT'" />
			<assign name="AppState.varOpcion" expr="'Excede intentos'" />				
			<goto next="#Logger010" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="superaNM">
		<block>
			
			<assign name="AppState.varAccion" expr="'cortar'" />
			<assign name="AppState.varServicio" expr="'Tarjetas'" />
			<assign name="AppState.var_RUT" expr="'RUT INCORRECTO'" />
			<assign name="AppState.varOpcion" expr="'Excede intentos'" />				
			<goto next="#Logger011" />
		</block>
	</form>

	<!-- This is the Prompt block -->
	<form id="Bienvenida">
        
    	<block name="BienvenidaP0">
  			<prompt bargein="true"  gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'AudiosTarjetas/Bienvenido al Servicio de Tarjeta Cencosud Scotiabank.wav'"></audio>
    		</prompt>
		</block>
    	<block>
    		<goto next="#marca2" />
    	</block>
	</form>

	<!-- This is the Branching block -->
	<form id="EsPreferente">
		<block>
			<log gvp:level="1">
				<value expr="'[CAT_Tarjetas] EsPreferente , var_StatusPreferenteDB=' + AppState.var_StatusPreferenteDB"/>
			</log>
    	</block>
		<block>
			<if cond="AppState.var_StatusPreferenteDB == 1">
				
				<!-- This is the OutLink -->
				<goto next="#Valida_CatTipoCliente2" />
			</if>
			<goto next="#marca14" />
		</block>
	</form>

	<!-- This is the Branching block -->
	<form id="ListaNegra">
		<block>
			<if cond="AppState.var_StatusListaNegraDB == 1">
				
				<!-- This is the OutLink -->
				<goto next="#Logger009" />
			</if>
			<goto next="#Hora" />
		</block>
	</form>

	<!-- This is the Prompt block -->
	<form id="Prompt2">
        
    	<block name="Prompt2P0">
  			<prompt bargein="true"  gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'AudiosTarjetas/Menu/Usted ha superado el número de ingresos.wav'"></audio>
    		</prompt>
		</block>
    	<block>
    		<goto next="#AccionCortar1" />
    	</block>
	</form>

	<!-- This is the Branching block -->
	<form id="Castigado">
		<block>
			<log gvp:level="1">
				<value expr="'[CAT_Tarjetas] Castigado, var_castigado=' + AppState.var_datos_cliente_castigada"/>
			</log>
    	</block>
		<block>
			<if cond="AppState.var_datos_cliente_castigada == 'false'">
				
				<!-- This is the OutLink -->
				<goto next="#LogNoCastigado" />
			</if>
			<goto next="#Copy_1_LogCastigado" />
		</block>
	</form>

	<!-- This is the Subdialog block -->
	<form id="Transfer2">

		<subdialog name="Transfer2Subdialog" fetchhint="prefetch"  src="../src-gen/Transfer.vxml">
    		<param name="varActionParentId" expr="''"/>
			<filled>
				<goto next="#LogNav" />
			</filled>
		</subdialog>
		
    	<catch event="error.badfetch">
    <goto next="#Logger034" />
    	</catch>
    	<catch event="error">
    <goto next="#Logger034" />
    	</catch>
	</form>

	<!-- This is the Exit block -->
	<form id="Exit2">
		<block>
			<log gvp:level="1">
				<value expr="AppState.var_HdrLog + 'varAccion:' + AppState.varAccion + ' varDestino:' + AppState.varDestino + ' varServicio:' + AppState.varServicio + ' varPrioridad:' + AppState.varPrioridad + 'varRUT:' +  AppState.var_RUT + 'var_mora: ' + AppState.var_datos_cliente_mora  + 'var_mora_contexto: ' + AppState.var_transferir_mora  + 'var_flujo_ivr: ' + AppState.var_flujo_ivr"/>
			</log>
			<log gvp:level="1">
				<value expr=""/>
			</log>
    	</block>
		<block>
			<var name="contextoClave" expr="AppState.contextoClave"/>
			<var name="LAST_EVENT_ELEMENT" expr="AppState.LAST_EVENT_ELEMENT"/>
			<var name="LAST_EVENT_LINE" expr="AppState.LAST_EVENT_LINE"/>
			<var name="LAST_EVENT_MSG" expr="AppState.LAST_EVENT_MSG"/>
			<var name="LAST_EVENT_NAME" expr="AppState.LAST_EVENT_NAME"/>
			<var name="LAST_EVENT_URL" expr="AppState.LAST_EVENT_URL"/>
			<var name="var_APLICACION" expr="AppState.var_APLICACION"/>
			<var name="var_att_CATContextoOpc1" expr="AppState.var_att_CATContextoOpc1"/>
			<var name="var_att_CATContextoOpc4" expr="AppState.var_att_CATContextoOpc4"/>
			<var name="var_att_CATContextoOpc5" expr="AppState.var_att_CATContextoOpc5"/>
			<var name="var_att_CATContextoOpc6" expr="AppState.var_att_CATContextoOpc6"/>
			<var name="var_att_CNoEnroladoC" expr="AppState.var_att_CNoEnroladoC"/>
			<var name="var_datos_cliente_mora" expr="AppState.var_datos_cliente_mora"/>
			<var name="var_datos_cliente_tipo_tarjeta" expr="AppState.var_datos_cliente_tipo_tarjeta"/>
			<var name="var_flujo_ivr" expr="AppState.var_flujo_ivr"/>
			<var name="var_out_marca" expr="AppState.var_out_marca"/>
			<var name="var_RUT" expr="AppState.var_RUT"/>
			<var name="var_transferir_guid" expr="AppState.var_transferir_guid"/>
			<var name="var_transferir_idsesion" expr="AppState.var_transferir_idsesion"/>
			<var name="var_transferir_mora" expr="AppState.var_transferir_mora"/>
			<var name="var_transferir_rut" expr="AppState.var_transferir_rut"/>
			<var name="var_transferir_token" expr="AppState.var_transferir_token"/>
			<var name="varAccion" expr="AppState.varAccion"/>
			<var name="varDestino" expr="AppState.varDestino"/>
			<var name="varNombre" expr="AppState.varNombre"/>
			<var name="varOfertaDB" expr="AppState.varOfertaDB"/>
			<var name="varOpcion" expr="AppState.varOpcion"/>
			<var name="varPesoDB" expr="AppState.varPesoDB"/>
			<var name="varPrioridad" expr="AppState.varPrioridad"/>
			<var name="varServicio" expr="AppState.varServicio"/>
			<var name="varURLDymanics" expr="AppState.varURLDymanics"/>
			<exit namelist="contextoClave LAST_EVENT_ELEMENT LAST_EVENT_LINE LAST_EVENT_MSG LAST_EVENT_NAME LAST_EVENT_URL var_APLICACION var_att_CATContextoOpc1 var_att_CATContextoOpc4 var_att_CATContextoOpc5 var_att_CATContextoOpc6 var_att_CNoEnroladoC var_datos_cliente_mora var_datos_cliente_tipo_tarjeta var_flujo_ivr var_out_marca var_RUT var_transferir_guid var_transferir_idsesion var_transferir_mora var_transferir_rut var_transferir_token varAccion varDestino varNombre varOfertaDB varOpcion varPesoDB varPrioridad varServicio varURLDymanics"/>
  		</block>
	</form>

	<!-- This is the Branching block -->
	<form id="NoPREF_Clave">
		<block>
			<log gvp:level="1">
				<value expr="'[CAT_Tarjetas] NoPREF_Clave'"/>
			</log>
    	</block>
		<block>
			<if cond="AppState.var_status_clave == 1">
				
				<!-- This is the OutLink -->
				<goto next="#Valida_CatTipoCliente" />
			</if>
			<goto next="#Valida_CatTipoCliente" />
		</block>
	</form>

	<!-- This is the Subdialog block -->
	<form id="NoPREF_ClaveN0k">
		<block>
			<log gvp:level="1">
				<value expr="'[CAT_Tarjetas] NoPREF_ClaveN0k'"/>
			</log>
    	</block>

		<subdialog name="NoPREF_ClaveN0kSubdialog" fetchhint="prefetch"  src="../src-gen/sub_NoPreferenteClaveNOk.vxml">
    		<param name="varActionParentId" expr="''"/>
			<param name="in_Opc0" expr="AppState.var_att_Opc0" />
			<param name="in_Opc1" expr="AppState.var_att_Opc1" />
			<param name="in_Opc2" expr="AppState.var_att_Opc2" />
			<param name="in_Opc3" expr="AppState.var_att_Opc3" />
			<param name="in_Opc4" expr="AppState.var_att_Opc4" />
			<param name="in_Opc5" expr="AppState.var_att_Opc5" />
			<param name="in_Opc6" expr="AppState.var_att_Opc6" />
			<param name="in_Opc9" expr="AppState.var_att_Opc9" />
			<param name="varHorarioEspec" expr="AppState.var_att_HoraEspecial" />
			<param name="varHorarioFin" expr="AppState.varHorarioFin" />
			<param name="varHorarioIni" expr="AppState.varHorarioIni" />
			<param name="varOfertable" expr="AppState.var_Status_OfertableDB" />
			<param name="varOfertableDescripcion" expr="AppState.varOfertaDB" />
			<param name="varPesoDB" expr="AppState.varPesoDB" />
			<param name="varRUT" expr="AppState.var_RUT" />
			<param name="var_dnis" expr="AppState.var_dnis" />
			<param name="var_log_hora_ini" expr="AppState.var_log_hora_ini" />
			<filled>
				<if cond="NoPREF_ClaveN0kSubdialog.sub_Accion != 'undefined'">
  					<assign name="AppState.varAccion" expr="NoPREF_ClaveN0kSubdialog.sub_Accion" /> 
  				</if>
				<if cond="NoPREF_ClaveN0kSubdialog.sub_Destino != 'undefined'">
  					<assign name="AppState.varDestino" expr="NoPREF_ClaveN0kSubdialog.sub_Destino" /> 
  				</if>
				<if cond="NoPREF_ClaveN0kSubdialog.sub_Opcion != 'undefined'">
  					<assign name="AppState.varOpcion" expr="NoPREF_ClaveN0kSubdialog.sub_Opcion" /> 
  				</if>
				<if cond="NoPREF_ClaveN0kSubdialog.sub_Prioridad != 'undefined'">
  					<assign name="AppState.varPrioridad" expr="NoPREF_ClaveN0kSubdialog.sub_Prioridad" /> 
  				</if>
				<if cond="NoPREF_ClaveN0kSubdialog.sub_Servicio != 'undefined'">
  					<assign name="AppState.varServicio" expr="NoPREF_ClaveN0kSubdialog.sub_Servicio" /> 
  				</if>
				<if cond="NoPREF_ClaveN0kSubdialog.var_marca != 'undefined'">
  					<assign name="AppState.var_out_marca" expr="NoPREF_ClaveN0kSubdialog.var_marca" /> 
  				</if>
				<goto next="#BRCH_ValidaOpcion" />
			</filled>
		</subdialog>
		
    	<catch event="error.badfetch">
    <goto next="#Logger026" />
    	</catch>
    	<catch event="error">
    <goto next="#Logger026" />
    	</catch>
	</form>

	<!-- This is the Assign block -->
	<form id="MasivoPeru">
		<block>
			<log gvp:level="1">
				<value expr="'[CAT_Tarjetas] VIPaPreferente1p'"/>
			</log>
    	</block>
		<block>
			
			<assign name="AppState.varAccion" expr="'transferir'" />
			<assign name="AppState.varDestino" expr="'interno'" />
			<assign name="AppState.varServicio" expr="'masivo'" />				
			<goto next="#Logger035" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="marca1">
		<block>
			
			<assign name="AppState.var_log_navegacion" expr="AppState.var_log_navegacion.concat('EnListaNegra,')" />				
			<goto next="#AccionCortar1" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="marca2">
		<block>
			
			<assign name="AppState.var_log_navegacion" expr="AppState.var_log_navegacion.concat(',RUT')" />				
			<goto next="#RUT" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="marca3">
		<block>
			
			<assign name="AppState.var_log_navegacion" expr="AppState.var_log_navegacion.concat(',RUT_nok_3intentos,')" />				
			<goto next="#Prompt2" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="marcaVIP">
		<block>
			
			<assign name="AppState.var_log_navegacion" expr="AppState.var_log_navegacion.concat(',ClienteVIP')" />
			<assign name="AppState.prioridad" expr="1" />				
			<goto next="#VIP_Horario" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="marcaNoVIP">
		<block>
			
			<assign name="AppState.var_log_navegacion" expr="AppState.var_log_navegacion.concat(',ClienteNoVIP')" />				
			<goto next="#marca7" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="marca7">
		<block>
			
			<assign name="AppState.var_log_navegacion" expr="AppState.var_log_navegacion.concat(',ClienteCAT')" />				
			<goto next="#JSP_GeoInformativa" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="marca8">
		<block>
			
			<assign name="AppState.var_log_navegacion" expr="AppState.var_log_navegacion.concat(',NoClienteCAT')" />				
			<goto next="#marcaConsultaVip2" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="marca11">
		<block>
			<log gvp:level="1">
				<value expr="'[CAT_Tarjetas] Sin Castigo'"/>
			</log>
    	</block>
		<block>
			
			<assign name="AppState.var_log_navegacion" expr="AppState.var_log_navegacion.concat(',SinCastigo')" />				
			<goto next="#Copy_1_Logger048" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="marca12">
		<block>
			<log gvp:level="1">
				<value expr="'[CAT_Tarjetas] Con Castigo'"/>
			</log>
    	</block>
		<block>
			
			<assign name="AppState.var_log_navegacion" expr="AppState.var_log_navegacion.concat(',ConCastigo')" />				
			<goto next="#Servinco" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="marca13">
		<block>
			
			<assign name="AppState.var_log_navegacion" expr="AppState.var_log_navegacion.concat(',Preferente')" />
			<assign name="AppState.prioridad" expr="0" />				
			<goto next="#Cod500_Horario_Pref" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="marca14">
		<block>
			
			<assign name="AppState.var_log_navegacion" expr="AppState.var_log_navegacion.concat(',NoPreferente')" />				
			<goto next="#Copy_2_Logger033" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="marcaConsultaVip">
		<block>
			
			<assign name="AppState.var_log_navegacion" expr="AppState.var_log_navegacion.concat(',ConsultaVIP')" />				
			<goto next="#JSP_ConsultaVip" />
		</block>
	</form>

	<!-- This is the Log block -->
	<form id="LogNav">
		<block>
			<log gvp:level="1">
				<value expr="'[CAT_Tarjetas] log navegacion ' + AppState.var_log_navegacion"/>
			</log>
    	</block>
    	<block>
    		<goto next="#marcaFIN" />
    	</block>
	</form>

	<!-- This is the Assign block -->
	<form id="marca16">
		<block>
			
			<assign name="AppState.var_log_navegacion" expr="AppState.var_log_navegacion.concat(','+AppState.var_out_marca)" />				
			<goto next="#VarCortar" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="marca14b">
		<block>
			
			<assign name="AppState.var_log_navegacion" expr="AppState.var_log_navegacion.concat(',MenuNoPREF_ClaveN0k')" />				
			<goto next="#NoPREF_ClaveN0k" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="marca13b">
		<block>
			
			<assign name="AppState.var_log_navegacion" expr="AppState.var_log_navegacion.concat(',MenuPREF_ClaveN0k')" />				
			<goto next="#TransferX" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="marcaFIN">
		<block>
			
			<assign name="AppState.var_log_navegacion" expr="AppState.var_log_navegacion.concat(',FIN')" />				
			<goto next="#brch_rutDyna" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="HoraFin">
		<block>
			
			<assign name="AppState.var_log_hora_fin" expr="DiaHora()" />
			<assign name="AppState.varURLDymanics" expr="'https://apolo.crm.dynamics.com/WebResources/axx_/Html/SesionIVR/SesionIVR.html?Data={&quot;Documento&quot;:&quot;'+AppState.varRutDynamics+'&quot;,&quot;IdSesion&quot;:&quot;'+AppState.var_transferir_idsesion+'&quot;}'" />				
			<goto next="#MarcaNav_JSP" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="AccionCortar1">
		<block>
			
			<assign name="AppState.varAccion" expr="'cortar'" />
			<assign name="AppState.varDestino" expr="''" />
			<assign name="AppState.varServicio" expr="''" />				
			<goto next="#LogNav" />
		</block>
	</form>

	<!-- This is the WebService block -->
	<form id="WS_mail">
		<block>
			<if cond="(AppState.COMPOSER_WSSTUBBING == '1') || (AppState.COMPOSER_WSSTUBBING == 1)" >
				<!-- Web Service is stubbed !! -->
				
				
				<goto next="#Logger017" />
			</if>
		
				
		<!-- Stubbing is Off - normal processing continues -->
		
		
		<script>
			var requestObj = new Object();
			requestObj['WebUrl'] 	='http://cm-fw2b/wsMail/Service.asmx';
			requestObj['MethodName']='SendMail';
			requestObj['Protocol']	='SOAP';
			requestObj['AuthenAccess']='Anonymous';
			requestObj['UserName']	='';
			requestObj['Password']	='';
			requestObj['enableProxy']=false;
			requestObj['proxyHost']='';
			requestObj['proxyPort']=80;
			requestObj['proxyUserName']='';
			requestObj['proxyPassword']='';
			requestObj['SOAPActionURI']		='http://tempuri.org/SendMail';
			requestObj['targetNameSpaceUri']='http://tempuri.org/';
			requestObj['KeyStorePass']='';
			requestObj['KeyStoreFilePath']	='';
			requestObj['PrivateKeyPass']	='';
			requestObj['PrivateKeyAlias']	='';
			requestObj['CertStoreName']		='';
			requestObj['CertAlias']			='';
			requestObj['SigAlgorithm']		='DSA';
			requestObj['NameSpaceMap']		='{"soapenc":"http://schemas.xmlsoap.org/soap/encoding/","tm":"http://microsoft.com/wsdl/mime/textMatching/","SendMail":"http://tempuri.org/","s":"http://www.w3.org/2001/XMLSchema","wsdl":"http://schemas.xmlsoap.org/wsdl/","tns":"http://tempuri.org/","http":"http://schemas.xmlsoap.org/wsdl/http/","soap":"http://schemas.xmlsoap.org/wsdl/soap/","mime":"http://schemas.xmlsoap.org/wsdl/mime/","soap12":"http://schemas.xmlsoap.org/wsdl/soap12/"}';
	        requestObj['EnableNSPrefix'] = false;
	        requestObj['PrefixForChildTags'] = false;
	        requestObj['CustomPrefix'] = '';
	        requestObj['AppStateString'] = JSON.stringify(AppState);
	        requestObj['VariableScope'] = 'AppState.';
	        requestObj['CustomSOAPEnvFileName']='';	
			var parameters = [{name:'tns:oData.servicio', value: 'TAR'},{name:'tns:oData.rut', value: AppState.var_RUT},{name:'tns:oData.nombre', value: AppState.var_NombreVipDB},{name:'tns:oData.fono', value: AppState.ANI}];
    	
			requestObj['Timeout'] = '5';
			requestObj['Parameters'] = parameters;
		</script>
		<data name="WS_mailResponse" enctype="application/json" gvp:contentexpr="requestObj" method="post" src="../include/getWebServiceData.jsp" />
		
			
				
	   		<if cond="typeof WS_mailResponse.errorMsg == 'undefined'">
				<goto next="#Logger017" />
			<else/>
        		<throw event="error.com.genesyslab.composer.webservice.badFetch" messageexpr="WS_mailResponse.errorMsg" />
        	</if>	
			</block>
			
			<catch event="error.badfetch">
				<goto next="#Logger015" />
    		</catch>
			<catch event="error.com.genesyslab.composer.webservice.badFetch">
				<goto next="#Logger015" />
    		</catch>
		
		
	</form>	

	<!-- This is the Assign block -->
	<form id="Assign3">
		<block>
			
			<assign name="AppState.var_crear_sesion_dhr2" expr="AppState.var_RUT + '-CHL-1'" />				
			<goto next="#CrearSesionCert" />
		</block>
	</form>

	<!-- This is the Branching block -->
	<form id="Errs">
		<block>
			<log gvp:level="1">
				<value expr="'[CAT_Tarjetas] ClienteCAT , error http de cliente=' + AppState.var_datos_cliente_http"/>
			</log>
    	</block>
		<block>
			<if cond="AppState.var_datos_cliente_http == 400 || AppState.var_datos_cliente_http == 500">
				
				<!-- This is the OutLink -->
				<goto next="#Cod500_Horario" />
			</if>
			<if cond="AppState.var_datos_cliente_http == 404">
				
				<!-- This is the OutLink -->
				<goto next="#Cod404_Horario" />
			</if>
			<if cond="AppState.var_datos_cliente_http == -1">
				
				<!-- This is the OutLink -->
				<goto next="#Cod500_Horario" />
			</if>
			<if cond="AppState.var_datos_cliente_http == 200">
				
				<!-- Post Action -->
				<script>try{
				AppState.varCliente = 'Cliente'
				}
				catch(err){}
				
				</script>
				
				<!-- This is the OutLink -->
				<goto next="#SwitchCrear" />
			</if>
			<goto next="#Cod500_Horario" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Servinco">
		<block>
			<log gvp:level="1">
				<value expr="'[CAT_Tarjetas] VIPaPreferente1p'"/>
			</log>
    	</block>
		<block>
			
			<assign name="AppState.varAccion" expr="'transferir'" />
			<assign name="AppState.varDestino" expr="'interno'" />
			<assign name="AppState.varServicio" expr="'servinco'" />				
			<goto next="#Logger033" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="preferente">
		<block>
			<log gvp:level="1">
				<value expr="'[CAT_Tarjetas] VIPaPreferente1p'"/>
			</log>
    	</block>
		<block>
			
			<assign name="AppState.varAccion" expr="'transferir'" />
			<assign name="AppState.varDestino" expr="'interno'" />
			<assign name="AppState.varServicio" expr="'preferente'" />				
			<goto next="#LogNav" />
		</block>
	</form>

	<!-- This is the Subdialog block -->
	<form id="TransferX">

		<subdialog name="TransferXSubdialog" fetchhint="prefetch"  src="../src-gen/Transfer.vxml">
    		<param name="varActionParentId" expr="''"/>
			<filled>
				<goto next="#preferente" />
			</filled>
		</subdialog>
		
    	<catch event="error.badfetch">
    <goto next="#Logger023" />
    	</catch>
    	<catch event="error">
    <goto next="#Logger023" />
    	</catch>
	</form>

	<!-- This is the Backend logic block -->
	<form id="TokenCert">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="CallID" expr="AppState.CallUUID" />
    	<var name="URL" expr="AppState.var_GetToken_URL" />	
		<block>
			<data name="TokenCertData" src="../src/TokenCert.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString CallID URL" />
        	<if cond="typeof TokenCertData.errorMsg == 'undefined'">
        		<assign name="AppState.TokenCertResult" expr="TokenCertData" />
            	<if cond="typeof AppState.TokenCertResult.HttpCode != 'undefined'">
            		<assign name="AppState.var_GetToken_HttpCode" expr="AppState.TokenCertResult.HttpCode" />
            	</if>
            	<if cond="typeof AppState.TokenCertResult.Token != 'undefined'">
            		<assign name="AppState.var_GetToken_Token" expr="AppState.TokenCertResult.Token" />
            	</if>
				<goto next="#Assign6" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="TokenCertData.errorMsg" />
        	</if>
		</block>
		
		<catch event="error.badfetch">
			<goto next="#Logger046" />
    	</catch>
		<catch event="error.com.genesyslab.composer.servererror">
			<goto next="#Logger046" />
    	</catch>
	</form>

	<!-- This is the Assign block -->
	<form id="var_transferir_rut">
		<block>
			
			<assign name="AppState.var_transferir_rut" expr="AppState.var_RUT" />				
			<goto next="#TokenCert" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign6">
		<block>
			
			<assign name="AppState.var_datos_cliente_url" expr="AppState.var_EndPointDatosCliente.replace('@RUT@', AppState.var_RUT)" />
			<assign name="AppState.var_transferir_token" expr="AppState.var_GetToken_Token" />
			<assign name="AppState.var_datos_cliente_mora_url" expr="AppState.var_GetMora_URL.replace('@RUT@', AppState.var_RUT)" />
			<assign name="AppState.varCliente" expr="'NoCliente'" />				
			<goto next="#DataClienteCert" />
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="DataClienteCert">
		<block>
			<log gvp:level="1">
				<value expr="'[DataClienteCert] Dentro de GetDataCliente'"/>
			</log>
    	</block>

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="CallID" expr="AppState.CallUUID" />
    	<var name="Token" expr="AppState.var_GetToken_Token" />
    	<var name="URL" expr="AppState.var_datos_cliente_url" />	
		<block>
			<data name="DataClienteCertData" src="../src/DataClienteCert.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString CallID Token URL" />
        	<if cond="typeof DataClienteCertData.errorMsg == 'undefined'">
        		<assign name="AppState.DataClienteCertResult" expr="DataClienteCertData" />
            	<if cond="typeof AppState.DataClienteCertResult.HttpCode != 'undefined'">
            		<assign name="AppState.var_datos_cliente_http" expr="AppState.DataClienteCertResult.HttpCode" />
            	</if>
            	<if cond="typeof AppState.DataClienteCertResult.tipo_tarjeta != 'undefined'">
            		<assign name="AppState.var_datos_cliente_tipo_tarjeta" expr="AppState.DataClienteCertResult.tipo_tarjeta" />
            	</if>
            	<if cond="typeof AppState.DataClienteCertResult.guid_persona != 'undefined'">
            		<assign name="AppState.var_datos_cliente_guid" expr="AppState.DataClienteCertResult.guid_persona" />
            	</if>
            	<if cond="typeof AppState.DataClienteCertResult.castigada != 'undefined'">
            		<assign name="AppState.var_datos_cliente_castigada" expr="AppState.DataClienteCertResult.castigada" />
            	</if>
            	<if cond="typeof AppState.DataClienteCertResult.nombre != 'undefined'">
            		<assign name="AppState.varNombre" expr="AppState.DataClienteCertResult.nombre" />
            	</if>
            	<if cond="typeof AppState.DataClienteCertResult.idCuenta != 'undefined'">
            		<assign name="AppState.idCuenta" expr="AppState.DataClienteCertResult.idCuenta" />
            	</if>
            	<if cond="typeof AppState.DataClienteCertResult.ultimosDigitos != 'undefined'">
            		<assign name="AppState.ultimosDigitos" expr="AppState.DataClienteCertResult.ultimosDigitos" />
            	</if>
            	<if cond="typeof AppState.DataClienteCertResult.tipoCliente != 'undefined'">
            		<assign name="AppState.var_TipoCliente" expr="AppState.DataClienteCertResult.tipoCliente" />
            	</if>
				<goto next="#Logger048" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="DataClienteCertData.errorMsg" />
        	</if>
		</block>
		
		<catch event="error.badfetch">
			<goto next="#Logger047" />
    	</catch>
		<catch event="error.com.genesyslab.composer.servererror">
			<goto next="#Logger047" />
    	</catch>
	</form>

	<!-- This is the Backend logic block -->
	<form id="CrearSesionCert">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="CallID" expr="AppState.CallUUID" />
    	<var name="Token" expr="AppState.var_GetToken_Token" />
    	<var name="URL" expr="AppState.var_crear_sesion_url" />
    	<var name="GUID_PERSONA" expr="AppState.var_datos_cliente_guid" />
    	<var name="CLIENTE_ID" expr="AppState.var_crear_sesion_dhr2" />	
		<block>
			<data name="CrearSesionCertData" src="../src/CrearSesionCert.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString CallID Token URL GUID_PERSONA CLIENTE_ID" />
        	<if cond="typeof CrearSesionCertData.errorMsg == 'undefined'">
        		<assign name="AppState.CrearSesionCertResult" expr="CrearSesionCertData" />
            	<if cond="typeof AppState.CrearSesionCertResult.HttpCode != 'undefined'">
            		<assign name="AppState.var_crear_sesion_http" expr="AppState.CrearSesionCertResult.HttpCode" />
            	</if>
            	<if cond="typeof AppState.CrearSesionCertResult.sesion_id != 'undefined'">
            		<assign name="AppState.var_crear_sesion_id_sesion" expr="AppState.CrearSesionCertResult.sesion_id" />
            	</if>
				<goto next="#Logger044" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="CrearSesionCertData.errorMsg" />
        	</if>
		</block>
		
		<catch event="error.badfetch">
			<goto next="#Logger043" />
    	</catch>
		<catch event="error.com.genesyslab.composer.servererror">
			<goto next="#Logger043" />
    	</catch>
	</form>

	<!-- This is the Assign block -->
	<form id="sesionId">
		<block>
			
			<assign name="AppState.var_transferir_idsesion" expr="AppState.var_crear_sesion_id_sesion" />
			<assign name="AppState.var_transferir_guid" expr="AppState.var_datos_cliente_guid" />				
			<goto next="#ConsultaMora" />
		</block>
	</form>

	<!-- This is the Log block -->
	<form id="var_transferir">
		<block>
			<log gvp:level="1">
				<value expr="'[CAT_Tarjetas] log hora fin: ' + AppState.var_log_hora_fin"/>
			</log>
			<log gvp:level="1">
				<value expr="'[CAT_Tarjetas][var_trasfer] var transferir token: ' + AppState.var_transferir_token + 'var transferir rut: ' + AppState.var_transferir_rut +', var transferir sesion: ' + AppState.var_transferir_idsesion + ', var trasferir guid: ' + AppState.var_transferir_guid"/>
			</log>
    	</block>
    	<block>
    		<goto next="#Logger050" />
    	</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Parametros">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="CallID" expr="AppState.CallUUID" />
    	<var name="DNIS" expr="AppState.var_dnis" />
    	<var name="ANI" expr="AppState.ANI" />	
		<block>
			<data name="ParametrosData" src="../src/Parametros.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString CallID DNIS ANI" />
        	<if cond="typeof ParametrosData.errorMsg == 'undefined'">
        		<assign name="AppState.ParametrosResult" expr="ParametrosData" />
            	<if cond="typeof AppState.ParametrosResult.EndPointGetToken != 'undefined'">
            		<assign name="AppState.var_GetToken_URL" expr="AppState.ParametrosResult.EndPointGetToken" />
            	</if>
            	<if cond="typeof AppState.ParametrosResult.EndPointDatosCliente != 'undefined'">
            		<assign name="AppState.var_EndPointDatosCliente" expr="AppState.ParametrosResult.EndPointDatosCliente" />
            	</if>
            	<if cond="typeof AppState.ParametrosResult.EndPointCrearSesionCRM != 'undefined'">
            		<assign name="AppState.var_crear_sesion_url" expr="AppState.ParametrosResult.EndPointCrearSesionCRM" />
            	</if>
            	<if cond="typeof AppState.ParametrosResult.EndPointCerrarSesionCRM != 'undefined'">
            		<assign name="AppState.var_EndPointCerrarSesionCRM" expr="AppState.ParametrosResult.EndPointCerrarSesionCRM" />
            	</if>
            	<if cond="typeof AppState.ParametrosResult.ExecWSSession != 'undefined'">
            		<assign name="AppState.var_switch_crear_sesion" expr="AppState.ParametrosResult.ExecWSSession" />
            	</if>
            	<if cond="typeof AppState.ParametrosResult.HorarioIni != 'undefined'">
            		<assign name="AppState.varHorarioIni" expr="AppState.ParametrosResult.HorarioIni" />
            	</if>
            	<if cond="typeof AppState.ParametrosResult.HorarioFin != 'undefined'">
            		<assign name="AppState.varHorarioFin" expr="AppState.ParametrosResult.HorarioFin" />
            	</if>
            	<if cond="typeof AppState.ParametrosResult.numeroHorasMoviles != 'undefined'">
            		<assign name="AppState.varNumeroHorasMoviles" expr="AppState.ParametrosResult.numeroHorasMoviles" />
            	</if>
            	<if cond="typeof AppState.ParametrosResult.numeroLlamadasANIDesconectar != 'undefined'">
            		<assign name="AppState.varNumeroLlamadasANIDesconectar" expr="AppState.ParametrosResult.numeroLlamadasANIDesconectar" />
            	</if>
            	<if cond="typeof AppState.ParametrosResult.numeroLlamadasRUTDesconectar != 'undefined'">
            		<assign name="AppState.varNumeroLlamadasRUTDesconectar" expr="AppState.ParametrosResult.numeroLlamadasRUTDesconectar" />
            	</if>
            	<if cond="typeof AppState.ParametrosResult.SendMailFree_emlFrom != 'undefined'">
            		<assign name="AppState.varSendMailFree_emlFrom" expr="AppState.ParametrosResult.SendMailFree_emlFrom" />
            	</if>
            	<if cond="typeof AppState.ParametrosResult.SendMailFree_emlTo != 'undefined'">
            		<assign name="AppState.varSendMailFree_emlTo" expr="AppState.ParametrosResult.SendMailFree_emlTo" />
            	</if>
            	<if cond="typeof AppState.ParametrosResult.SendMailFree_emlSubject != 'undefined'">
            		<assign name="AppState.varSendMailFree_emlSubject" expr="AppState.ParametrosResult.SendMailFree_emlSubject" />
            	</if>
            	<if cond="typeof AppState.ParametrosResult.SendMailFree_emlBody != 'undefined'">
            		<assign name="AppState.varSendMailFree_emlBody" expr="AppState.ParametrosResult.SendMailFree_emlBody" />
            	</if>
            	<if cond="typeof AppState.ParametrosResult.SendMailFree_srvIp != 'undefined'">
            		<assign name="AppState.varSendMailFree_srvIp" expr="AppState.ParametrosResult.SendMailFree_srvIp" />
            	</if>
            	<if cond="typeof AppState.ParametrosResult.SendMailFree_srvPort != 'undefined'">
            		<assign name="AppState.varSendMailFree_srvPort" expr="AppState.ParametrosResult.SendMailFree_srvPort" />
            	</if>
            	<if cond="typeof AppState.ParametrosResult.SendMailFree_srvSsl != 'undefined'">
            		<assign name="AppState.varSendMailFree_srvSsl" expr="AppState.ParametrosResult.SendMailFree_srvSsl" />
            	</if>
            	<if cond="typeof AppState.ParametrosResult.SendMailFree_srvUser != 'undefined'">
            		<assign name="AppState.varSendMailFree_srvUser" expr="AppState.ParametrosResult.SendMailFree_srvUser" />
            	</if>
            	<if cond="typeof AppState.ParametrosResult.SendMailFree_srvPassw != 'undefined'">
            		<assign name="AppState.varSendMailFree_srvPassw" expr="AppState.ParametrosResult.SendMailFree_srvPassw" />
            	</if>
            	<if cond="typeof AppState.ParametrosResult.EndPointDatosMora != 'undefined'">
            		<assign name="AppState.var_GetMora_URL" expr="AppState.ParametrosResult.EndPointDatosMora" />
            	</if>
            	<if cond="typeof AppState.ParametrosResult.EndPointTokenValidaTarjeta != 'undefined'">
            		<assign name="AppState.var_TokenValidaTarjeta_url" expr="AppState.ParametrosResult.EndPointTokenValidaTarjeta" />
            	</if>
            	<if cond="typeof AppState.ParametrosResult.EndPointValidaClave != 'undefined'">
            		<assign name="AppState.var_validaClave_url" expr="AppState.ParametrosResult.EndPointValidaClave" />
            	</if>
            	<if cond="typeof AppState.ParametrosResult.EndPointFacturacion != 'undefined'">
            		<assign name="AppState.var_Facturacion_url" expr="AppState.ParametrosResult.EndPointFacturacion" />
            	</if>
            	<if cond="typeof AppState.ParametrosResult.EndPointObtieneEWT != 'undefined'">
            		<assign name="AppState.var_obtiene_ewt_URL" expr="AppState.ParametrosResult.EndPointObtieneEWT" />
            	</if>
            	<if cond="typeof AppState.ParametrosResult.EndPointSMSWhatsapp != 'undefined'">
            		<assign name="AppState.var_obtiene_smsWhatsapp_URL" expr="AppState.ParametrosResult.EndPointSMSWhatsapp" />
            	</if>
            	<if cond="typeof AppState.ParametrosResult.EndPointHSMWhatsapp != 'undefined'">
            		<assign name="AppState.var_obtiene_hsmWhatsapp_URL" expr="AppState.ParametrosResult.EndPointHSMWhatsapp" />
            	</if>
            	<if cond="typeof AppState.ParametrosResult.EndPointActualizaSesion != 'undefined'">
            		<assign name="AppState.var_url_actualiza_sesion" expr="AppState.ParametrosResult.EndPointActualizaSesion" />
            	</if>
            	<if cond="typeof AppState.ParametrosResult.EndPointOfertaClientes != 'undefined'">
            		<assign name="AppState.var_ConsultaOfertas_url" expr="AppState.ParametrosResult.EndPointOfertaClientes" />
            	</if>
				<goto next="#Logger013" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="ParametrosData.errorMsg" />
        	</if>
		</block>
		
		<catch event="error.badfetch">
			<goto next="#Logger012" />
    	</catch>
		<catch event="error.com.genesyslab.composer.servererror">
			<goto next="#Logger012" />
    	</catch>
	</form>

	<!-- This is the Branching block -->
	<form id="BranchCerrar1">
		<block>
			<if cond="AppState.var_flag_crear_sesion == 1">
				
				<!-- This is the OutLink -->
				<goto next="#Copy_1_Assign4" />
			</if>
			<goto next="#Logger007" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Copy_1_Assign4">
		<block>
			
			<assign name="AppState.var_cerrar_sesion_url" expr="AppState.var_EndPointCerrarSesionCRM+AppState.var_crear_sesion_id_sesion" />
			<assign name="AppState.var_crear_sesion_dhr2" expr="AppState.var_RUT + '-CHL-1'" />				
			<goto next="#Logger006" />
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Copy_1_CerrarSesionCert">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="CallID" expr="AppState.CallUUID" />
    	<var name="Token" expr="AppState.var_GetToken_Token" />
    	<var name="URL" expr="AppState.var_cerrar_sesion_url" />
    	<var name="GUID_PERSONA" expr="AppState.var_datos_cliente_guid" />
    	<var name="CLIENTE_ID" expr="AppState.var_crear_sesion_dhr2" />	
		<block>
			<data name="Copy_1_CerrarSesionCertData" src="../src/CerrarSesionCert.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString CallID Token URL GUID_PERSONA CLIENTE_ID" />
        	<if cond="typeof Copy_1_CerrarSesionCertData.errorMsg == 'undefined'">
        		<assign name="AppState.Copy_1_CerrarSesionCertResult" expr="Copy_1_CerrarSesionCertData" />
            	<if cond="typeof AppState.Copy_1_CerrarSesionCertResult.ParamHttpCode != 'undefined'">
            		<assign name="AppState.var_cerrar_sesion_http" expr="AppState.Copy_1_CerrarSesionCertResult.ParamHttpCode" />
            	</if>
				<goto next="#Copy_1_Log5" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Copy_1_CerrarSesionCertData.errorMsg" />
        	</if>
		</block>
		
		<catch event="error.badfetch">
			<goto next="#Logger045" />
    	</catch>
		<catch event="error.com.genesyslab.composer.servererror">
			<goto next="#Logger045" />
    	</catch>
	</form>

	<!-- This is the Log block -->
	<form id="Copy_1_Log5">
		<block>
			<log gvp:level="1">
				<value expr="'[WS4][Cerrar Sesion CRM] json result: ' + AppState.var_crear_sesion_result + ', http code: ' + AppState.var_crear_sesion_http"/>
			</log>
    	</block>
    	<block>
    		<goto next="#Logger008" />
    	</block>
	</form>

	<!-- This is the Branching block -->
	<form id="SwitchCrear">
		<block>
			<if cond="AppState.var_switch_crear_sesion == 'on'">
				
				<!-- This is the OutLink -->
				<goto next="#Assign3" />
			</if>
			<goto next="#marcaConsultaVip" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="flag">
		<block>
			
			<assign name="AppState.var_flag_crear_sesion" expr="1" />				
			<goto next="#ConsultaOferta" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Copy_2_Assign4">
		<block>
			
			<assign name="AppState.var_cerrar_sesion_url" expr="AppState.var_EndPointCerrarSesionCRM+AppState.var_crear_sesion_id_sesion" />
			<assign name="AppState.var_crear_sesion_dhr2" expr="AppState.var_RUT + '-CHL-1'" />				
			<goto next="#Logger028" />
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Copy_2_CerrarSesionCert">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="CallID" expr="AppState.CallUUID" />
    	<var name="Token" expr="AppState.var_GetToken_Token" />
    	<var name="URL" expr="AppState.var_cerrar_sesion_url" />
    	<var name="GUID_PERSONA" expr="AppState.var_datos_cliente_guid" />
    	<var name="CLIENTE_ID" expr="AppState.var_crear_sesion_dhr2" />	
		<block>
			<data name="Copy_2_CerrarSesionCertData" src="../src/CerrarSesionCert.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString CallID Token URL GUID_PERSONA CLIENTE_ID" />
        	<if cond="typeof Copy_2_CerrarSesionCertData.errorMsg == 'undefined'">
        		<assign name="AppState.Copy_2_CerrarSesionCertResult" expr="Copy_2_CerrarSesionCertData" />
            	<if cond="typeof AppState.Copy_2_CerrarSesionCertResult.ParamHttpCode != 'undefined'">
            		<assign name="AppState.var_cerrar_sesion_http" expr="AppState.Copy_2_CerrarSesionCertResult.ParamHttpCode" />
            	</if>
				<goto next="#Copy_2_Log5" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Copy_2_CerrarSesionCertData.errorMsg" />
        	</if>
		</block>
		
		<catch event="error.badfetch">
			<goto next="#Logger030" />
    	</catch>
		<catch event="error.com.genesyslab.composer.servererror">
			<goto next="#Logger030" />
    	</catch>
	</form>

	<!-- This is the Log block -->
	<form id="Copy_2_Log5">
		<block>
			<log gvp:level="1">
				<value expr="'[WS4][Cerrar Sesion CRM] json result: ' + AppState.var_crear_sesion_result + ', http code: ' + AppState.var_crear_sesion_http"/>
			</log>
    	</block>
    	<block>
    		<goto next="#Logger029" />
    	</block>
	</form>

	<!-- This is the Assign block -->
	<form id="AccionCortar2">
		<block>
			
			<assign name="AppState.varAccion" expr="'cortar'" />				
			<goto next="#Logger005" />
		</block>
	</form>

	<!-- This is the Branching block -->
	<form id="VarCortar">
		<block>
			<if cond="AppState.var_out_marca == ''">
				
				<!-- This is the OutLink -->
				<goto next="#AccionCortar3" />
			</if>
			<if cond="AppState.var_out_marca == 'FueraHorario'">
				
				<!-- This is the OutLink -->
				<goto next="#MarcaFueraHorario" />
			</if>
			<goto next="#BranchCerrar3" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="AccionCortar3">
		<block>
			
			<assign name="AppState.varAccion" expr="'cortar'" />
			<assign name="AppState.varDestino" expr="''" />
			<assign name="AppState.varServicio" expr="''" />				
			<goto next="#Copy_2_Assign4" />
		</block>
	</form>

	<!-- This is the Branching block -->
	<form id="ClienteVIP2">
		<block>
			<log gvp:level="1">
				<value expr="'[CAT_Tarjetas] ClienteVIP , var_StatusVipDB=' + AppState.var_StatusVipDB"/>
			</log>
    	</block>
		<block>
			<if cond="AppState.var_StatusVipDB == 1">
				
				<!-- Post Action -->
				<script>try{
				AppState.var_TranferVDN = &quot;12345&quot;
				}
				catch(err){}
				
				</script>
				
				<!-- This is the OutLink -->
				<goto next="#Logger039" />
			</if>
			<goto next="#marcaNoVIP2" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="marcaConsultaVip2">
		<block>
			
			<assign name="AppState.var_log_navegacion" expr="AppState.var_log_navegacion.concat(',ConsultaVIP')" />				
			<goto next="#Copy_1_JSP_ConsultaVip" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="marcaNoWs">
		<block>
			
			<assign name="AppState.var_log_navegacion" expr="AppState.var_log_navegacion.concat(',NoRespuestaWs')" />				
			<goto next="#Copy_1_Sub_Regularizacion" />
		</block>
	</form>

	<!-- This is the Branching block -->
	<form id="EsPreferente2">
		<block>
			<log gvp:level="1">
				<value expr="'[CAT_Tarjetas] EsPreferente , var_StatusPreferenteDB=' + AppState.var_StatusPreferenteDB"/>
			</log>
    	</block>
		<block>
			<if cond="AppState.var_StatusPreferenteDB == 1">
				
				<!-- This is the OutLink -->
				<goto next="#Logger042" />
			</if>
			<goto next="#marcaNoPref" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="marcaVIP2">
		<block>
			
			<assign name="AppState.var_log_navegacion" expr="AppState.var_log_navegacion.concat(',ClienteVIP')" />
			<assign name="AppState.varCliente" expr="'VIP'" />				
			<goto next="#marca13b" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="marcaNoVIP2">
		<block>
			
			<assign name="AppState.var_log_navegacion" expr="AppState.var_log_navegacion.concat(',ClienteNoVIP')" />				
			<goto next="#Copy_1_JSP_ConsultaPreferente" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="marcaPref">
		<block>
			
			<assign name="AppState.var_log_navegacion" expr="AppState.var_log_navegacion.concat(',Preferente')" />
			<assign name="AppState.varCliente" expr="'Preferente'" />				
			<goto next="#marca13b" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="marcaNoPref">
		<block>
			
			<assign name="AppState.var_log_navegacion" expr="AppState.var_log_navegacion.concat(',NoPreferente')" />				
			<goto next="#MasivoPeru" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign1">
		<block>
			
			<assign name="AppState.var_log_navegacion" expr="AppState.var_log_navegacion.concat('ClienteCorta,')" />				
			<goto next="#AccionCortar2" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assign2">
		<block>
			
			<assign name="AppState.var_log_navegacion" expr="AppState.var_log_navegacion.concat('Error,')" />
			<assign name="AppState.varError" expr="'ERROR: LAST_EVENT_MSG:'+AppState.LAST_EVENT_MSG+'|LAST_EVENT_NAME:'+AppState.LAST_EVENT_NAME" />				
			<goto next="#AccionCortar2" />
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Logger004">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="'Cliente corta llamada|LAST_EVENT_NAME:'+AppState.LAST_EVENT_NAME+'|LAST_EVENT_MSG:'+AppState.LAST_EVENT_MSG" />
    	<var name="LoggerNivel" expr="'Info'" />	
		<block>
			<data name="Logger004Data" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof Logger004Data.errorMsg == 'undefined'">
        		<assign name="AppState.Logger004Result" expr="Logger004Data" />
				<goto next="#Assign1" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Logger004Data.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Logger001">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="'Inicia flujo Tarjetas ..... ANI: ' + AppState.ANI" />
    	<var name="LoggerNivel" expr="'Info'" />	
		<block>
			<data name="Logger001Data" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof Logger001Data.errorMsg == 'undefined'">
        		<assign name="AppState.Logger001Result" expr="Logger001Data" />
				<goto next="#ECMA_FromOrigen" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Logger001Data.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Logger003">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="'Error General|LAST_EVENT_NAME:'+AppState.LAST_EVENT_NAME+'|LAST_EVENT_MSG:'+AppState.LAST_EVENT_MSG" />
    	<var name="LoggerNivel" expr="'Error'" />	
		<block>
			<data name="Logger003Data" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof Logger003Data.errorMsg == 'undefined'">
        		<assign name="AppState.Logger003Result" expr="Logger003Data" />
				<goto next="#Assign2" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Logger003Data.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Logger005">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="'Cerrar Sesion|AppState.var_flag_crear_sesion='+AppState.var_flag_crear_sesion" />
    	<var name="LoggerNivel" expr="'Info'" />	
		<block>
			<data name="Logger005Data" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof Logger005Data.errorMsg == 'undefined'">
        		<assign name="AppState.Logger005Result" expr="Logger005Data" />
				<goto next="#BranchCerrar1" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Logger005Data.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Logger006">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="'Inicio Cerrar Sesion por Corte o Error|var_cerrar_sesion_url:'+AppState.var_cerrar_sesion_url+'|var_crear_sesion_dhr2:'+AppState.var_crear_sesion_dhr1" />
    	<var name="LoggerNivel" expr="'Info'" />	
		<block>
			<data name="Logger006Data" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof Logger006Data.errorMsg == 'undefined'">
        		<assign name="AppState.Logger006Result" expr="Logger006Data" />
				<goto next="#Copy_1_CerrarSesionCert" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Logger006Data.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Logger007">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="'No se debe cerrar sesion'" />
    	<var name="LoggerNivel" expr="'Info'" />	
		<block>
			<data name="Logger007Data" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof Logger007Data.errorMsg == 'undefined'">
        		<assign name="AppState.Logger007Result" expr="Logger007Data" />
				<goto next="#LogNav" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Logger007Data.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Logger008">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="'Fin Cerrar Sesion por Corte o Error|json result: ' + AppState.var_crear_sesion_result + ', http code: ' + AppState.var_crear_sesion_http" />
    	<var name="LoggerNivel" expr="'Info'" />	
		<block>
			<data name="Logger008Data" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof Logger008Data.errorMsg == 'undefined'">
        		<assign name="AppState.Logger008Result" expr="Logger008Data" />
				<goto next="#LogNav" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Logger008Data.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Logger009">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="'Esta en liste negra, se procedera a cortar llamada'" />
    	<var name="LoggerNivel" expr="'Info'" />	
		<block>
			<data name="Logger009Data" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof Logger009Data.errorMsg == 'undefined'">
        		<assign name="AppState.Logger009Result" expr="Logger009Data" />
				<goto next="#marca1" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Logger009Data.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Logger010">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="'Tiempo superado para ingresar rut, se procede a cortar llamada'" />
    	<var name="LoggerNivel" expr="'Info'" />	
		<block>
			<data name="Logger010Data" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof Logger010Data.errorMsg == 'undefined'">
        		<assign name="AppState.Logger010Result" expr="Logger010Data" />
				<goto next="#marca3" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Logger010Data.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Logger011">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="'Valores incorrectos ingresados, se procede a cortar llamada'" />
    	<var name="LoggerNivel" expr="'Info'" />	
		<block>
			<data name="Logger011Data" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof Logger011Data.errorMsg == 'undefined'">
        		<assign name="AppState.Logger011Result" expr="Logger011Data" />
				<goto next="#marca3" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Logger011Data.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Logger012">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="'Error al buscar parametros|LAST_EVENT_NAME:'+AppState.LAST_EVENT_NAME+'|LAST_EVENT_MSG:'+AppState.LAST_EVENT_MSG" />
    	<var name="LoggerNivel" expr="'Error'" />	
		<block>
			<data name="Logger012Data" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof Logger012Data.errorMsg == 'undefined'">
        		<assign name="AppState.Logger012Result" expr="Logger012Data" />
				<goto next="#VieneDeTarjetas1" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Logger012Data.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Logger013">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="'Parametros|vardst: ' + AppState.var_dnis + '|EndPointGetToken: ' + AppState.var_EndPointGetToken +  '|NumeroHorasMoviles: ' + AppState.varNumeroHorasMoviles +  '|NumeroLlamadasANIDesconectar: ' + AppState.varNumeroLlamadasANIDesconectar +  '|NumeroLlamadasRUTDesconectar: ' + AppState.varNumeroLlamadasRUTDesconectar +  '|SendMailFree_emlBody: ' + AppState.varSendMailFree_emlBody + '|EndPointEWT: ' + AppState.var_obtiene_ewt_URL + '|BlackFriday: ' + AppState.att_CATClienteOfertable + '|EndPointOfertaClientes: ' + AppState.var_ConsultaOfertas_url" />
    	<var name="LoggerNivel" expr="'Info'" />	
		<block>
			<data name="Logger013Data" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof Logger013Data.errorMsg == 'undefined'">
        		<assign name="AppState.Logger013Result" expr="Logger013Data" />
				<goto next="#VieneDeTarjetas1" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Logger013Data.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Logger014">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="'Se supera el numero de intetos de validar rut, se procede a cortar la llamada'" />
    	<var name="LoggerNivel" expr="'Info'" />	
		<block>
			<data name="Logger014Data" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof Logger014Data.errorMsg == 'undefined'">
        		<assign name="AppState.Logger014Result" expr="Logger014Data" />
				<goto next="#superaNM" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Logger014Data.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Logger015">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="'Error al enviar correo VIP|LAST_EVENT_NAME:'+AppState.LAST_EVENT_NAME+'|LAST_EVENT_MSG:'+AppState.LAST_EVENT_MSG" />
    	<var name="LoggerNivel" expr="'Error'" />	
		<block>
			<data name="Logger015Data" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof Logger015Data.errorMsg == 'undefined'">
        		<assign name="AppState.Logger015Result" expr="Logger015Data" />
				<goto next="#LogNav" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Logger015Data.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Logger016">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="'Error subflujo audios de transferencia VIP|LAST_EVENT_NAME:'+AppState.LAST_EVENT_NAME+'|LAST_EVENT_MSG:'+AppState.LAST_EVENT_MSG" />
    	<var name="LoggerNivel" expr="'Error'" />	
		<block>
			<data name="Logger016Data" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof Logger016Data.errorMsg == 'undefined'">
        		<assign name="AppState.Logger016Result" expr="Logger016Data" />
				<goto next="#WS_mail" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Logger016Data.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Logger017">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="'Se envia el correo con exito'" />
    	<var name="LoggerNivel" expr="'Info'" />	
		<block>
			<data name="Logger017Data" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof Logger017Data.errorMsg == 'undefined'">
        		<assign name="AppState.Logger017Result" expr="Logger017Data" />
				<goto next="#LogNav" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Logger017Data.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Logger018">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="'Cliente identificado como VIP'" />
    	<var name="LoggerNivel" expr="'Info'" />	
		<block>
			<data name="Logger018Data" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof Logger018Data.errorMsg == 'undefined'">
        		<assign name="AppState.Logger018Result" expr="Logger018Data" />
				<goto next="#marcaVIP" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Logger018Data.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Logger_Preferente">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="AppState.var_HdrLog + 'Tipo cliente preferente|var_StatusPreferenteDB:' + AppState.var_StatusPreferenteDB" />
    	<var name="LoggerNivel" expr="'Info'" />	
		<block>
			<data name="Logger_PreferenteData" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof Logger_PreferenteData.errorMsg == 'undefined'">
        		<assign name="AppState.Logger_PreferenteResult" expr="Logger_PreferenteData" />
				<goto next="#EsPreferente" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Logger_PreferenteData.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Logger022">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="'Cliente es preferente'" />
    	<var name="LoggerNivel" expr="'Info'" />	
		<block>
			<data name="Logger022Data" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof Logger022Data.errorMsg == 'undefined'">
        		<assign name="AppState.Logger022Result" expr="Logger022Data" />
				<goto next="#marca13" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Logger022Data.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Logger023">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="'Error subflujo audios de transferencia preferente|LAST_EVENT_NAME:'+AppState.LAST_EVENT_NAME+'|LAST_EVENT_MSG:'+AppState.LAST_EVENT_MSG" />
    	<var name="LoggerNivel" expr="'Error'" />	
		<block>
			<data name="Logger023Data" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof Logger023Data.errorMsg == 'undefined'">
        		<assign name="AppState.Logger023Result" expr="Logger023Data" />
				<goto next="#preferente" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Logger023Data.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Logger026">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="'Error subflujo ofertable|LAST_EVENT_NAME:'+AppState.LAST_EVENT_NAME+'|LAST_EVENT_MSG:'+AppState.LAST_EVENT_MSG" />
    	<var name="LoggerNivel" expr="'Error'" />	
		<block>
			<data name="Logger026Data" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof Logger026Data.errorMsg == 'undefined'">
        		<assign name="AppState.Logger026Result" expr="Logger026Data" />
				<goto next="#marca16" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Logger026Data.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Logger027">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="'Subflujo NoPREF_ClaveN0k | var_out_marca: '+AppState.var_out_marca + ' ,Accion: ' + AppState.varAccion + ' ,Destino: ' + AppState.varDestino + ' ,Opcion: ' + AppState.varOpcion + ' ,Prioridad: ' + AppState.varPrioridad + ' ,Servicio: ' + AppState.varServicio + ' ,URL: ' + AppState.varURL" />
    	<var name="LoggerNivel" expr="'Info'" />	
		<block>
			<data name="Logger027Data" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof Logger027Data.errorMsg == 'undefined'">
        		<assign name="AppState.Logger027Result" expr="Logger027Data" />
				<goto next="#JSP_ClienteNoEnrolado" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Logger027Data.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Logger028">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="'Cerrar Sesion Normal|var_cerrar_sesion_url:'+AppState.var_cerrar_sesion_url+'|var_crear_sesion_dhr2:'+AppState.var_crear_sesion_dhr2" />
    	<var name="LoggerNivel" expr="'Info'" />	
		<block>
			<data name="Logger028Data" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof Logger028Data.errorMsg == 'undefined'">
        		<assign name="AppState.Logger028Result" expr="Logger028Data" />
				<goto next="#Copy_2_CerrarSesionCert" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Logger028Data.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Logger029">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="'Sunflujo NoPREF_ClaveN0k|var_out_marca:'+AppState.var_out_marca" />
    	<var name="LoggerNivel" expr="'Info'" />	
		<block>
			<data name="Logger029Data" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof Logger029Data.errorMsg == 'undefined'">
        		<assign name="AppState.Logger029Result" expr="Logger029Data" />
				<goto next="#LogNav" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Logger029Data.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Logger030">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="'Error al cerrar sesion en flujo normal|LAST_EVENT_NAME:'+AppState.LAST_EVENT_NAME+'|LAST_EVENT_MSG:'+AppState.LAST_EVENT_MSG" />
    	<var name="LoggerNivel" expr="'Error'" />	
		<block>
			<data name="Logger030Data" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof Logger030Data.errorMsg == 'undefined'">
        		<assign name="AppState.Logger030Result" expr="Logger030Data" />
				<goto next="#Copy_2_Log5" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Logger030Data.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Logger033">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="'Transfiere a servinco'" />
    	<var name="LoggerNivel" expr="'Info'" />	
		<block>
			<data name="Logger033Data" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof Logger033Data.errorMsg == 'undefined'">
        		<assign name="AppState.Logger033Result" expr="Logger033Data" />
				<goto next="#Transfer2" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Logger033Data.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Logger034">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="'Error subflujo audio de transferencia masivo'" />
    	<var name="LoggerNivel" expr="'Info'" />	
		<block>
			<data name="Logger034Data" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof Logger034Data.errorMsg == 'undefined'">
        		<assign name="AppState.Logger034Result" expr="Logger034Data" />
				<goto next="#LogNav" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Logger034Data.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Logger035">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="'Transfiere a masivo'" />
    	<var name="LoggerNivel" expr="'Info'" />	
		<block>
			<data name="Logger035Data" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof Logger035Data.errorMsg == 'undefined'">
        		<assign name="AppState.Logger035Result" expr="Logger035Data" />
				<goto next="#Transfer2" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Logger035Data.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Logger036">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="'Error datos cliente result ' + AppState.var_datos_cliente_result + 'http ' + AppState.var_datos_cliente_http" />
    	<var name="LoggerNivel" expr="'Info'" />	
		<block>
			<data name="Logger036Data" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof Logger036Data.errorMsg == 'undefined'">
        		<assign name="AppState.Logger036Result" expr="Logger036Data" />
				<goto next="#marca8" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Logger036Data.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Logger039">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="'Cliente es VIP'" />
    	<var name="LoggerNivel" expr="'Info'" />	
		<block>
			<data name="Logger039Data" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof Logger039Data.errorMsg == 'undefined'">
        		<assign name="AppState.Logger039Result" expr="Logger039Data" />
				<goto next="#marcaVIP2" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Logger039Data.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Logger042">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="'Cliente es Preferente'" />
    	<var name="LoggerNivel" expr="'Info'" />	
		<block>
			<data name="Logger042Data" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof Logger042Data.errorMsg == 'undefined'">
        		<assign name="AppState.Logger042Result" expr="Logger042Data" />
				<goto next="#marcaPref" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Logger042Data.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Logger043">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="'Error al crear sesion|LAST_EVENT_NAME:'+AppState.LAST_EVENT_NAME+'|LAST_EVENT_MSG:'+AppState.LAST_EVENT_MSG" />
    	<var name="LoggerNivel" expr="'Error'" />	
		<block>
			<data name="Logger043Data" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof Logger043Data.errorMsg == 'undefined'">
        		<assign name="AppState.Logger043Result" expr="Logger043Data" />
				<goto next="#flag" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Logger043Data.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Logger044">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="'Crear Sesion CRM|json result: ' + AppState.var_crear_sesion_result + ', id-sesion: ' + AppState.var_crear_sesion_id_sesion + ', http code: ' + AppState.var_crear_sesion_http" />
    	<var name="LoggerNivel" expr="'Info'" />	
		<block>
			<data name="Logger044Data" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof Logger044Data.errorMsg == 'undefined'">
        		<assign name="AppState.Logger044Result" expr="Logger044Data" />
				<goto next="#flag" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Logger044Data.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Logger045">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="'Error al cerrar sesion|LAST_EVENT_NAME:'+AppState.LAST_EVENT_NAME+'|LAST_EVENT_MSG:'+AppState.LAST_EVENT_MSG" />
    	<var name="LoggerNivel" expr="'Error'" />	
		<block>
			<data name="Logger045Data" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof Logger045Data.errorMsg == 'undefined'">
        		<assign name="AppState.Logger045Result" expr="Logger045Data" />
				<goto next="#Copy_1_Log5" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Logger045Data.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Logger046">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="'Error al crear token|LAST_EVENT_NAME:'+AppState.LAST_EVENT_NAME+'|LAST_EVENT_MSG:'+AppState.LAST_EVENT_MSG" />
    	<var name="LoggerNivel" expr="'Error'" />	
		<block>
			<data name="Logger046Data" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof Logger046Data.errorMsg == 'undefined'">
        		<assign name="AppState.Logger046Result" expr="Logger046Data" />
				<goto next="#Assign6" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Logger046Data.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Logger047">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="'Error al buscar datos cliente|LAST_EVENT_NAME:'+AppState.LAST_EVENT_NAME+'|LAST_EVENT_MSG:'+AppState.LAST_EVENT_MSG" />
    	<var name="LoggerNivel" expr="'Error'" />	
		<block>
			<data name="Logger047Data" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof Logger047Data.errorMsg == 'undefined'">
        		<assign name="AppState.Logger047Result" expr="Logger047Data" />
				<goto next="#Errs" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Logger047Data.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Logger048">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="'Consulta datos clientes codigo http:'+AppState.var_datos_cliente_http + '   Tipo Tarjeta: '+ AppState.var_datos_cliente_tipo_tarjeta + '   Tipo Cliente: ' + AppState.var_TipoCliente" />
    	<var name="LoggerNivel" expr="'Info'" />	
		<block>
			<data name="Logger048Data" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof Logger048Data.errorMsg == 'undefined'">
        		<assign name="AppState.Logger048Result" expr="Logger048Data" />
				<goto next="#Errs" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Logger048Data.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Logger050">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="'Fin flujo ivr|transferir token: ' + AppState.var_transferir_token + '|var transferir rut: ' + AppState.var_transferir_rut +'|var transferir sesion: ' + AppState.var_transferir_idsesion + '|var trasferir guid: ' + AppState.var_transferir_guid + '|var_Servicio: ' + AppState.varServicio + '|varURLDynamics: ' +AppState.varURLDymanics" />
    	<var name="LoggerNivel" expr="'Info'" />	
		<block>
			<data name="Logger050Data" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof Logger050Data.errorMsg == 'undefined'">
        		<assign name="AppState.Logger050Result" expr="Logger050Data" />
				<goto next="#Exit2" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Logger050Data.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Subdialog block -->
	<form id="Sub_Regularizacion2">

		<subdialog name="Sub_Regularizacion2Subdialog" fetchhint="prefetch"  src="../src-gen/sub_Regularizacion.vxml">
    		<param name="varActionParentId" expr="''"/>
			<param name="Servicio" expr="'PreferenteReg'" />
			<param name="rut" expr="AppState.var_RUT" />
			<param name="var_log_navegacion" expr="AppState.var_log_navegacion" />
			<filled>
				<if cond="Sub_Regularizacion2Subdialog.retornaRegularizacion != 'undefined'">
  					<assign name="AppState.valorRegularizacion" expr="Sub_Regularizacion2Subdialog.retornaRegularizacion" /> 
  				</if>
				<if cond="Sub_Regularizacion2Subdialog.sub_Accion != 'undefined'">
  					<assign name="AppState.varAccion" expr="Sub_Regularizacion2Subdialog.sub_Accion" /> 
  				</if>
				<if cond="Sub_Regularizacion2Subdialog.sub_Destino != 'undefined'">
  					<assign name="AppState.varDestino" expr="Sub_Regularizacion2Subdialog.sub_Destino" /> 
  				</if>
				<if cond="Sub_Regularizacion2Subdialog.sub_Servicio != 'undefined'">
  					<assign name="AppState.varServicio" expr="Sub_Regularizacion2Subdialog.sub_Servicio" /> 
  				</if>
				<if cond="Sub_Regularizacion2Subdialog.var_log_navegacion != 'undefined'">
  					<assign name="AppState.var_log_navegacion" expr="Sub_Regularizacion2Subdialog.var_log_navegacion" /> 
  				</if>
				<goto next="#EsRegularizacion2" />
			</filled>
		</subdialog>
		
    	<catch event="error.badfetch">
    <goto next="#VIPaPreferente1p" />
    	</catch>
    	<catch event="error">
    <goto next="#VIPaPreferente1p" />
    	</catch>
	</form>

	<!-- This is the Branching block -->
	<form id="EsRegularizacion2">
		<block>
			<if cond="AppState.valorRegularizacion == 1">
				
				<!-- This is the OutLink -->
				<goto next="#WS_mail" />
			</if>
			<goto next="#VIPaPreferente1p" />
		</block>
	</form>

	<!-- This is the Subdialog block -->
	<form id="Sub_Regularizacion4">

		<subdialog name="Sub_Regularizacion4Subdialog" fetchhint="prefetch"  src="../src-gen/sub_Regularizacion.vxml">
    		<param name="varActionParentId" expr="''"/>
			<param name="Servicio" expr="'Regularizacion'" />
			<param name="rut" expr="AppState.var_RUT" />
			<param name="var_log_navegacion" expr="AppState.var_log_navegacion" />
			<filled>
				<if cond="Sub_Regularizacion4Subdialog.retornaRegularizacion != 'undefined'">
  					<assign name="AppState.valorRegularizacion" expr="Sub_Regularizacion4Subdialog.retornaRegularizacion" /> 
  				</if>
				<if cond="Sub_Regularizacion4Subdialog.sub_Accion != 'undefined'">
  					<assign name="AppState.varAccion" expr="Sub_Regularizacion4Subdialog.sub_Accion" /> 
  				</if>
				<if cond="Sub_Regularizacion4Subdialog.sub_Destino != 'undefined'">
  					<assign name="AppState.varDestino" expr="Sub_Regularizacion4Subdialog.sub_Destino" /> 
  				</if>
				<if cond="Sub_Regularizacion4Subdialog.sub_Servicio != 'undefined'">
  					<assign name="AppState.varServicio" expr="Sub_Regularizacion4Subdialog.sub_Servicio" /> 
  				</if>
				<if cond="Sub_Regularizacion4Subdialog.var_log_navegacion != 'undefined'">
  					<assign name="AppState.var_log_navegacion" expr="Sub_Regularizacion4Subdialog.var_log_navegacion" /> 
  				</if>
				<goto next="#EsRegularizacion4" />
			</filled>
		</subdialog>
		
    	<catch event="error.badfetch">
    <goto next="#JSP_Ofertable2" />
    	</catch>
    	<catch event="error">
    <goto next="#JSP_Ofertable2" />
    	</catch>
	</form>

	<!-- This is the Branching block -->
	<form id="EsRegularizacion4">
		<block>
			<if cond="AppState.valorRegularizacion == 1">
				
				<!-- This is the OutLink -->
				<goto next="#REG_Horario" />
			</if>
			<goto next="#JSP_Ofertable2" />
		</block>
	</form>

	<!-- This is the Subdialog block -->
	<form id="Sub_Regularizacion8">

		<subdialog name="Sub_Regularizacion8Subdialog" fetchhint="prefetch"  src="../src-gen/sub_Regularizacion.vxml">
    		<param name="varActionParentId" expr="''"/>
			<param name="Servicio" expr="'PreferenteReg'" />
			<param name="rut" expr="AppState.var_RUT" />
			<param name="var_log_navegacion" expr="AppState.var_log_navegacion" />
			<filled>
				<if cond="Sub_Regularizacion8Subdialog.retornaRegularizacion != 'undefined'">
  					<assign name="AppState.valorRegularizacion" expr="Sub_Regularizacion8Subdialog.retornaRegularizacion" /> 
  				</if>
				<if cond="Sub_Regularizacion8Subdialog.sub_Accion != 'undefined'">
  					<assign name="AppState.varAccion" expr="Sub_Regularizacion8Subdialog.sub_Accion" /> 
  				</if>
				<if cond="Sub_Regularizacion8Subdialog.sub_Destino != 'undefined'">
  					<assign name="AppState.varDestino" expr="Sub_Regularizacion8Subdialog.sub_Destino" /> 
  				</if>
				<if cond="Sub_Regularizacion8Subdialog.sub_Servicio != 'undefined'">
  					<assign name="AppState.varServicio" expr="Sub_Regularizacion8Subdialog.sub_Servicio" /> 
  				</if>
				<if cond="Sub_Regularizacion8Subdialog.var_log_navegacion != 'undefined'">
  					<assign name="AppState.var_log_navegacion" expr="Sub_Regularizacion8Subdialog.var_log_navegacion" /> 
  				</if>
				<goto next="#EsRegularizacion8" />
			</filled>
		</subdialog>
		
    	<catch event="error.badfetch">
    <goto next="#VIPaPreferente8" />
    	</catch>
    	<catch event="error">
    <goto next="#VIPaPreferente8" />
    	</catch>
	</form>

	<!-- This is the Branching block -->
	<form id="EsRegularizacion8">
		<block>
			<if cond="AppState.valorRegularizacion == 1">
				
				<!-- This is the OutLink -->
				<goto next="#LogNav" />
			</if>
			<goto next="#VIPaPreferente8" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="VIPaPreferente8">
		<block>
			<log gvp:level="1">
				<value expr="'[CAT_Tarjetas] VIPaPreferente1p'"/>
			</log>
    	</block>
		<block>
			
			<assign name="AppState.varAccion" expr="'transferir'" />
			<assign name="AppState.varDestino" expr="'interno'" />
			<assign name="AppState.varServicio" expr="'preferente'" />				
			<goto next="#Transfer8" />
		</block>
	</form>

	<!-- This is the Subdialog block -->
	<form id="Transfer8">

		<subdialog name="Transfer8Subdialog" fetchhint="prefetch"  src="../src-gen/Transfer.vxml">
    		<param name="varActionParentId" expr="''"/>
			<filled>
				<goto next="#LogNav" />
			</filled>
		</subdialog>
		
    	<catch event="error.badfetch">
    <goto next="#Logger0008" />
    	</catch>
    	<catch event="error">
    <goto next="#Logger0008" />
    	</catch>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Logger0008">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="'Error subflujo audios de transferencia VIP|LAST_EVENT_NAME:'+AppState.LAST_EVENT_NAME+'|LAST_EVENT_MSG:'+AppState.LAST_EVENT_MSG" />
    	<var name="LoggerNivel" expr="'Error'" />	
		<block>
			<data name="Logger0008Data" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof Logger0008Data.errorMsg == 'undefined'">
        		<assign name="AppState.Logger0008Result" expr="Logger0008Data" />
				<goto next="#LogNav" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Logger0008Data.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="MarcaFueraHorario">
		<block>
			
			<assign name="AppState.var_log_navegacion" expr="AppState.var_log_navegacion.concat(',FueraHorario')" />				
			<goto next="#AccionCortar1" />
		</block>
	</form>

	<!-- This is the Subdialog block -->
	<form id="Cod404_Horario">

		<subdialog name="Cod404_HorarioSubdialog" fetchhint="prefetch"  src="../src-gen/sub_ControlHorario.vxml">
    		<param name="varActionParentId" expr="''"/>
			<param name="varStr_HorarioFin" expr="AppState.varHorarioFin" />
			<param name="varStr_HorarioIni" expr="AppState.varHorarioIni" />
			<filled>
				<if cond="Cod404_HorarioSubdialog.varSalida != 'undefined'">
  					<assign name="AppState.varControlHorario" expr="Cod404_HorarioSubdialog.varSalida" /> 
  				</if>
				<goto next="#Cod404_CtrlHorario" />
			</filled>
		</subdialog>
		
	</form>

	<!-- This is the Branching block -->
	<form id="Cod404_CtrlHorario">
		<block>
			<if cond="AppState.varControlHorario == 'NOHABIL'">
				
				<!-- This is the OutLink -->
				<goto next="#MarcaFueraHorario" />
			</if>
			<goto next="#Logger036" />
		</block>
	</form>

	<!-- This is the Subdialog block -->
	<form id="Cod500_Horario">

		<subdialog name="Cod500_HorarioSubdialog" fetchhint="prefetch"  src="../src-gen/sub_ControlHorario.vxml">
    		<param name="varActionParentId" expr="''"/>
			<param name="varStr_HorarioFin" expr="AppState.varHorarioFin" />
			<param name="varStr_HorarioIni" expr="AppState.varHorarioIni" />
			<filled>
				<if cond="Cod500_HorarioSubdialog.varSalida != 'undefined'">
  					<assign name="AppState.varControlHorario" expr="Cod500_HorarioSubdialog.varSalida" /> 
  				</if>
				<goto next="#Cod500_CtrlHorario" />
			</filled>
		</subdialog>
		
	</form>

	<!-- This is the Branching block -->
	<form id="Cod500_CtrlHorario">
		<block>
			<if cond="AppState.varControlHorario == 'NOHABIL'">
				
				<!-- This is the OutLink -->
				<goto next="#MarcaFueraHorario" />
			</if>
			<goto next="#marcaNoWs" />
		</block>
	</form>

	<!-- This is the Branching block -->
	<form id="VIP_CtrlHorario">
		<block>
			<if cond="AppState.varControlHorario == 'NOHABIL'">
				
				<!-- This is the OutLink -->
				<goto next="#MarcaFueraHorario" />
			</if>
			<goto next="#Sub_Regularizacion2" />
		</block>
	</form>

	<!-- This is the Subdialog block -->
	<form id="VIP_Horario">

		<subdialog name="VIP_HorarioSubdialog" fetchhint="prefetch"  src="../src-gen/sub_ControlHorario.vxml">
    		<param name="varActionParentId" expr="''"/>
			<param name="varStr_HorarioFin" expr="AppState.varHorarioFin" />
			<param name="varStr_HorarioIni" expr="AppState.varHorarioIni" />
			<filled>
				<if cond="VIP_HorarioSubdialog.varSalida != 'undefined'">
  					<assign name="AppState.varControlHorario" expr="VIP_HorarioSubdialog.varSalida" /> 
  				</if>
				<goto next="#VIP_CtrlHorario" />
			</filled>
		</subdialog>
		
	</form>

	<!-- This is the Subdialog block -->
	<form id="REG_Horario">

		<subdialog name="REG_HorarioSubdialog" fetchhint="prefetch"  src="../src-gen/sub_ControlHorario.vxml">
    		<param name="varActionParentId" expr="''"/>
			<param name="varStr_HorarioFin" expr="AppState.varHorarioFin" />
			<param name="varStr_HorarioIni" expr="AppState.varHorarioIni" />
			<filled>
				<if cond="REG_HorarioSubdialog.varSalida != 'undefined'">
  					<assign name="AppState.varControlHorario" expr="REG_HorarioSubdialog.varSalida" /> 
  				</if>
				<goto next="#REG_CtrlHorario" />
			</filled>
		</subdialog>
		
	</form>

	<!-- This is the Branching block -->
	<form id="REG_CtrlHorario">
		<block>
			<if cond="AppState.varControlHorario == 'NOHABIL'">
				
				<!-- This is the OutLink -->
				<goto next="#MarcaFueraHorario" />
			</if>
			<goto next="#AudioTransferenciaREG" />
		</block>
	</form>

	<!-- This is the Subdialog block -->
	<form id="AudioTransferenciaREG">

		<subdialog name="AudioTransferenciaREGSubdialog" fetchhint="prefetch"  src="../src-gen/Transfer.vxml">
    		<param name="varActionParentId" expr="''"/>
			<filled>
				<goto next="#LogNav" />
			</filled>
		</subdialog>
		
	</form>

	<!-- This is the Assign block -->
	<form id="RUT_OK">
		<block>
			
			<assign name="AppState.varValidaRUT" expr="'OK'" />				
			<goto next="#JSP_RegistraAniRUT" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="RUT_NOOK">
		<block>
			
			<assign name="AppState.varValidaRUT" expr="'NOOK'" />				
			<goto next="#JSP_RegistraAniRUT" />
		</block>
	</form>

	<!-- This is the Branching block -->
	<form id="CamparaRetornaValidaANIRUT">
		<block>
			<if cond="AppState.varRetornaValidaANIRUT == 0">
				
				<!-- This is the OutLink -->
				<goto next="#Valida_Flujo_RUT_OK" />
			</if>
			<goto next="#marca2ExcedeANIRUT" />
		</block>
	</form>

	<!-- This is the Branching block -->
	<form id="Valida_Flujo_RUT_OK">
		<block>
			<if cond="AppState.varValidaRUT == 'OK'">
				
				<!-- This is the OutLink -->
				<goto next="#JSP_Ofertable2_Nuevo" />
			</if>
			<goto next="#contRut" />
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Logger_RegistraANIRUT_OK">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="AppState.var_HdrLog + 'Registrar ANI RUT OK | con Rut : ' +AppState.var_RUT + ' | Encriptado : ' + AppState.RUT_Encriptado" />
    	<var name="LoggerNivel" expr="'Info'" />	
		<block>
			<data name="Logger_RegistraANIRUT_OKData" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof Logger_RegistraANIRUT_OKData.errorMsg == 'undefined'">
        		<assign name="AppState.Logger_RegistraANIRUT_OKResult" expr="Logger_RegistraANIRUT_OKData" />
				<goto next="#Logger_PreRegistraANIRUT_OK" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Logger_RegistraANIRUT_OKData.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Logger_ValorRetornadoValidaANIRUT">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="AppState.var_HdrLog + 'Valida ANI_RUT retorna ' + AppState.varRetornaValidaANIRUT" />
    	<var name="LoggerNivel" expr="'Info'" />	
		<block>
			<data name="Logger_ValorRetornadoValidaANIRUTData" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof Logger_ValorRetornadoValidaANIRUTData.errorMsg == 'undefined'">
        		<assign name="AppState.Logger_ValorRetornadoValidaANIRUTResult" expr="Logger_ValorRetornadoValidaANIRUTData" />
				<goto next="#CamparaRetornaValidaANIRUT" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Logger_ValorRetornadoValidaANIRUTData.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the WebService block -->
	<form id="WS_mail_ANI_RUT">
		<block>
			<if cond="(AppState.COMPOSER_WSSTUBBING == '1') || (AppState.COMPOSER_WSSTUBBING == 1)" >
				<!-- Web Service is stubbed !! -->
				
				
				<goto next="#Logger_EnviaMailANIRUT_OK" />
			</if>
		
				
		<!-- Stubbing is Off - normal processing continues -->
		
		
		<script>
			var requestObj = new Object();
			requestObj['WebUrl'] 	='http://cm-fw1b/wsMail/Service.asmx';
			requestObj['MethodName']='SendMailFree';
			requestObj['Protocol']	='SOAP';
			requestObj['AuthenAccess']='Anonymous';
			requestObj['UserName']	='';
			requestObj['Password']	='';
			requestObj['enableProxy']=false;
			requestObj['proxyHost']='';
			requestObj['proxyPort']=80;
			requestObj['proxyUserName']='';
			requestObj['proxyPassword']='';
			requestObj['SOAPActionURI']		='http://tempuri.org/SendMailFree';
			requestObj['targetNameSpaceUri']='http://tempuri.org/';
			requestObj['KeyStorePass']='';
			requestObj['KeyStoreFilePath']	='';
			requestObj['PrivateKeyPass']	='';
			requestObj['PrivateKeyAlias']	='';
			requestObj['CertStoreName']		='';
			requestObj['CertAlias']			='';
			requestObj['SigAlgorithm']		='DSA';
			requestObj['NameSpaceMap']		='{"s":"http://www.w3.org/2001/XMLSchema","wsdl":"http://schemas.xmlsoap.org/wsdl/","mime":"http://schemas.xmlsoap.org/wsdl/mime/","tns":"http://tempuri.org/","http":"http://schemas.xmlsoap.org/wsdl/http/","tm":"http://microsoft.com/wsdl/mime/textMatching/","soap12":"http://schemas.xmlsoap.org/wsdl/soap12/","SendMail":"http://tempuri.org/","soap":"http://schemas.xmlsoap.org/wsdl/soap/","soapenc":"http://schemas.xmlsoap.org/soap/encoding/","SendMailFree":"http://tempuri.org/"}';
	        requestObj['EnableNSPrefix'] = false;
	        requestObj['PrefixForChildTags'] = false;
	        requestObj['CustomPrefix'] = '';
	        requestObj['AppStateString'] = JSON.stringify(AppState);
	        requestObj['VariableScope'] = 'AppState.';
	        requestObj['CustomSOAPEnvFileName']='';	
			var parameters = [{name:'tns:emlFrom', value: AppState.varSendMailFree_emlFrom},{name:'tns:emlTo', value: AppState.varSendMailFree_emlTo},{name:'tns:emlSubject', value: AppState.varSendMailFree_emlSubject},{name:'tns:emlBody', value: AppState.varSendMailFree_emlBody + DiaHora()},{name:'tns:srvIp', value: AppState.varSendMailFree_srvIp},{name:'tns:srvPort', value: AppState.varSendMailFree_srvPort},{name:'tns:srvSsl', value: AppState.varSendMailFree_srvSsl},{name:'tns:srvUser', value: AppState.varSendMailFree_srvUser},{name:'tns:srvPassw', value: AppState.varSendMailFree_srvPassw}];
    	
			requestObj['Timeout'] = '5';
			requestObj['Parameters'] = parameters;
		</script>
		<data name="WS_mail_ANI_RUTResponse" enctype="application/json" gvp:contentexpr="requestObj" method="post" src="../include/getWebServiceData.jsp" />
		
			
				
	   		<if cond="typeof WS_mail_ANI_RUTResponse.errorMsg == 'undefined'">
				<goto next="#Logger_EnviaMailANIRUT_OK" />
			<else/>
        		<throw event="error.com.genesyslab.composer.webservice.badFetch" messageexpr="WS_mail_ANI_RUTResponse.errorMsg" />
        	</if>	
			</block>
			
			<catch event="error.badfetch">
				<goto next="#Logger_EnviaMailANIRUT_Error" />
    		</catch>
			<catch event="error.com.genesyslab.composer.webservice.badFetch">
				<goto next="#Logger_EnviaMailANIRUT_Error" />
    		</catch>
		
		
	</form>	

	<!-- This is the Backend logic block -->
	<form id="Logger_EnviaMailANIRUT_Error">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="'Error al registrar ANI RUT|LAST_EVENT_NAME:'+AppState.LAST_EVENT_NAME+'|LAST_EVENT_MSG:'+AppState.LAST_EVENT_MSG" />
    	<var name="LoggerNivel" expr="'Error'" />	
		<block>
			<data name="Logger_EnviaMailANIRUT_ErrorData" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof Logger_EnviaMailANIRUT_ErrorData.errorMsg == 'undefined'">
        		<assign name="AppState.Logger_EnviaMailANIRUT_ErrorResult" expr="Logger_EnviaMailANIRUT_ErrorData" />
				<goto next="#RegistraListaNegraNew" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Logger_EnviaMailANIRUT_ErrorData.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Logger_EnviaMailANIRUT_OK">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="'Mail fue enviado con exito'" />
    	<var name="LoggerNivel" expr="'Info'" />	
		<block>
			<data name="Logger_EnviaMailANIRUT_OKData" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof Logger_EnviaMailANIRUT_OKData.errorMsg == 'undefined'">
        		<assign name="AppState.Logger_EnviaMailANIRUT_OKResult" expr="Logger_EnviaMailANIRUT_OKData" />
				<goto next="#RegistraListaNegraNew" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Logger_EnviaMailANIRUT_OKData.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Copy_1_Logger_RegistraANIRUT_OK">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="'Registrar Lista Negra OK'" />
    	<var name="LoggerNivel" expr="'Info'" />	
		<block>
			<data name="Copy_1_Logger_RegistraANIRUT_OKData" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof Copy_1_Logger_RegistraANIRUT_OKData.errorMsg == 'undefined'">
        		<assign name="AppState.Copy_1_Logger_RegistraANIRUT_OKResult" expr="Copy_1_Logger_RegistraANIRUT_OKData" />
				<goto next="#Copy_1_AccionCortar1" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Copy_1_Logger_RegistraANIRUT_OKData.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="marca2ExcedeANIRUT">
		<block>
			
			<assign name="AppState.var_log_navegacion" expr="AppState.var_log_navegacion.concat(',Excede ANI RUT')" />				
			<goto next="#WS_mail_ANI_RUT" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Copy_1_AccionCortar1">
		<block>
			
			<assign name="AppState.varAccion" expr="'cortar'" />
			<assign name="AppState.varDestino" expr="''" />
			<assign name="AppState.varServicio" expr="''" />				
			<goto next="#LogNav" />
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Copy_1_Logger013">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="AppState.var_HdrLog + 'LogCalculaDV: var_RUT[' + AppState.var_RUT + '] var_RUT_num[' + AppState.var_RUT_num + '] var_RUT_dv[' + AppState.var_RUT_dv +'] var_RUT_num_rev[' + AppState.var_RUT_num_rev + '] mod11[' + AppState.var_RUT_num_sum_mod11 +']'" />
    	<var name="LoggerNivel" expr="'Info'" />	
		<block>
			<data name="Copy_1_Logger013Data" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof Copy_1_Logger013Data.errorMsg == 'undefined'">
        		<assign name="AppState.Copy_1_Logger013Result" expr="Copy_1_Logger013Data" />
				<goto next="#ValidaRUT" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Copy_1_Logger013Data.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Subdialog block -->
	<form id="Cod500_Horario_Pref">

		<subdialog name="Cod500_Horario_PrefSubdialog" fetchhint="prefetch"  src="../src-gen/sub_ControlHorario.vxml">
    		<param name="varActionParentId" expr="''"/>
			<param name="varStr_HorarioFin" expr="AppState.varHorarioFin" />
			<param name="varStr_HorarioIni" expr="AppState.varHorarioIni" />
			<filled>
				<if cond="Cod500_Horario_PrefSubdialog.varSalida != 'undefined'">
  					<assign name="AppState.varControlHorario" expr="Cod500_Horario_PrefSubdialog.varSalida" /> 
  				</if>
				<goto next="#Cod500_CtrlHorario_Pref" />
			</filled>
		</subdialog>
		
	</form>

	<!-- This is the Branching block -->
	<form id="Cod500_CtrlHorario_Pref">
		<block>
			<if cond="AppState.varControlHorario == 'NOHABIL'">
				
				<!-- This is the OutLink -->
				<goto next="#MarcaFueraHorario" />
			</if>
			<goto next="#Sub_Regularizacion8" />
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="LogParametrosNew">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="AppState.var_HdrLog + 'Se reciben los siguientes parametros: var_att_IVR[' + AppState.var_att_IVR +'] var_att_MsjMasivo[' + AppState.var_att_MsjMasivo + '] var_att_AudioMsjM[' + AppState.var_att_AudioMsjM + '] var_att_Opc1[' + AppState.var_att_Opc1 + '] var_att_Opc2[' + AppState.var_att_Opc2 + '] var_att_Opc3[' + AppState.var_att_Opc3 + '] var_att_Opc4[' + AppState.var_att_Opc4 + '] var_att_Opc5[' + AppState.var_att_Opc5 + '] var_att_Opc0[' + AppState.var_att_Opc0 + '] var_att_HoraLun[' + AppState.var_att_HoraLun + '] var_att_HoraMart[' + AppState.var_att_HoraMart + '] var_att_HoraMierc[' + AppState.var_att_HoraMierc + '] var_att_HoraJuev[' + AppState.var_att_HoraJuev + '] var_att_HoraVier[' + AppState.var_att_HoraVier + '] var_att_HoraSaba[' + AppState.var_att_HoraSaba + '] var_att_HoraDom[' + AppState.var_att_HoraDom + '] var_att_HoraEspecial[' + AppState.var_att_HoraEspecial +'] var_att_CNoEnrolado[' + AppState.var_att_CNoEnrolado + '] var_att_CNoEnroladoC[' + AppState.var_att_CNoEnroladoC1 + ']'" />
    	<var name="LoggerNivel" expr="'Info'" />	
		<block>
			<data name="LogParametrosNewData" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof LogParametrosNewData.errorMsg == 'undefined'">
        		<assign name="AppState.LogParametrosNewResult" expr="LogParametrosNewData" />
				<goto next="#HorarioDia" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="LogParametrosNewData.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Branching block -->
	<form id="HorarioDia">
		<block>
			<if cond="AppState.var_DiaSemana == 1">
				
				<!-- Post Action -->
				<script>try{
				AppState.var_HorarioDia = AppState.var_att_HoraLun
				}
				catch(err){}
				
				</script>
				
				<!-- This is the OutLink -->
				<goto next="#LogDeterminacionDia" />
			</if>
			<if cond="AppState.var_DiaSemana == 2">
				
				<!-- Post Action -->
				<script>try{
				AppState.var_HorarioDia = AppState.var_att_HoraMart
				}
				catch(err){}
				
				</script>
				
				<!-- This is the OutLink -->
				<goto next="#LogDeterminacionDia" />
			</if>
			<if cond="AppState.var_DiaSemana == 3">
				
				<!-- Post Action -->
				<script>try{
				AppState.var_HorarioDia = AppState.var_att_HoraMierc
				}
				catch(err){}
				
				</script>
				
				<!-- This is the OutLink -->
				<goto next="#LogDeterminacionDia" />
			</if>
			<if cond="AppState.var_DiaSemana == 4">
				
				<!-- Post Action -->
				<script>try{
				AppState.var_HorarioDia = AppState.var_att_HoraJuev
				}
				catch(err){}
				
				</script>
				
				<!-- This is the OutLink -->
				<goto next="#LogDeterminacionDia" />
			</if>
			<if cond="AppState.var_DiaSemana == 5">
				
				<!-- Post Action -->
				<script>try{
				AppState.var_HorarioDia = AppState.var_att_HoraVier
				}
				catch(err){}
				
				</script>
				
				<!-- This is the OutLink -->
				<goto next="#LogDeterminacionDia" />
			</if>
			<if cond="AppState.var_DiaSemana == 6">
				
				<!-- Post Action -->
				<script>try{
				AppState.var_HorarioDia = AppState.var_att_HoraSaba
				}
				catch(err){}
				
				</script>
				
				<!-- This is the OutLink -->
				<goto next="#LogDeterminacionDia" />
			</if>
			<goto next="#Domingo" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Domingo">
		<block>
			
			<assign name="AppState.var_HorarioDia" expr="AppState.var_att_HoraDom" />				
			<goto next="#AjusteMinutos" />
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="LogHorarioParamNew">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="AppState.var_HdrLog + 'Se pisan los valores de horario a: varHorarioIni[' + AppState.varHorarioIni +'] varHorarioFin[' + AppState.varHorarioFin + ']'" />
    	<var name="LoggerNivel" expr="'Info'" />	
		<block>
			<data name="LogHorarioParamNewData" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof LogHorarioParamNewData.errorMsg == 'undefined'">
        		<assign name="AppState.LogHorarioParamNewResult" expr="LogHorarioParamNewData" />
				<goto next="#Saludo" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="LogHorarioParamNewData.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="LogDeterminacionDia">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="AppState.var_HdrLog + 'Hoy es dia[' +  AppState.var_DiaSemana + '] y le corresponde Horario[' + AppState.var_HorarioDia + ']'" />
    	<var name="LoggerNivel" expr="'Info'" />	
		<block>
			<data name="LogDeterminacionDiaData" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof LogDeterminacionDiaData.errorMsg == 'undefined'">
        		<assign name="AppState.LogDeterminacionDiaResult" expr="LogDeterminacionDiaData" />
				<goto next="#AjusteMinutos" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="LogDeterminacionDiaData.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Branching block -->
	<form id="att_MsjMasivo">
		<block>
			<if cond="AppState.var_att_MsjMasivo == 1">
				
				<!-- This is the OutLink -->
				<goto next="#MsjMasivo" />
			</if>
			<goto next="#LogParametrosNew" />
		</block>
	</form>

	<!-- This is the Prompt block -->
	<form id="MsjMasivo">
        
    	<block name="MsjMasivoP0">
  			<prompt bargein="true"  gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="getAudioURI('http://noc1:8082/CAT_MsjMasivoAudios/'+AppState.var_att_AudioMsjM)"></audio>
    		</prompt>
		</block>
    	<block>
    		<goto next="#LogParametrosNew" />
    	</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="MarcaNav_JSP">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />	
		<block>
			<data name="MarcaNav_JSPData" src="../src/SP_MarcaNav.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString" />
        	<if cond="typeof MarcaNav_JSPData.errorMsg == 'undefined'">
        		<assign name="AppState.MarcaNav_JSPResult" expr="MarcaNav_JSPData" />
				<goto next="#var_transferir" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="MarcaNav_JSPData.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="ListaNegraNew">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />	
		<block>
			<data name="ListaNegraNewData" src="../src/SP_JSP_ListaNegra.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString" />
        	<if cond="typeof ListaNegraNewData.errorMsg == 'undefined'">
        		<assign name="AppState.ListaNegraNewResult" expr="ListaNegraNewData" />
            	<if cond="typeof AppState.ListaNegraNewResult.returnSP != 'undefined'">
            		<assign name="AppState.var_StatusListaNegraDB" expr="AppState.ListaNegraNewResult.returnSP" />
            	</if>
				<goto next="#LoggerListaNegra" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="ListaNegraNewData.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="LoggerListaNegra">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="AppState.var_HdrLog + 'Se recibe var_StatusListaNegraDB[' + AppState.var_StatusListaNegraDB +']'" />
    	<var name="LoggerNivel" expr="'Info'" />	
		<block>
			<data name="LoggerListaNegraData" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof LoggerListaNegraData.errorMsg == 'undefined'">
        		<assign name="AppState.LoggerListaNegraResult" expr="LoggerListaNegraData" />
				<goto next="#ListaNegra" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="LoggerListaNegraData.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="JSP_RegistraAniRUT">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />	
		<block>
			<data name="JSP_RegistraAniRUTData" src="../src/SP_JSP_RegistraAniRUT.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString" />
        	<if cond="typeof JSP_RegistraAniRUTData.errorMsg == 'undefined'">
        		<assign name="AppState.JSP_RegistraAniRUTResult" expr="JSP_RegistraAniRUTData" />
            	<if cond="typeof AppState.JSP_RegistraAniRUTResult.returnSP != 'undefined'">
            		<assign name="AppState.varRetornaRegistroANIRUT" expr="AppState.JSP_RegistraAniRUTResult.returnSP" />
            	</if>
				<goto next="#BKND_EncriptaRUT" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="JSP_RegistraAniRUTData.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="JSP_ValidaAniRUT">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />	
		<block>
			<data name="JSP_ValidaAniRUTData" src="../src/SP_JSP_ConsultaExcedeNumeroLlamadas.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString" />
        	<if cond="typeof JSP_ValidaAniRUTData.errorMsg == 'undefined'">
        		<assign name="AppState.JSP_ValidaAniRUTResult" expr="JSP_ValidaAniRUTData" />
            	<if cond="typeof AppState.JSP_ValidaAniRUTResult.returnSP != 'undefined'">
            		<assign name="AppState.varRetornaValidaANIRUT" expr="AppState.JSP_ValidaAniRUTResult.returnSP" />
            	</if>
				<goto next="#Logger_ValorRetornadoValidaANIRUT" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="JSP_ValidaAniRUTData.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Logger_PreRegistraANIRUT_OK">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="AppState.var_HdrLog + 'Parametros de entrada Valida ANIRUT, ANI[' + AppState.ANI + '] var_RUT[' + AppState.var_RUT + '] varNumeroHorasMoviles[' + AppState.varNumeroHorasMoviles + '] varNumeroLlamadasANIDesconectar[' + AppState.varNumeroLlamadasANIDesconectar + '] varNumeroLlamadasRUTDesconectar[' + AppState.varNumeroLlamadasRUTDesconectar + ']'" />
    	<var name="LoggerNivel" expr="'Info'" />	
		<block>
			<data name="Logger_PreRegistraANIRUT_OKData" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof Logger_PreRegistraANIRUT_OKData.errorMsg == 'undefined'">
        		<assign name="AppState.Logger_PreRegistraANIRUT_OKResult" expr="Logger_PreRegistraANIRUT_OKData" />
				<goto next="#JSP_ValidaAniRUT" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Logger_PreRegistraANIRUT_OKData.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="RegistraListaNegraNew">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />	
		<block>
			<data name="RegistraListaNegraNewData" src="../src/SP_JSP_RegistraEnListaNegra.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString" />
        	<if cond="typeof RegistraListaNegraNewData.errorMsg == 'undefined'">
        		<assign name="AppState.RegistraListaNegraNewResult" expr="RegistraListaNegraNewData" />
            	<if cond="typeof AppState.RegistraListaNegraNewResult.returnSP != 'undefined'">
            		<assign name="AppState.varRetornaListaNegra" expr="AppState.RegistraListaNegraNewResult.returnSP" />
            	</if>
				<goto next="#Copy_1_Logger_RegistraANIRUT_OK" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="RegistraListaNegraNewData.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="JSP_ConsultaVip">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />	
		<block>
			<data name="JSP_ConsultaVipData" src="../src/SP_JSP_ConsultaVip.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString" />
        	<if cond="typeof JSP_ConsultaVipData.errorMsg == 'undefined'">
        		<assign name="AppState.JSP_ConsultaVipResult" expr="JSP_ConsultaVipData" />
            	<if cond="typeof AppState.JSP_ConsultaVipResult.returnSP != 'undefined'">
            		<assign name="AppState.var_StatusVipDB" expr="AppState.JSP_ConsultaVipResult.returnSP" />
            	</if>
            	<if cond="typeof AppState.JSP_ConsultaVipResult.varFonoVipDB != 'undefined'">
            		<assign name="AppState.var_FonoVipDB" expr="AppState.JSP_ConsultaVipResult.varFonoVipDB" />
            	</if>
            	<if cond="typeof AppState.JSP_ConsultaVipResult.varNombreVipDB != 'undefined'">
            		<assign name="AppState.var_NombreVipDB" expr="AppState.JSP_ConsultaVipResult.varNombreVipDB" />
            	</if>
				<goto next="#Logger_ConsultaVip" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="JSP_ConsultaVipData.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="JSP_ConsultaPreferente">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />	
		<block>
			<data name="JSP_ConsultaPreferenteData" src="../src/SP_JSP_ConsultaPreferente.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString" />
        	<if cond="typeof JSP_ConsultaPreferenteData.errorMsg == 'undefined'">
        		<assign name="AppState.JSP_ConsultaPreferenteResult" expr="JSP_ConsultaPreferenteData" />
            	<if cond="typeof AppState.JSP_ConsultaPreferenteResult.returnSP != 'undefined'">
            		<assign name="AppState.var_StatusPreferenteDB" expr="AppState.JSP_ConsultaPreferenteResult.returnSP" />
            	</if>
				<goto next="#Logger_Preferente" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="JSP_ConsultaPreferenteData.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Logger_ConsultaVip">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="AppState.var_HdrLog + 'Retorna de consulta VIP: ' + AppState.var_StatusVipDB + ' Con Nombre: ' + AppState.var_NombreVipDB + ' y ANI: ' + AppState.var_FonoVipDB" />
    	<var name="LoggerNivel" expr="'Info'" />	
		<block>
			<data name="Logger_ConsultaVipData" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof Logger_ConsultaVipData.errorMsg == 'undefined'">
        		<assign name="AppState.Logger_ConsultaVipResult" expr="Logger_ConsultaVipData" />
				<goto next="#ClienteVIP" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Logger_ConsultaVipData.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Logger_Ofertable">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="AppState.var_HdrLog + ' var_Status_OfertableDB_:' + AppState.var_Status_OfertableDB + ', var_Descripcion_OfertableDB_:' + AppState.varOfertaDB + ', var_Descripcion_PesoDB_:' + AppState.varPesoDB" />
    	<var name="LoggerNivel" expr="'Info'" />	
		<block>
			<data name="Logger_OfertableData" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof Logger_OfertableData.errorMsg == 'undefined'">
        		<assign name="AppState.Logger_OfertableResult" expr="Logger_OfertableData" />
				<goto next="#Branching2" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Logger_OfertableData.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Copy_1_Logger_Preferente">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="AppState.var_HdrLog + 'Tipo cliente preferente|var_StatusPreferenteDB:' + AppState.var_StatusPreferenteDB" />
    	<var name="LoggerNivel" expr="'Info'" />	
		<block>
			<data name="Copy_1_Logger_PreferenteData" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof Copy_1_Logger_PreferenteData.errorMsg == 'undefined'">
        		<assign name="AppState.Copy_1_Logger_PreferenteResult" expr="Copy_1_Logger_PreferenteData" />
				<goto next="#EsPreferente2" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Copy_1_Logger_PreferenteData.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Copy_1_JSP_ConsultaPreferente">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />	
		<block>
			<data name="Copy_1_JSP_ConsultaPreferenteData" src="../src/SP_JSP_ConsultaPreferente.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString" />
        	<if cond="typeof Copy_1_JSP_ConsultaPreferenteData.errorMsg == 'undefined'">
        		<assign name="AppState.Copy_1_JSP_ConsultaPreferenteResult" expr="Copy_1_JSP_ConsultaPreferenteData" />
            	<if cond="typeof AppState.Copy_1_JSP_ConsultaPreferenteResult.returnSP != 'undefined'">
            		<assign name="AppState.var_StatusPreferenteDB" expr="AppState.Copy_1_JSP_ConsultaPreferenteResult.returnSP" />
            	</if>
				<goto next="#Copy_1_Logger_Preferente" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Copy_1_JSP_ConsultaPreferenteData.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Copy_1_JSP_ConsultaVip">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />	
		<block>
			<data name="Copy_1_JSP_ConsultaVipData" src="../src/SP_JSP_ConsultaVip.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString" />
        	<if cond="typeof Copy_1_JSP_ConsultaVipData.errorMsg == 'undefined'">
        		<assign name="AppState.Copy_1_JSP_ConsultaVipResult" expr="Copy_1_JSP_ConsultaVipData" />
            	<if cond="typeof AppState.Copy_1_JSP_ConsultaVipResult.returnSP != 'undefined'">
            		<assign name="AppState.var_StatusVipDB" expr="AppState.Copy_1_JSP_ConsultaVipResult.returnSP" />
            	</if>
				<goto next="#Copy_1_Logger_ConsultaVip" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Copy_1_JSP_ConsultaVipData.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Copy_1_Logger_ConsultaVip">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="AppState.var_HdrLog + 'Retorna de consulta VIP ' + AppState.var_StatusVipDB" />
    	<var name="LoggerNivel" expr="'Info'" />	
		<block>
			<data name="Copy_1_Logger_ConsultaVipData" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof Copy_1_Logger_ConsultaVipData.errorMsg == 'undefined'">
        		<assign name="AppState.Copy_1_Logger_ConsultaVipResult" expr="Copy_1_Logger_ConsultaVipData" />
				<goto next="#ClienteVIP2" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Copy_1_Logger_ConsultaVipData.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Subdialog block -->
	<form id="RevisPrevioRut">

		<subdialog name="RevisPrevioRutSubdialog" fetchhint="prefetch"  src="../src-gen/RevisaPrevioRut.vxml">
    		<param name="varActionParentId" expr="''"/>
			<param name="var_RUT" expr="AppState.var_RUT" />
			<filled>
				<if cond="RevisPrevioRutSubdialog.var_status_RUT != 'undefined'">
  					<assign name="AppState.var_status_previo_rut" expr="RevisPrevioRutSubdialog.var_status_RUT" /> 
  				</if>
				<goto next="#LogValidacionesPreviasRutX" />
			</filled>
		</subdialog>
		
	</form>

	<!-- This is the Backend logic block -->
	<form id="LogValidacionesPreviasRutX">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="AppState.var_HdrLog + 'Rut NOK por previas, status[' + AppState.var_status_previo_rut + '], contador[' + AppState.var_cont_previo_rut + ']'" />
    	<var name="LoggerNivel" expr="'Info'" />	
		<block>
			<data name="LogValidacionesPreviasRutXData" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof LogValidacionesPreviasRutXData.errorMsg == 'undefined'">
        		<assign name="AppState.LogValidacionesPreviasRutXResult" expr="LogValidacionesPreviasRutXData" />
				<goto next="#Branching3" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="LogValidacionesPreviasRutXData.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Branching block -->
	<form id="Branching3">
		<block>
			<if cond="AppState.var_status_previo_rut == 1">
				
				<!-- This is the OutLink -->
				<goto next="#CalculaDV" />
			</if>
			<goto next="#Copy_1_Assign2" />
		</block>
	</form>

	<!-- This is the Branching block -->
	<form id="Branching4">
		<block>
			<if cond="AppState.var_cont_previo_rut &gt; 2">
				
				<!-- This is the OutLink -->
				<goto next="#marcaRutnok" />
			</if>
			<goto next="#RutInvalido" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Copy_1_Assign2">
		<block>
			
			<assign name="AppState.var_cont_previo_rut" expr="AppState.var_cont_previo_rut + 1" />				
			<goto next="#Branching4" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="marcaRutnok">
		<block>
			
			<assign name="AppState.var_log_navegacion" expr="AppState.var_log_navegacion.concat(',RevisionPreviaRut_NOK')" />				
			<goto next="#cortexRut" />
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="LogValidacionesPreviasRut">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="AppState.var_HdrLog + 'Rut incorrecto por validaciones previas'" />
    	<var name="LoggerNivel" expr="'Info'" />	
		<block>
			<data name="LogValidacionesPreviasRutData" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof LogValidacionesPreviasRutData.errorMsg == 'undefined'">
        		<assign name="AppState.LogValidacionesPreviasRutResult" expr="LogValidacionesPreviasRutData" />
				<goto next="#Prompt1" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="LogValidacionesPreviasRutData.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="cortexRut">
		<block>
			<log gvp:level="1">
				<value expr="AppState.var_HdrLog + ' Corta por ListaNegra'"/>
			</log>
    	</block>
		<block>
			
			<assign name="AppState.varAccion" expr="'cortar'" />
			<assign name="AppState.varDestino" expr="'NA'" />
			<assign name="AppState.varServicio" expr="'NA'" />				
			<goto next="#LogValidacionesPreviasRut" />
		</block>
	</form>

	<!-- This is the Prompt block -->
	<form id="Prompt1">
        
    	<block name="Prompt1P0">
  			<prompt bargein="true"  gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'AudiosTarjetas/Usted ha superado el número de ingresos.wav'"></audio>
    		</prompt>
		</block>
    	<block>
    		<goto next="#LogNav" />
    	</block>
	</form>

	<!-- This is the Assign block -->
	<form id="AjusteMinutos">
		<block>
			
			<assign name="AppState.var_auxMinIni" expr="AppState.var_HorarioDia.substr(3, 2)" />
			<assign name="AppState.var_auxMinTer" expr="AppState.var_HorarioDia.substr(9, 2)" />				
			<goto next="#Branching1" />
		</block>
	</form>

	<!-- This is the Branching block -->
	<form id="Branching1">
		<block>
			<if cond="AppState.var_auxMinIni &gt;= 0 &amp;&amp; AppState.var_auxMinIni &lt;= 15">
				
				<!-- Post Action -->
				<script>try{
				AppState.varHorarioIni = AppState.var_HorarioDia.substr(0, 2) + '00'
				}
				catch(err){}
				
				</script>
				
				<!-- This is the OutLink -->
				<goto next="#Copy_1_Branching1" />
			</if>
			<if cond="AppState.var_auxMinIni &gt;= 16 &amp;&amp; AppState.var_auxMinIni &lt;= 30">
				
				<!-- Post Action -->
				<script>try{
				AppState.varHorarioIni = AppState.var_HorarioDia.substr(0, 2) + '15'
				}
				catch(err){}
				
				</script>
				
				<!-- This is the OutLink -->
				<goto next="#Copy_1_Branching1" />
			</if>
			<if cond="AppState.var_auxMinIni &gt;= 31 &amp;&amp; AppState.var_auxMinIni &lt;= 45">
				
				<!-- Post Action -->
				<script>try{
				AppState.varHorarioIni = AppState.var_HorarioDia.substr(0, 2) + '30'
				}
				catch(err){}
				
				</script>
				
				<!-- This is the OutLink -->
				<goto next="#Copy_1_Branching1" />
			</if>
			<if cond="AppState.var_auxMinIni &gt;= 46 &amp;&amp; AppState.var_auxMinIni &lt;= 59">
				
				<!-- Post Action -->
				<script>try{
				AppState.varHorarioIni = AppState.var_HorarioDia.substr(0, 2) + '45'
				}
				catch(err){}
				
				</script>
				
				<!-- This is the OutLink -->
				<goto next="#Copy_1_Branching1" />
			</if>
			<goto next="#Copy_1_Branching1" />
		</block>
	</form>

	<!-- This is the Branching block -->
	<form id="Copy_1_Branching1">
		<block>
			<if cond="AppState.var_auxMinTer &gt;= 0 &amp;&amp; AppState.var_auxMinTer &lt;=15">
				
				<!-- Post Action -->
				<script>try{
				AppState.varHorarioFin = AppState.var_HorarioDia.substr(6, 2) + '00'
				}
				catch(err){}
				
				</script>
				
				<!-- This is the OutLink -->
				<goto next="#pisaHorarioParam" />
			</if>
			<if cond="AppState.var_auxMinTer &gt;= 16 &amp;&amp; AppState.var_auxMinTer &lt;= 30">
				
				<!-- Post Action -->
				<script>try{
				AppState.varHorarioFin = AppState.var_HorarioDia.substr(6, 2) + '15'
				}
				catch(err){}
				
				</script>
				
				<!-- This is the OutLink -->
				<goto next="#pisaHorarioParam" />
			</if>
			<if cond="AppState.var_auxMinTer &gt;= 31 &amp;&amp; AppState.var_auxMinTer &lt;= 45">
				
				<!-- Post Action -->
				<script>try{
				AppState.varHorarioFin = AppState.var_HorarioDia.substr(6, 2) + '30'
				}
				catch(err){}
				
				</script>
				
				<!-- This is the OutLink -->
				<goto next="#pisaHorarioParam" />
			</if>
			<if cond="AppState.var_auxMinTer &gt;= 46 &amp;&amp; AppState.var_auxMinTer &lt;= 59">
				
				<!-- Post Action -->
				<script>try{
				AppState.varHorarioFin = AppState.var_HorarioDia.substr(6, 2) + '45'
				}
				catch(err){}
				
				</script>
				
				<!-- This is the OutLink -->
				<goto next="#pisaHorarioParam" />
			</if>
			<goto next="#pisaHorarioParam" />
		</block>
	</form>

	<!-- This is the Branching block -->
	<form id="BRCH_ValidaOpcion">
		<block>
			<if cond="AppState.varOpcion == 'Reordenar Deuda'">
				
				<!-- Post Action -->
				<script>try{
				AppState.var_att_CATContextoOpc1 = AppState.var_att_CATContextoOpc4
				}
				catch(err){}
				
				</script>
				
				<!-- This is the OutLink -->
				<goto next="#Logger027" />
			</if>
			<if cond="AppState.varOpcion == 'Avance en Efectivo'">
				
				<!-- Post Action -->
				<script>try{
				AppState.var_att_CATContextoOpc1 = AppState.var_att_CATContextoOpc5
				}
				catch(err){}
				
				</script>
				
				<!-- This is the OutLink -->
				<goto next="#Logger027" />
			</if>
			<if cond="AppState.varOpcion == 'Super Avance en Efectivo'">
				
				<!-- Post Action -->
				<script>try{
				AppState.var_att_CATContextoOpc1 = AppState.var_att_CATContextoOpc6
				}
				catch(err){}
				
				</script>
				
				<!-- This is the OutLink -->
				<goto next="#Logger027" />
			</if>
			<goto next="#Logger027" />
		</block>
	</form>

	<!-- This is the Branching block -->
	<form id="Valida_CatTipoCliente">
		<block>
			<if cond="AppState.var_att_CATTipoCliente == 1 || AppState.var_att_CATTipoCliente == 3">
				
				<!-- This is the OutLink -->
				<goto next="#marca14b" />
			</if>
			<goto next="#DeshOpc" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="DeshOpc">
		<block>
			
			<assign name="AppState.var_att_Opc2" expr="0" />
			<assign name="AppState.var_att_Opc5" expr="0" />
			<assign name="AppState.var_att_Opc6" expr="0" />				
			<goto next="#marca14b" />
		</block>
	</form>

	<!-- This is the Branching block -->
	<form id="Valida_CatTipoCliente2">
		<block>
			<if cond="AppState.var_att_CATTipoCliente == 2 || AppState.var_att_CATTipoCliente == 3">
				
				<!-- This is the OutLink -->
				<goto next="#DeshOpcP" />
			</if>
			<goto next="#Logger022" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="DeshOpcP">
		<block>
			
			<assign name="AppState.var_att_Opc0" expr="0" />
			<assign name="AppState.var_att_Opc1" expr="0" />
			<assign name="AppState.var_att_Opc4" expr="0" />
			<assign name="AppState.var_att_Opc3" expr="0" />				
			<goto next="#marca14b" />
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Copy_2_Logger033">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="'*****Antes de Regularizacion*****'" />
    	<var name="LoggerNivel" expr="'Info'" />	
		<block>
			<data name="Copy_2_Logger033Data" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof Copy_2_Logger033Data.errorMsg == 'undefined'">
        		<assign name="AppState.Copy_2_Logger033Result" expr="Copy_2_Logger033Data" />
				<goto next="#Sub_Regularizacion4" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Copy_2_Logger033Data.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="ConsultaMora">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="CallID" expr="AppState.CallUUID" />
    	<var name="Token" expr="AppState.var_GetToken_Token" />
    	<var name="URL" expr="AppState.var_datos_cliente_mora_url" />
    	<var name="sesion_id" expr="AppState.var_crear_sesion_id_sesion" />
    	<var name="idCliente" expr="AppState.id_Cliente" />
    	<var name="ultimosDigitos" expr="AppState.ultimosDigitos" />	
		<block>
			<data name="ConsultaMoraData" src="../src/ConsultaActivosCert.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString CallID Token URL sesion_id idCliente ultimosDigitos" />
        	<if cond="typeof ConsultaMoraData.errorMsg == 'undefined'">
        		<assign name="AppState.ConsultaMoraResult" expr="ConsultaMoraData" />
            	<if cond="typeof AppState.ConsultaMoraResult.HttpCode != 'undefined'">
            		<assign name="AppState.var_datos_cliente_mora_http" expr="AppState.ConsultaMoraResult.HttpCode" />
            	</if>
            	<if cond="typeof AppState.ConsultaMoraResult.idTarjeta != 'undefined'">
            		<assign name="AppState.var_datos_cliente_numero_tarjeta" expr="AppState.ConsultaMoraResult.idTarjeta" />
            	</if>
            	<if cond="typeof AppState.ConsultaMoraResult.mora != 'undefined'">
            		<assign name="AppState.var_datos_cliente_mora" expr="AppState.ConsultaMoraResult.mora" />
            	</if>
            	<if cond="typeof AppState.ConsultaMoraResult.vigencia != 'undefined'">
            		<assign name="AppState.var_f_Vigencia" expr="AppState.ConsultaMoraResult.vigencia" />
            	</if>
            	<if cond="typeof AppState.ConsultaMoraResult.saldoPendiente != 'undefined'">
            		<assign name="AppState.var_f_saldoPendiente" expr="AppState.ConsultaMoraResult.saldoPendiente" />
            	</if>
				<goto next="#ConsultaActivosCert_HttpCode200" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="ConsultaMoraData.errorMsg" />
        	</if>
		</block>
		
		<catch event="error.badfetch">
			<goto next="#Logger043Mora" />
    	</catch>
		<catch event="error.com.genesyslab.composer.servererror">
			<goto next="#Logger043Mora" />
    	</catch>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Logger043Mora">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="'Error al Obtener Mora y Nro Tarjeta |LAST_EVENT_NAME:'+AppState.LAST_EVENT_NAME+'|LAST_EVENT_MSG:'+AppState.LAST_EVENT_MSG" />
    	<var name="LoggerNivel" expr="'Error'" />	
		<block>
			<data name="Logger043MoraData" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof Logger043MoraData.errorMsg == 'undefined'">
        		<assign name="AppState.Logger043MoraResult" expr="Logger043MoraData" />
				<goto next="#IntentosConsultaActivos" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Logger043MoraData.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Logger044Mora">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="'Obtiene Mora|json result - Mora: ' + AppState.var_datos_cliente_mora +  ', Con Vigencia : '+ AppState.var_f_Vigencia + ', y Saldo_Pendiente: ' + AppState.var_f_saldoPendiente + ', http code: ' + AppState.var_datos_cliente_mora_http" />
    	<var name="LoggerNivel" expr="'Info'" />	
		<block>
			<data name="Logger044MoraData" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof Logger044MoraData.errorMsg == 'undefined'">
        		<assign name="AppState.Logger044MoraResult" expr="Logger044MoraData" />
				<goto next="#BRCH_Mora" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Logger044MoraData.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="SinMora">
		<block>
			
			<assign name="AppState.var_transferir_mora" expr="'Cliente sin Mora.'" />				
			<goto next="#VieneDeTarjetas3" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="ConMora">
		<block>
			
			<assign name="AppState.var_transferir_mora" expr="'Cliente con Mora | ' + AppState.var_datos_cliente_mora" />				
			<goto next="#VieneDeTarjetas3" />
		</block>
	</form>

	<!-- This is the Branching block -->
	<form id="BRCH_Mora">
		<block>
			<if cond="AppState.var_datos_cliente_mora == 0">
				
				<!-- This is the OutLink -->
				<goto next="#SinMora" />
			</if>
			<goto next="#ConMora" />
		</block>
	</form>

	<!-- This is the Branching block -->
	<form id="ConsultaActivosCert_HttpCode200">
		<block>
			<if cond="AppState.var_datos_cliente_mora_http != 200 || AppState.var_ConsultaActivos_Tarjeta == -1">
				
				<!-- This is the OutLink -->
				<goto next="#IntentosConsultaActivos" />
			</if>
			<goto next="#BRCH_validaTarjeta" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="IntentosConsultaActivos">
		<block>
			
			<assign name="AppState.intentos" expr="AppState.intentos + 1" />				
			<goto next="#ValidaIntentoConsultaActivos" />
		</block>
	</form>

	<!-- This is the Branching block -->
	<form id="ValidaIntentoConsultaActivos">
		<block>
			<if cond="AppState.intentos &lt; 3">
				
				<!-- This is the OutLink -->
				<goto next="#ConsultaMora" />
			</if>
			<goto next="#GetActivos_0" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="GetActivos_0">
		<block>
			
			<assign name="AppState.var_getActivos" expr="0" />
			<assign name="AppState.var_log_navegacion" expr="AppState.var_log_navegacion.concat(',GetActivoError')" />				
			<goto next="#VieneDeTarjetas2" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="GetActivos_1">
		<block>
			
			<assign name="AppState.var_getActivos" expr="1" />
			<assign name="AppState.var_log_navegacion" expr="AppState.var_log_navegacion.concat(',GetActivoOK')" />				
			<goto next="#Logger044Mora" />
		</block>
	</form>

	<!-- This is the Subdialog block -->
	<form id="ValidaClave">

		<subdialog name="ValidaClaveSubdialog" fetchhint="prefetch"  src="../src-gen/SBC_ValidaClave.vxml">
    		<param name="varActionParentId" expr="''"/>
			<param name="getActivos" expr="AppState.var_getActivos" />
			<param name="idCliente" expr="AppState.id_Cliente" />
			<param name="idTarjeta" expr="AppState.var_datos_cliente_numero_tarjeta" />
			<param name="numeroTarjeta" expr="AppState.var_datos_cliente_numero_tarjeta" />
			<param name="var_GetToken_Token" expr="AppState.var_GetToken_Token" />
			<param name="var_HdrLog" expr="AppState.var_HdrLog" />
			<param name="var_RUT" expr="AppState.var_RUT" />
			<param name="var_TokenValidaTarjeta_url" expr="AppState.var_TokenValidaTarjeta_url" />
			<param name="var_crear_sesion_dhr2" expr="AppState.var_crear_sesion_dhr2" />
			<param name="var_crear_sesion_id_sesion" expr="AppState.var_crear_sesion_id_sesion" />
			<param name="var_url_actualiza_sesion" expr="AppState.var_url_actualiza_sesion" />
			<param name="var_validaClave_url" expr="AppState.var_validaClave_url" />
			<param name="var_log_navegacion" expr="AppState.var_log_navegacion" />
			<filled>
				<if cond="ValidaClaveSubdialog.EstadoError != 'undefined'">
  					<assign name="AppState.EstadoError" expr="ValidaClaveSubdialog.EstadoError" /> 
  				</if>
				<if cond="ValidaClaveSubdialog.contexoClave != 'undefined'">
  					<assign name="AppState.contextoClave" expr="ValidaClaveSubdialog.contexoClave" /> 
  				</if>
				<if cond="ValidaClaveSubdialog.var_Decision != 'undefined'">
  					<assign name="AppState.var_Decision" expr="ValidaClaveSubdialog.var_Decision" /> 
  				</if>
				<if cond="ValidaClaveSubdialog.var_MsjIntentos != 'undefined'">
  					<assign name="AppState.var_MsjIntentos" expr="ValidaClaveSubdialog.var_MsjIntentos" /> 
  				</if>
				<if cond="ValidaClaveSubdialog.var_log_navegacion != 'undefined'">
  					<assign name="AppState.var_log_navegacion" expr="ValidaClaveSubdialog.var_log_navegacion" /> 
  				</if>
				<if cond="ValidaClaveSubdialog.var_validaClave_http != 'undefined'">
  					<assign name="AppState.var_validaClave_http" expr="ValidaClaveSubdialog.var_validaClave_http" /> 
  				</if>
				<goto next="#BRCH_ValidaEstadoValidaClave" />
			</filled>
		</subdialog>
		
	</form>

	<!-- This is the Subdialog block -->
	<form id="AlmacenaValidaClave">

		<subdialog name="AlmacenaValidaClaveSubdialog" fetchhint="prefetch"  src="../src-gen/SBC_AlmacenaValidaClave.vxml">
    		<param name="varActionParentId" expr="''"/>
			<param name="var_APLICACION" expr="AppState.var_APLICACION" />
			<param name="var_Decision" expr="AppState.var_Decision" />
			<param name="var_HdrLog" expr="AppState.var_HdrLog" />
			<param name="var_Mensaje" expr="AppState.contextoClave" />
			<param name="var_MsjIntentos" expr="AppState.var_MsjIntentos" />
			<param name="var_Nombre" expr="AppState.varNombre" />
			<param name="var_RUT" expr="AppState.var_RUT" />
			<param name="var_TipoCliente" expr="AppState.var_TipoCliente" />
			<param name="var_TipoTarjeta" expr="AppState.var_datos_cliente_tipo_tarjeta" />
			<param name="var_log_navegacion" expr="AppState.var_log_navegacion" />
			<filled>
				<if cond="AlmacenaValidaClaveSubdialog.EstadoError != 'undefined'">
  					<assign name="AppState.EstadoError" expr="AlmacenaValidaClaveSubdialog.EstadoError" /> 
  				</if>
				<goto next="#BRCH_ValidaEstadoAlmacenaClave" />
			</filled>
		</subdialog>
		
	</form>

	<!-- This is the Branching block -->
	<form id="BRCH_ValidaEstadoValidaClave">
		<block>
			<if cond="AppState.EstadoError == 1">
				
				<!-- This is the OutLink -->
				<goto next="#LogNav" />
			</if>
			<goto next="#Copy_2_Logger048" />
		</block>
	</form>

	<!-- This is the Branching block -->
	<form id="BRCH_ValidaEstadoAlmacenaClave">
		<block>
			<if cond="AppState.EstadoError == 1">
				
				<!-- This is the OutLink -->
				<goto next="#LogNav" />
			</if>
			<goto next="#BRCH_EsClaveCorrecta" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="HoraInicial">
		<block>
			
			<assign name="AppState.var_log_hora_ini" expr="DiaHora()" />
			<assign name="AppState.var_dnis" expr="getSIPHeaderValue('vardst')" />				
			<goto next="#ListaNegraNew" />
		</block>
	</form>

	<!-- This is the Branching block -->
	<form id="Branching2">
		<block>
			<if cond="AppState.varOfertaDB == 'AE'">
				
				<!-- Post Action -->
				<script>try{
				AppState.var_log_navegacion = AppState.var_log_navegacion.concat(',OfertableAE')
				}
				catch(err){}
				
				</script>
				
				<!-- This is the OutLink -->
				<goto next="#NoPREF_Clave" />
			</if>
			<if cond="AppState.varOfertaDB == 'SAE'">
				
				<!-- Post Action -->
				<script>try{
				AppState.var_log_navegacion = AppState.var_log_navegacion.concat(',OfertableSAE')
				}
				catch(err){}
				
				</script>
				
				<!-- This is the OutLink -->
				<goto next="#NoPREF_Clave" />
			</if>
			<if cond="AppState.varOfertaDB == 'SAE_AE'">
				
				<!-- Post Action -->
				<script>try{
				AppState.var_log_navegacion = AppState.var_log_navegacion.concat(',OfertableSAE_AE')
				}
				catch(err){}
				
				</script>
				
				<!-- This is the OutLink -->
				<goto next="#NoPREF_Clave" />
			</if>
			<goto next="#MarcaSinOferta" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="MarcaSinOferta">
		<block>
			
			<assign name="AppState.var_log_navegacion" expr="AppState.var_log_navegacion.concat(',ClienteNoOfertable')" />				
			<goto next="#NoPREF_Clave" />
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="ConsultaFacturacion">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="CallID" expr="AppState.CallUUID" />
    	<var name="Token" expr="AppState.var_GetToken_Token" />
    	<var name="URL" expr="AppState.var_Facturacion_url" />
    	<var name="idCuenta" expr="AppState.idCuenta" />	
		<block>
			<data name="ConsultaFacturacionData" src="../src/FacturacionCert.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString CallID Token URL idCuenta" />
        	<if cond="typeof ConsultaFacturacionData.errorMsg == 'undefined'">
        		<assign name="AppState.ConsultaFacturacionResult" expr="ConsultaFacturacionData" />
            	<if cond="typeof AppState.ConsultaFacturacionResult.fechaVencimiento != 'undefined'">
            		<assign name="AppState.var_f_fechaVencimiento" expr="AppState.ConsultaFacturacionResult.fechaVencimiento" />
            	</if>
            	<if cond="typeof AppState.ConsultaFacturacionResult.montoFacturado != 'undefined'">
            		<assign name="AppState.var_f_montoFacturado" expr="AppState.ConsultaFacturacionResult.montoFacturado" />
            	</if>
            	<if cond="typeof AppState.ConsultaFacturacionResult.pagoMinimo != 'undefined'">
            		<assign name="AppState.var_f_pagoMinimo" expr="AppState.ConsultaFacturacionResult.pagoMinimo" />
            	</if>
            	<if cond="typeof AppState.ConsultaFacturacionResult.montoAdeudado != 'undefined'">
            		<assign name="AppState.var_f_montoAdeudado" expr="AppState.ConsultaFacturacionResult.montoAdeudado" />
            	</if>
            	<if cond="typeof AppState.ConsultaFacturacionResult.deudaTotal != 'undefined'">
            		<assign name="AppState.var_f_deudaTotal" expr="AppState.ConsultaFacturacionResult.deudaTotal" />
            	</if>
            	<if cond="typeof AppState.ConsultaFacturacionResult.HttpCode != 'undefined'">
            		<assign name="AppState.var_datos_cliente_facturacion_http" expr="AppState.ConsultaFacturacionResult.HttpCode" />
            	</if>
				<goto next="#ConsultaFacturacionCert_HttpCode200" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="ConsultaFacturacionData.errorMsg" />
        	</if>
		</block>
		
		<catch event="error.badfetch">
			<goto next="#Logger_Facturacion1" />
    	</catch>
		<catch event="error.com.genesyslab.composer.servererror">
			<goto next="#Logger_Facturacion1" />
    	</catch>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Logger_Facturacion1">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="'Error al Obtener Datos de Facturacion |LAST_EVENT_NAME:'+AppState.LAST_EVENT_NAME+'|LAST_EVENT_MSG:'+AppState.LAST_EVENT_MSG" />
    	<var name="LoggerNivel" expr="'Error'" />	
		<block>
			<data name="Logger_Facturacion1Data" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof Logger_Facturacion1Data.errorMsg == 'undefined'">
        		<assign name="AppState.Logger_Facturacion1Result" expr="Logger_Facturacion1Data" />
				<goto next="#IntentosConsultaFacturacion" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Logger_Facturacion1Data.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Branching block -->
	<form id="ConsultaFacturacionCert_HttpCode200">
		<block>
			<if cond="AppState.var_datos_cliente_facturacion_http != 200">
				
				<!-- This is the OutLink -->
				<goto next="#IntentosConsultaFacturacion" />
			</if>
			<goto next="#GetFacturacion_1" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="IntentosConsultaFacturacion">
		<block>
			
			<assign name="AppState.intentos" expr="AppState.intentos + 1" />				
			<goto next="#ValidaIntentoConsultaFacturacion" />
		</block>
	</form>

	<!-- This is the Branching block -->
	<form id="ValidaIntentoConsultaFacturacion">
		<block>
			<if cond="AppState.intentos &lt; 3">
				
				<!-- This is the OutLink -->
				<goto next="#ConsultaFacturacion" />
			</if>
			<goto next="#GetFacturacion_0" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="GetFacturacion_0">
		<block>
			
			<assign name="AppState.var_getFacturacion" expr="0" />
			<assign name="AppState.var_log_navegacion" expr="AppState.var_log_navegacion.concat(',GetFacturacionError')" />				
			<goto next="#MenuBlackFriday" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="GetFacturacion_1">
		<block>
			
			<assign name="AppState.var_getFacturacion" expr="1" />
			<assign name="AppState.var_log_navegacion" expr="AppState.var_log_navegacion.concat(',GetFacturacionOK')" />				
			<goto next="#Logger_Facturacion2" />
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Logger_Facturacion2">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="'Obtiene Facturacion|json result - FecVenc: ' + AppState.var_f_fechaVencimiento +  ', MonFact : '+ AppState.var_f_montoFacturado + ', PagMin: ' + AppState.var_f_pagoMinimo +  ', MonAdeud: ' + AppState.var_f_montoAdeudado +  ', DeudTot: ' + AppState.var_f_deudaTotal + ', http code: ' + AppState.var_datos_cliente_facturacion_http" />
    	<var name="LoggerNivel" expr="'Info'" />	
		<block>
			<data name="Logger_Facturacion2Data" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof Logger_Facturacion2Data.errorMsg == 'undefined'">
        		<assign name="AppState.Logger_Facturacion2Result" expr="Logger_Facturacion2Data" />
				<goto next="#Sub_MenuFacturacion" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Logger_Facturacion2Data.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Subdialog block -->
	<form id="Sub_MenuFacturacion">

		<subdialog name="Sub_MenuFacturacionSubdialog" fetchhint="prefetch"  src="../src-gen/SBC_MenuFacturacion.vxml">
    		<param name="varActionParentId" expr="''"/>
			<param name="var_deudaTotal" expr="AppState.var_f_deudaTotal" />
			<param name="var_fechaVencimiento" expr="AppState.var_f_fechaVencimiento" />
			<param name="var_montoAdeudado" expr="AppState.var_f_montoAdeudado" />
			<param name="var_montoFacturado" expr="AppState.var_f_montoFacturado" />
			<param name="var_pagoMinimo" expr="AppState.var_f_pagoMinimo" />
			<param name="var_saldoPendiente" expr="AppState.var_f_saldoPendiente" />
			<param name="var_vigencia" expr="AppState.var_f_Vigencia" />
			<filled>
				<if cond="Sub_MenuFacturacionSubdialog.var_mf_cortaLlamada != 'undefined'">
  					<assign name="AppState.var_mf_cortaLlamada" expr="Sub_MenuFacturacionSubdialog.var_mf_cortaLlamada" /> 
  				</if>
				<goto next="#BRCH_mf_cortaLlamada" />
			</filled>
		</subdialog>
		
	</form>

	<!-- This is the Branching block -->
	<form id="BRCH_validaTarjeta">
		<block>
			<if cond="AppState.var_datos_cliente_numero_tarjeta != ''">
				
				<!-- This is the OutLink -->
				<goto next="#GetActivos_1" />
			</if>
			<goto next="#GetActivos_0" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Assg_mf_cortaLlamada">
		<block>
			
			<assign name="AppState.var_log_navegacion" expr="AppState.var_log_navegacion.concat('CortaLlamada,')" />
			<assign name="AppState.varAccion" expr="'cortar'" />				
			<goto next="#Prmp_mf_cotaLlamada" />
		</block>
	</form>

	<!-- This is the Branching block -->
	<form id="BRCH_mf_cortaLlamada">
		<block>
			<if cond="AppState.var_mf_cortaLlamada == 0">
				
				<!-- This is the OutLink -->
				<goto next="#MenuBlackFriday" />
			</if>
			<goto next="#Copy_3_Assign4" />
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Copy_3_CerrarSesionCert">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="CallID" expr="AppState.CallUUID" />
    	<var name="Token" expr="AppState.var_GetToken_Token" />
    	<var name="URL" expr="AppState.var_cerrar_sesion_url" />
    	<var name="GUID_PERSONA" expr="AppState.var_datos_cliente_guid" />
    	<var name="CLIENTE_ID" expr="AppState.var_crear_sesion_dhr2" />	
		<block>
			<data name="Copy_3_CerrarSesionCertData" src="../src/CerrarSesionCert.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString CallID Token URL GUID_PERSONA CLIENTE_ID" />
        	<if cond="typeof Copy_3_CerrarSesionCertData.errorMsg == 'undefined'">
        		<assign name="AppState.Copy_3_CerrarSesionCertResult" expr="Copy_3_CerrarSesionCertData" />
            	<if cond="typeof AppState.Copy_3_CerrarSesionCertResult.ParamHttpCode != 'undefined'">
            		<assign name="AppState.var_cerrar_sesion_http" expr="AppState.Copy_3_CerrarSesionCertResult.ParamHttpCode" />
            	</if>
				<goto next="#Copy_1_Logger032" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Copy_3_CerrarSesionCertData.errorMsg" />
        	</if>
		</block>
		
		<catch event="error.badfetch">
			<goto next="#Copy_1_Logger031" />
    	</catch>
		<catch event="error.com.genesyslab.composer.servererror">
			<goto next="#Copy_1_Logger031" />
    	</catch>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Copy_1_Logger031">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="'Error al cerrar sesion en flujo castigado|LAST_EVENT_NAME:'+AppState.LAST_EVENT_NAME+'|LAST_EVENT_MSG:'+AppState.LAST_EVENT_MSG" />
    	<var name="LoggerNivel" expr="'Error'" />	
		<block>
			<data name="Copy_1_Logger031Data" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof Copy_1_Logger031Data.errorMsg == 'undefined'">
        		<assign name="AppState.Copy_1_Logger031Result" expr="Copy_1_Logger031Data" />
				<goto next="#Copy_1_Logger032" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Copy_1_Logger031Data.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Copy_1_Logger032">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="'Cerrar sesion flujo castigado'" />
    	<var name="LoggerNivel" expr="'Info'" />	
		<block>
			<data name="Copy_1_Logger032Data" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof Copy_1_Logger032Data.errorMsg == 'undefined'">
        		<assign name="AppState.Copy_1_Logger032Result" expr="Copy_1_Logger032Data" />
				<goto next="#Assg_mf_cortaLlamada" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Copy_1_Logger032Data.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="Copy_3_Assign4">
		<block>
			
			<assign name="AppState.var_cerrar_sesion_url" expr="AppState.var_EndPointCerrarSesionCRM+AppState.var_crear_sesion_id_sesion" />
			<assign name="AppState.var_crear_sesion_dhr2" expr="AppState.var_RUT + '-CHL-1'" />				
			<goto next="#Copy_3_CerrarSesionCert" />
		</block>
	</form>

	<!-- This is the Prompt block -->
	<form id="Prmp_mf_cotaLlamada">
        
    	<block name="Prmp_mf_cotaLlamadaP0">
  			<prompt bargein="true"  gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'AudiosTarjetas/Usted ha superado el número de ingresos.wav'"></audio>
				<audio expr="AppState.VOXFILEDIR + '/' + AppState.APP_LANGUAGE + '/' + 'AudiosTarjetas/Menu/Gracias por llamar.wav'"></audio>
    		</prompt>
		</block>
    	<block>
    		<goto next="#LogNav" />
    	</block>
	</form>

	<!-- This is the Subdialog block -->
	<form id="Copy_1_Sub_Regularizacion">

		<subdialog name="Copy_1_Sub_RegularizacionSubdialog" fetchhint="prefetch"  src="../src-gen/sub_Regularizacion.vxml">
    		<param name="varActionParentId" expr="''"/>
			<param name="Servicio" expr="'PreferenteReg'" />
			<param name="rut" expr="AppState.var_RUT" />
			<param name="var_log_navegacion" expr="AppState.var_log_navegacion" />
			<filled>
				<if cond="Copy_1_Sub_RegularizacionSubdialog.retornaRegularizacion != 'undefined'">
  					<assign name="AppState.valorRegularizacion" expr="Copy_1_Sub_RegularizacionSubdialog.retornaRegularizacion" /> 
  				</if>
				<if cond="Copy_1_Sub_RegularizacionSubdialog.sub_Accion != 'undefined'">
  					<assign name="AppState.varAccion" expr="Copy_1_Sub_RegularizacionSubdialog.sub_Accion" /> 
  				</if>
				<if cond="Copy_1_Sub_RegularizacionSubdialog.sub_Destino != 'undefined'">
  					<assign name="AppState.varDestino" expr="Copy_1_Sub_RegularizacionSubdialog.sub_Destino" /> 
  				</if>
				<if cond="Copy_1_Sub_RegularizacionSubdialog.sub_Servicio != 'undefined'">
  					<assign name="AppState.varServicio" expr="Copy_1_Sub_RegularizacionSubdialog.sub_Servicio" /> 
  				</if>
				<if cond="Copy_1_Sub_RegularizacionSubdialog.var_log_navegacion != 'undefined'">
  					<assign name="AppState.var_log_navegacion" expr="Copy_1_Sub_RegularizacionSubdialog.var_log_navegacion" /> 
  				</if>
				<goto next="#Copy_1_EsRegularizacion" />
			</filled>
		</subdialog>
		
    	<catch event="error.badfetch">
    <goto next="#marcaConsultaVip2" />
    	</catch>
    	<catch event="error">
    <goto next="#marcaConsultaVip2" />
    	</catch>
	</form>

	<!-- This is the Branching block -->
	<form id="Copy_1_EsRegularizacion">
		<block>
			<if cond="AppState.valorRegularizacion == 1">
				
				<!-- Post Action -->
				<script>try{
				AppState.varCliente = 'Regularización'
				}
				catch(err){}
				
				</script>
				
				<!-- This is the OutLink -->
				<goto next="#LogNav" />
			</if>
			<goto next="#marcaConsultaVip2" />
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="LogNoCastigado">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="'No Castigado'" />
    	<var name="LoggerNivel" expr="'Info'" />	
		<block>
			<data name="LogNoCastigadoData" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof LogNoCastigadoData.errorMsg == 'undefined'">
        		<assign name="AppState.LogNoCastigadoResult" expr="LogNoCastigadoData" />
				<goto next="#marca11" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="LogNoCastigadoData.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Copy_1_LogCastigado">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="'Castigado'" />
    	<var name="LoggerNivel" expr="'Info'" />	
		<block>
			<data name="Copy_1_LogCastigadoData" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof Copy_1_LogCastigadoData.errorMsg == 'undefined'">
        		<assign name="AppState.Copy_1_LogCastigadoResult" expr="Copy_1_LogCastigadoData" />
				<goto next="#marca12" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Copy_1_LogCastigadoData.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Copy_1_Logger048">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="'Datos antes de validar: ' + '   Tipo Tarjeta: '+ AppState.var_datos_cliente_tipo_tarjeta + '   Tipo Cliente: ' + AppState.var_TipoCliente" />
    	<var name="LoggerNivel" expr="'Info'" />	
		<block>
			<data name="Copy_1_Logger048Data" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof Copy_1_Logger048Data.errorMsg == 'undefined'">
        		<assign name="AppState.Copy_1_Logger048Result" expr="Copy_1_Logger048Data" />
				<goto next="#ValidaClave" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Copy_1_Logger048Data.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Copy_2_Logger048">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="'Datos antes de almacenar: ' + '   Tipo Tarjeta: '+ AppState.var_datos_cliente_tipo_tarjeta + '   Tipo Cliente: ' + AppState.var_TipoCliente" />
    	<var name="LoggerNivel" expr="'Info'" />	
		<block>
			<data name="Copy_2_Logger048Data" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof Copy_2_Logger048Data.errorMsg == 'undefined'">
        		<assign name="AppState.Copy_2_Logger048Result" expr="Copy_2_Logger048Data" />
				<goto next="#AlmacenaValidaClave" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Copy_2_Logger048Data.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="JSP_GeoInformativa">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />	
		<block>
			<data name="JSP_GeoInformativaData" src="../src/SP_JSP_Consulta_GeoInformativa.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString" />
        	<if cond="typeof JSP_GeoInformativaData.errorMsg == 'undefined'">
        		<assign name="AppState.JSP_GeoInformativaResult" expr="JSP_GeoInformativaData" />
            	<if cond="typeof AppState.JSP_GeoInformativaResult.returnSP_GI != 'undefined'">
            		<assign name="AppState.returnSP_GI" expr="AppState.JSP_GeoInformativaResult.returnSP_GI" />
            	</if>
            	<if cond="typeof AppState.JSP_GeoInformativaResult.varGeoInfDB != 'undefined'">
            		<assign name="AppState.varGeoInfDB" expr="AppState.JSP_GeoInformativaResult.varGeoInfDB" />
            	</if>
				<goto next="#Logger_GeoInformativa" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="JSP_GeoInformativaData.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Branching block -->
	<form id="EsGeoInformativa">
		<block>
			<if cond="AppState.returnSP_GI == 1">
				
				<!-- This is the OutLink -->
				<goto next="#Prmpt_GeoInformativa" />
			</if>
			<goto next="#JSP_ConsultaPreferente" />
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Logger_GeoInformativa">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="AppState.var_HdrLog + '- var_Status_GeoInfDB: ' + AppState.returnSP_GI + '- varGeoInfRegMaest: ' + AppState.varGeoInfDB" />
    	<var name="LoggerNivel" expr="'Info'" />	
		<block>
			<data name="Logger_GeoInformativaData" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof Logger_GeoInformativaData.errorMsg == 'undefined'">
        		<assign name="AppState.Logger_GeoInformativaResult" expr="Logger_GeoInformativaData" />
				<goto next="#EsGeoInformativa" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Logger_GeoInformativaData.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Prompt block -->
	<form id="Prmpt_GeoInformativa">
        
    	<block name="Prmpt_GeoInformativaP0">
  			<prompt bargein="true"  gvp:langexpr="AppState.APP_LANGUAGE">
				<audio expr="getAudioURI(AppState.VOXFILEDIR+&quot;/&quot;+AppState.APP_LANGUAGE+&quot;/AudiosTarjetas/Regiones/&quot;+AppState.varGeoInfDB+&quot;.wav&quot;)"></audio>
    		</prompt>
		</block>
    	<block>
    		<goto next="#JSP_ConsultaPreferente" />
    	</block>
	</form>

	<!-- This is the Assign block -->
	<form id="var_CNoEnroladoC">
		<block>
			
			<assign name="AppState.var_att_CNoEnroladoC" expr="AppState.var_att_CNoEnroladoC1" />				
			<goto next="#Logger_CNoEnroladoActivo" />
		</block>
	</form>

	<!-- This is the Branching block -->
	<form id="CNoEnrolado">
		<block>
			<if cond="AppState.var_Status_ClienteNoEnrolado == 0">
				
				<!-- This is the OutLink -->
				<goto next="#Logger_CNoEnroladoNoActivo" />
			</if>
			<goto next="#var_CNoEnroladoC" />
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Logger_CNoEnroladoActivo">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="AppState.var_HdrLog + ' Cliente No Enrolado Activo, con valores: var_att_CNoEnrolado:' + AppState.var_att_CNoEnrolado + ', var_att_CNoEnroladoC:' + AppState.var_att_CNoEnroladoC" />
    	<var name="LoggerNivel" expr="'Info'" />	
		<block>
			<data name="Logger_CNoEnroladoActivoData" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof Logger_CNoEnroladoActivoData.errorMsg == 'undefined'">
        		<assign name="AppState.Logger_CNoEnroladoActivoResult" expr="Logger_CNoEnroladoActivoData" />
				<goto next="#marca16" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Logger_CNoEnroladoActivoData.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Logger_CNoEnroladoNoActivo">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="AppState.var_HdrLog + ' Cliente No Enrolado No Activo, con valor: var_att_CNoEnrolado:' + AppState.var_att_CNoEnrolado" />
    	<var name="LoggerNivel" expr="'Info'" />	
		<block>
			<data name="Logger_CNoEnroladoNoActivoData" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof Logger_CNoEnroladoNoActivoData.errorMsg == 'undefined'">
        		<assign name="AppState.Logger_CNoEnroladoNoActivoResult" expr="Logger_CNoEnroladoNoActivoData" />
				<goto next="#marca16" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Logger_CNoEnroladoNoActivoData.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Branching block -->
	<form id="CNoEnrolado_BD">
		<block>
			<if cond="AppState.var_Status_ClienteNoEnrolado == 0">
				
				<!-- This is the OutLink -->
				<goto next="#marca16" />
			</if>
			<goto next="#CNoEnrolado" />
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="JSP_ClienteNoEnrolado">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />	
		<block>
			<data name="JSP_ClienteNoEnroladoData" src="../src/SP_JSP_ConsultaClienteNoEnrolado.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString" />
        	<if cond="typeof JSP_ClienteNoEnroladoData.errorMsg == 'undefined'">
        		<assign name="AppState.JSP_ClienteNoEnroladoResult" expr="JSP_ClienteNoEnroladoData" />
            	<if cond="typeof AppState.JSP_ClienteNoEnroladoResult.returnSP != 'undefined'">
            		<assign name="AppState.var_Status_ClienteNoEnrolado" expr="AppState.JSP_ClienteNoEnroladoResult.returnSP" />
            	</if>
				<goto next="#Logger_CNoEnrolado" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="JSP_ClienteNoEnroladoData.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Logger_CNoEnrolado">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="AppState.var_HdrLog + 'Se recibe var_Status_ClienteNoEnrolado [' + AppState.var_Status_ClienteNoEnrolado +']'" />
    	<var name="LoggerNivel" expr="'Info'" />	
		<block>
			<data name="Logger_CNoEnroladoData" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof Logger_CNoEnroladoData.errorMsg == 'undefined'">
        		<assign name="AppState.Logger_CNoEnroladoResult" expr="Logger_CNoEnroladoData" />
				<goto next="#CNoEnrolado_BD" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Logger_CNoEnroladoData.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Subdialog block -->
	<form id="MenuWhatsApp">

		<subdialog name="MenuWhatsAppSubdialog" fetchhint="prefetch"  src="../src-gen/SBC_MenuWhatsApp.vxml">
    		<param name="varActionParentId" expr="''"/>
			<param name="var_RUT" expr="AppState.var_RUT" />
			<param name="var_WhatsApp_BD" expr="AppState.var_att_WhatsApp_BD" />
			<param name="var_WhatsApp_EWT" expr="AppState.var_att_WhatsApp_EWT" />
			<param name="var_WhatsApp_EWT_Valor" expr="AppState.var_att_WhatsApp_EWT_Valor" />
			<param name="var_WhatsApp_EnvioMensaje" expr="AppState.var_att_WhatsApp_EnviaMensaje" />
			<param name="var_WhatsApp_NLlamadas" expr="AppState.var_att_WhatsApp_NLlamadas" />
			<param name="var_WhatsApp_NLlamadas_Valor" expr="AppState.var_att_WhatsApp_NLlamadas_Valor" />
			<param name="var_att_var_ewt_mas" expr="AppState.var_att_var_ewt_mas" />
			<param name="var_att_var_ewt_pref" expr="AppState.var_att_var_ewt_pref" />
			<param name="var_obtiene_ewt_URL" expr="AppState.var_obtiene_ewt_URL" />
			<param name="var_obtiene_hsmWhatsapp_URL" expr="AppState.var_obtiene_hsmWhatsapp_URL" />
			<param name="var_obtiene_smsWhatsapp_URL" expr="AppState.var_obtiene_smsWhatsapp_URL" />
			<filled>
				<if cond="MenuWhatsAppSubdialog.var_marca != 'undefined'">
  					<assign name="AppState.var_out_marca_mw" expr="MenuWhatsAppSubdialog.var_marca" /> 
  				</if>
				<if cond="MenuWhatsAppSubdialog.var_sms_status != 'undefined'">
  					<assign name="AppState.var_status_smsWhatsapp" expr="MenuWhatsAppSubdialog.var_sms_status" /> 
  				</if>
				<goto next="#BRCH_ValidaMenuWhatsapp" />
			</filled>
		</subdialog>
		
	</form>

	<!-- This is the Backend logic block -->
	<form id="Copy_3_Logger048">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="AppState.var_HdrLog + 'Cliente No Selecciona Envio de SMS WhatsApp | Status Envio SMS: ' + AppState.var_status_smsWhatsapp" />
    	<var name="LoggerNivel" expr="'Info'" />	
		<block>
			<data name="Copy_3_Logger048Data" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof Copy_3_Logger048Data.errorMsg == 'undefined'">
        		<assign name="AppState.Copy_3_Logger048Result" expr="Copy_3_Logger048Data" />
				<goto next="#marcaConsultaVip" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Copy_3_Logger048Data.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Branching block -->
	<form id="BRCH_EsClaveCorrecta">
		<block>
			<if cond="AppState.contextoClave == 'Clave Validada'">
				
				<!-- This is the OutLink -->
				<goto next="#ConsultaFacturacion" />
			</if>
			<goto next="#MenuBlackFriday" />
		</block>
	</form>

	<!-- This is the Branching block -->
	<form id="BRCH_ValidaMenuWhatsapp">
		<block>
			<if cond="AppState.var_status_smsWhatsapp == 'OK' || AppState.var_status_smsWhatsapp == '200'">
				
				<!-- This is the OutLink -->
				<goto next="#Copy_4_Logger048" />
			</if>
			<goto next="#Copy_3_Logger048" />
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Copy_4_Logger048">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="AppState.var_HdrLog + 'Cliente Selecciona Envio de SMS WhatsApp | Status Envio SMS: ' + AppState.var_status_smsWhatsapp" />
    	<var name="LoggerNivel" expr="'Info'" />	
		<block>
			<data name="Copy_4_Logger048Data" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof Copy_4_Logger048Data.errorMsg == 'undefined'">
        		<assign name="AppState.Copy_4_Logger048Result" expr="Copy_4_Logger048Data" />
				<goto next="#MarcaMenuWhatsapp" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Copy_4_Logger048Data.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="MarcaMenuWhatsapp">
		<block>
			
			<assign name="AppState.var_log_navegacion" expr="AppState.var_log_navegacion.concat(','+ AppState.var_out_marca_mw)" />				
			<goto next="#JSP_InsertaContexto" />
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="JSP_InsertaContexto">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />	
		<block>
			<data name="JSP_InsertaContextoData" src="../src/SP_JSP_WhatsApp_InsertContexto.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString" />
        	<if cond="typeof JSP_InsertaContextoData.errorMsg == 'undefined'">
        		<assign name="AppState.JSP_InsertaContextoResult" expr="JSP_InsertaContextoData" />
				<goto next="#Logger_InsertaContexto" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="JSP_InsertaContextoData.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Logger_InsertaContexto">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="AppState.var_HdrLog + ' - SMS WhatsApp Inserta Contexto '" />
    	<var name="LoggerNivel" expr="'Info'" />	
		<block>
			<data name="Logger_InsertaContextoData" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof Logger_InsertaContextoData.errorMsg == 'undefined'">
        		<assign name="AppState.Logger_InsertaContextoResult" expr="Logger_InsertaContextoData" />
				<goto next="#Prm_SalidaSMS" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Logger_InsertaContextoData.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="JSP_Ofertable2_Nuevo">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />	
		<block>
			<data name="JSP_Ofertable2_NuevoData" src="../src/SP_JSP_ConsultaOfertable.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString" />
        	<if cond="typeof JSP_Ofertable2_NuevoData.errorMsg == 'undefined'">
        		<assign name="AppState.JSP_Ofertable2_NuevoResult" expr="JSP_Ofertable2_NuevoData" />
            	<if cond="typeof AppState.JSP_Ofertable2_NuevoResult.returnSP != 'undefined'">
            		<assign name="AppState.var_Status_OfertableDB" expr="AppState.JSP_Ofertable2_NuevoResult.returnSP" />
            	</if>
            	<if cond="typeof AppState.JSP_Ofertable2_NuevoResult.varOfertaDB != 'undefined'">
            		<assign name="AppState.varOfertaDB" expr="AppState.JSP_Ofertable2_NuevoResult.varOfertaDB" />
            	</if>
            	<if cond="typeof AppState.JSP_Ofertable2_NuevoResult.varPesoDB != 'undefined'">
            		<assign name="AppState.varPesoDB" expr="AppState.JSP_Ofertable2_NuevoResult.varPesoDB" />
            	</if>
				<goto next="#var_transferir_rut" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="JSP_Ofertable2_NuevoData.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Branching block -->
	<form id="brch_rutDyna">
		<block>
			<if cond="AppState.var_RUT.length == 9">
				
				<!-- This is the OutLink -->
				<goto next="#rut9" />
			</if>
			<goto next="#rut8" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="rut9">
		<block>
			
			<assign name="AppState.varRutDynamics" expr="AppState.var_RUT.substring(0, 2) + &quot;.&quot; + AppState.var_RUT.substring(2, 5) + &quot;.&quot; + AppState.var_RUT.substring(5, 8) + &quot;-&quot; + AppState.var_RUT.substring(8, 9);" />				
			<goto next="#HoraFin" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="rut8">
		<block>
			
			<assign name="AppState.varRutDynamics" expr="AppState.var_RUT.substring(0, 1) + &quot;.&quot; +AppState.var_RUT.substring(1, 4) + &quot;.&quot; + AppState.var_RUT.substring(4, 7) + &quot;-&quot; + AppState.var_RUT.substring(7, 8)" />				
			<goto next="#HoraFin" />
		</block>
	</form>

	<!-- This is the Subdialog block -->
	<form id="MenuBlackFriday">

		<subdialog name="MenuBlackFridaySubdialog" fetchhint="prefetch"  src="../src-gen/SBC_BlackFriday.vxml">
    		<param name="varActionParentId" expr="''"/>
			<param name="att_CATClienteOfertable" expr="AppState.att_CATClienteOfertable" />
			<param name="varOfertaDB" expr="AppState.varOfertaDB" />
			<filled>
				<if cond="MenuBlackFridaySubdialog.var_TxBlackFriday != 'undefined'">
  					<assign name="AppState.var_TxBlackFriday" expr="MenuBlackFridaySubdialog.var_TxBlackFriday" /> 
  				</if>
				<goto next="#BRCH_ValidaBlackFriday" />
			</filled>
		</subdialog>
		
	</form>

	<!-- This is the Assign block -->
	<form id="TxBlack">
		<block>
			<log gvp:level="1">
				<value expr="'[CAT_Tarjetas] VIPaPreferente1p'"/>
			</log>
    	</block>
		<block>
			
			<assign name="AppState.varAccion" expr="'transferir'" />
			<assign name="AppState.varDestino" expr="'interno'" />
			<assign name="AppState.varServicio" expr="'experto'" />
			<assign name="AppState.varOpcion" expr="'VIP'" />				
			<goto next="#LogTxBlack" />
		</block>
	</form>

	<!-- This is the Branching block -->
	<form id="BRCH_ValidaBlackFriday">
		<block>
			<if cond="AppState.var_TxBlackFriday == 1">
				
				<!-- This is the OutLink -->
				<goto next="#TxBlack" />
			</if>
			<goto next="#MenuWhatsApp" />
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="LogTxBlack">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="'Transfiere a BlackFriday'" />
    	<var name="LoggerNivel" expr="'Info'" />	
		<block>
			<data name="LogTxBlackData" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof LogTxBlackData.errorMsg == 'undefined'">
        		<assign name="AppState.LogTxBlackResult" expr="LogTxBlackData" />
				<goto next="#marcaBlack" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="LogTxBlackData.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="marcaBlack">
		<block>
			
			<assign name="AppState.var_log_navegacion" expr="AppState.var_log_navegacion.concat(',BlackFriday')" />				
			<goto next="#AudioTransferenciaREG" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="ECMA_FromOrigen">
		<block>
			<script>
				try {
						// your code
						
					    AppState.varFromTarjetas = getUrlVars(_GetInfo('running_uri'))['var_Origen'];
						
						
					} catch (error) {
						// error handling code
						AppState.varOrigen = JSON.stringify(error);
					}
			</script>	
			<goto next="#BKND_LogOrigen" />
		</block>
	</form>

	<!-- This is the Branching block -->
	<form id="BRCH_ValidaOrigen">
		<block>
			<if cond="AppState.varFromTarjetas == 'C2C'">
				
				<!-- This is the OutLink -->
				<goto next="#ECMA_FromC2C" />
			</if>
			<goto next="#FromTarjetas" />
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="BKND_LogOrigen">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="AppState.var_HdrLog + ' varFromTarjetas: ' +AppState.varFromTarjetas" />
    	<var name="LoggerNivel" expr="'Info'" />	
		<block>
			<data name="BKND_LogOrigenData" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof BKND_LogOrigenData.errorMsg == 'undefined'">
        		<assign name="AppState.BKND_LogOrigenResult" expr="BKND_LogOrigenData" />
				<goto next="#BRCH_ValidaOrigen" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="BKND_LogOrigenData.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="ECMA_FromC2C">
		<block>
			<script>
				try {
						
						AppState.var_RUT = getUrlVars(_GetInfo('running_uri'))['var_RUT'];
						AppState.var_idNivelAutenticacion = getUrlVars(_GetInfo('running_uri'))['var_idNivelAutenticacion'];
						AppState.var_GetToken_Token = getUrlVars(_GetInfo('running_uri'))['var_GetToken_Token'];
						AppState.var_crear_sesion_id_sesion = getUrlVars(_GetInfo('running_uri'))['var_crear_sesion_id_sesion'];
						AppState.var_datos_cliente_guid = getUrlVars(_GetInfo('running_uri'))['var_datos_cliente_guid'];
						AppState.idCuenta = getUrlVars(_GetInfo('running_uri'))['idCuenta'];
						AppState.ultimosDigitos = getUrlVars(_GetInfo('running_uri'))['ultimosDigitos'];
						
						AppState.var_Date = getUrlVars(_GetInfo('running_uri'))['var_Date'];
						AppState.var_Hora = getUrlVars(_GetInfo('running_uri'))['var_Hora'];
						AppState.var_dnis = getUrlVars(_GetInfo('running_uri'))['var_dnis'];
						AppState.var_log_hora_ini = getUrlVars(_GetInfo('running_uri'))['var_log_hora_ini'];
						AppState.var_Minuto = getUrlVars(_GetInfo('running_uri'))['var_Minuto'];
						AppState.var_att_IVR = getUrlVars(_GetInfo('running_uri'))['var_att_IVR'];
						AppState.var_att_MsjMasivo = getUrlVars(_GetInfo('running_uri'))['var_att_MsjMasivo'];
						AppState.var_att_AudioMsjM = getUrlVars(_GetInfo('running_uri'))['var_att_AudioMsjM'];
						AppState.var_att_Opc1 = getUrlVars(_GetInfo('running_uri'))['var_att_Opc1'];
						AppState.var_att_Opc2 = getUrlVars(_GetInfo('running_uri'))['var_att_Opc2'];
						AppState.var_att_Opc3 = getUrlVars(_GetInfo('running_uri'))['var_att_Opc3'];
						AppState.var_att_Opc4 = getUrlVars(_GetInfo('running_uri'))['var_att_Opc4'];
						AppState.var_att_Opc5 = getUrlVars(_GetInfo('running_uri'))['var_att_Opc5'];
						AppState.var_att_Opc6 = getUrlVars(_GetInfo('running_uri'))['var_att_Opc6'];
						AppState.var_att_HoraLun = getUrlVars(_GetInfo('running_uri'))['var_att_HoraLun'];
						AppState.var_att_HoraMart = getUrlVars(_GetInfo('running_uri'))['var_att_HoraMart'];
						AppState.var_att_HoraMierc = getUrlVars(_GetInfo('running_uri'))['var_att_HoraMierc'];
						AppState.var_att_HoraJuev = getUrlVars(_GetInfo('running_uri'))['var_att_HoraJuev'];
						AppState.var_att_HoraVier = getUrlVars(_GetInfo('running_uri'))['var_att_HoraVier'];
						AppState.var_att_HoraSaba = getUrlVars(_GetInfo('running_uri'))['var_att_HoraSaba'];
						AppState.var_att_HoraDom = getUrlVars(_GetInfo('running_uri'))['var_att_HoraDom'];
						AppState.var_DiaSemana = getUrlVars(_GetInfo('running_uri'))['var_DiaSemana'];
						AppState.var_att_Opc0 = getUrlVars(_GetInfo('running_uri'))['var_att_Opc0'];
						AppState.var_att_HoraEspecial = getUrlVars(_GetInfo('running_uri'))['var_att_HoraEspecial'];
						AppState.var_att_Opc9 = getUrlVars(_GetInfo('running_uri'))['var_att_Opc9'];
						AppState.var_att_CATContextoOpc4 = getUrlVars(_GetInfo('running_uri'))['var_att_CATContextoOpc4'];
						AppState.var_att_CATContextoOpc5 = getUrlVars(_GetInfo('running_uri'))['var_att_CATContextoOpc5'];
						AppState.var_att_CATContextoOpc6 = getUrlVars(_GetInfo('running_uri'))['var_att_CATContextoOpc6'];
						AppState.var_att_CATTipoCliente = getUrlVars(_GetInfo('running_uri'))['var_att_CATTipoCliente'];
						AppState.var_att_CNoEnrolado = getUrlVars(_GetInfo('running_uri'))['var_att_CNoEnrolado'];
						AppState.var_att_CNoEnroladoC1 = getUrlVars(_GetInfo('running_uri'))['var_att_CNoEnroladoC1'];
						AppState.var_att_WhatsApp_BD = getUrlVars(_GetInfo('running_uri'))['var_att_WhatsApp_BD'];
						AppState.var_att_WhatsApp_EWT = getUrlVars(_GetInfo('running_uri'))['var_att_WhatsApp_EWT'];
						AppState.var_att_WhatsApp_EWT_Valor = getUrlVars(_GetInfo('running_uri'))['var_att_WhatsApp_EWT_Valor'];
						AppState.var_att_WhatsApp_NLlamadas = getUrlVars(_GetInfo('running_uri'))['var_att_WhatsApp_NLlamadas'];
						AppState.var_att_WhatsApp_NLlamadas_Valor = getUrlVars(_GetInfo('running_uri'))['var_att_WhatsApp_NLlamadas_Valor'];
						AppState.var_att_var_ewt_mas = getUrlVars(_GetInfo('running_uri'))['var_att_var_ewt_mas'];
						AppState.var_att_var_ewt_pref = getUrlVars(_GetInfo('running_uri'))['var_att_var_ewt_pref'];
						AppState.var_att_WhatsApp_EnviaMensaje = getUrlVars(_GetInfo('running_uri'))['var_att_WhatsApp_EnviaMensaje'];
						AppState.att_CATClienteOfertable = getUrlVars(_GetInfo('running_uri'))['att_CATClienteOfertable'];
						
						if(AppState.var_RUT === undefined)
							AppState.var_RUT = &quot;&quot;;
						
					} catch (error) {
						// error handling code
						AppState.varOrigen = JSON.stringify(error);
					}
			</script>	
			<goto next="#FromC2C" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="FromTarjetas">
		<block>
			
			<assign name="AppState.varFromTarjetas" expr="'Tarjetas'" />				
			<goto next="#HoraInicial" />
		</block>
	</form>

	<!-- This is the Assign block -->
	<form id="FromC2C">
		<block>
			
			<assign name="AppState.varFromTarjetas" expr="'C2C'" />
			<assign name="AppState.var_dnis" expr="'C2C_Tarjetas'" />				
			<goto next="#Backend1" />
		</block>
	</form>

	<!-- This is the Branching block -->
	<form id="VieneDeTarjetas1">
		<block>
			<if cond="AppState.varFromTarjetas == 'Tarjetas'">
				
				<!-- This is the OutLink -->
				<goto next="#att_MsjMasivo" />
			</if>
			<goto next="#JSP_Ofertable2_Nuevo" />
		</block>
	</form>

	<!-- This is the Branching block -->
	<form id="VieneDeTarjetas2">
		<block>
			<if cond="AppState.varFromTarjetas == 'Tarjetas'">
				
				<!-- This is the OutLink -->
				<goto next="#Castigado" />
			</if>
			<goto next="#ValidarNivelDeSesionC2C" />
		</block>
	</form>

	<!-- This is the Branching block -->
	<form id="VieneDeTarjetas3">
		<block>
			<if cond="AppState.varFromTarjetas == 'Tarjetas'">
				
				<!-- This is the OutLink -->
				<goto next="#Castigado" />
			</if>
			<goto next="#ValidarNivelDeSesionC2C" />
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="Backend1">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="LoggerMensaje" expr="'Parametros|vardst: ' + AppState.var_dnis + '  var_RUT: ' + AppState.var_RUT + ' var_idNivelAutenticacion: ' +	AppState.var_idNivelAutenticacion + '  var_GetToken_Token: ' +	AppState.var_GetToken_Token + ' var_crear_sesion_id_sesion: ' +	AppState.var_crear_sesion_id_sesion + ' var_datos_cliente_guid: ' +	AppState.var_datos_cliente_guid + '  idCuenta: ' +	AppState.idCuenta + ' ultimosDigitos: ' +	AppState.ultimosDigitos + 	'  var_Date: ' +	AppState.var_Date + ' var_Hora: ' +	AppState.var_Hora + ' var_log_hora_ini: ' +	AppState.var_log_hora_ini + ' var_Minuto: ' +	AppState.var_Minuto + ' var_att_IVR: ' +	AppState.var_att_IVR + ' var_att_MsjMasivo: ' +	AppState.var_att_MsjMasivo + ' var_att_AudioMsjM: ' +	AppState.var_att_AudioMsjM + ' var_att_Opc1: ' + AppState.var_att_Opc1 +' var_att_Opc2: ' + 	AppState.var_att_Opc2 +' var_att_Opc3: ' + 	AppState.var_att_Opc3 +' var_att_Opc4: ' + 	AppState.var_att_Opc4 +' var_att_Opc5: ' + 	AppState.var_att_Opc5 +' var_att_Opc6: ' + 	AppState.var_att_Opc6 +' var_att_HoraLun: ' +	AppState.var_att_HoraLun + '  var_att_HoraMart: ' +	AppState.var_att_HoraMart + '  var_att_HoraMierc: ' +	AppState.var_att_HoraMierc + '  var_att_HoraJuev: ' +	AppState.var_att_HoraJuev + '  var_att_HoraVier: ' +	AppState.var_att_HoraVier + ' var_att_HoraSaba: ' +	AppState.var_att_HoraSaba + '  var_att_HoraDom: ' +	AppState.var_att_HoraDom + '  var_DiaSemana: ' +	AppState.var_DiaSemana + ' var_att_Opc0: ' + 	AppState.var_att_Opc0 +'  var_att_HoraEspecial: ' +	AppState.var_att_HoraEspecial + ' var_att_Opc9: ' + AppState.var_att_Opc9 +'  var_att_CATContextoOpc4: ' +	AppState.var_att_CATContextoOpc4 + '  var_att_CATContextoOpc5: ' +	AppState.var_att_CATContextoOpc5 + '  var_att_CATContextoOpc6: ' +	AppState.var_att_CATContextoOpc6 + '  var_att_CATTipoCliente: ' +	AppState.var_att_CATTipoCliente + '  var_att_CNoEnrolado: ' +	AppState.var_att_CNoEnrolado + '  var_att_CNoEnroladoC1: ' +	AppState.var_att_CNoEnroladoC1 + '  var_att_WhatsApp_BD: ' +	AppState.var_att_WhatsApp_BD + '  var_att_WhatsApp_EWT: ' +	AppState.var_att_WhatsApp_EWT + '  var_att_WhatsApp_EWT_Valor: ' +	AppState.var_att_WhatsApp_EWT_Valor + '  var_att_WhatsApp_NLlamadas: ' +	AppState.var_att_WhatsApp_NLlamadas + '  var_att_WhatsApp_NLlamadas_Valor: ' +	AppState.var_att_WhatsApp_NLlamadas_Valor + '  var_att_var_ewt_mas: ' +	AppState.var_att_var_ewt_mas + '  var_att_var_ewt_pref: ' +	AppState.var_att_var_ewt_pref + '  var_att_WhatsApp_EnviaMensaje: ' +	AppState.var_att_WhatsApp_EnviaMensaje + '  att_CATClienteOfertable: ' +	AppState.att_CATClienteOfertable" />
    	<var name="LoggerNivel" expr="'Info'" />	
		<block>
			<data name="Backend1Data" src="../src/Logger.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString LoggerMensaje LoggerNivel" />
        	<if cond="typeof Backend1Data.errorMsg == 'undefined'">
        		<assign name="AppState.Backend1Result" expr="Backend1Data" />
				<goto next="#Parametros" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="Backend1Data.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Branching block -->
	<form id="ValidarNivelDeSesionC2C">
		<block>
			<if cond="AppState.var_idNivelAutenticacion == 0 || AppState.var_idNivelAutenticacion == 1">
				
				<!-- This is the OutLink -->
				<goto next="#Copy_1_Logger048" />
			</if>
			<goto next="#SubirNivelDeSesion_C2C" />
		</block>
	</form>

	<!-- This is the Subdialog block -->
	<form id="SubirNivelDeSesion_C2C">

		<subdialog name="SubirNivelDeSesion_C2CSubdialog" fetchhint="prefetch"  src="../src-gen/SBC_SubirNivelSesion.vxml">
    		<param name="varActionParentId" expr="''"/>
			<param name="var_GetToken_Token" expr="AppState.var_GetToken_Token" />
			<param name="var_HdrLog" expr="AppState.var_HdrLog" />
			<param name="var_RUT" expr="AppState.var_RUT" />
			<param name="var_crear_sesion_id_sesion" expr="AppState.var_crear_sesion_id_sesion" />
			<param name="var_factorUtilizado" expr="'RUT'" />
			<param name="var_idNivelAutenticacion" expr="AppState.var_idNivelAutenticacion" />
			<param name="var_url_actualiza_sesion" expr="AppState.var_url_actualiza_sesion" />
			<param name="var_log_navegacion" expr="AppState.var_log_navegacion" />
			<filled>
				<if cond="SubirNivelDeSesion_C2CSubdialog.EstadoError != 'undefined'">
  					<assign name="AppState.EstadoError" expr="SubirNivelDeSesion_C2CSubdialog.EstadoError" /> 
  				</if>
				<if cond="SubirNivelDeSesion_C2CSubdialog.var_log_navegacion != 'undefined'">
  					<assign name="AppState.var_log_navegacion" expr="SubirNivelDeSesion_C2CSubdialog.var_log_navegacion" /> 
  				</if>
				<goto next="#ContextoClaveCorrecta" />
			</filled>
		</subdialog>
		
	</form>

	<!-- This is the Assign block -->
	<form id="ContextoClaveCorrecta">
		<block>
			
			<assign name="AppState.contextoClave" expr="'Clave Validada'" />				
			<goto next="#ConsultaFacturacion" />
		</block>
	</form>

	<!-- This is the Backend logic block -->
	<form id="BKND_EncriptaRUT">

		<var name="AppStateString" expr="JSON.stringify(AppState)" />
    	<var name="CallID" expr="AppState.CallUUID" />
    	<var name="var_RUT" expr="AppState.var_RUT" />	
		<block>
			<data name="BKND_EncriptaRUTData" src="../src/EncriptarRUT.jsp" method="post"  enctype="multipart/form-data"
				namelist="AppStateString CallID var_RUT" />
        	<if cond="typeof BKND_EncriptaRUTData.errorMsg == 'undefined'">
        		<assign name="AppState.BKND_EncriptaRUTResult" expr="BKND_EncriptaRUTData" />
            	<if cond="typeof AppState.BKND_EncriptaRUTResult.RUT_Encriptado != 'undefined'">
            		<assign name="AppState.RUT_Encriptado" expr="AppState.BKND_EncriptaRUTResult.RUT_Encriptado" />
            	</if>
				<goto next="#Logger_RegistraANIRUT_OK" />
        	<else/>
        		<throw event="error.com.genesyslab.composer.servererror" messageexpr="BKND_EncriptaRUTData.errorMsg" />
        	</if>
		</block>
	</form>

	<!-- This is the Subdialog block -->
	<form id="ConsultaOferta">

		<subdialog name="ConsultaOfertaSubdialog" fetchhint="prefetch"  src="../src-gen/SBC_OfertaCliente.vxml">
    		<param name="varActionParentId" expr="''"/>
			<param name="rut_encriptado" expr="AppState.RUT_Encriptado" />
			<param name="var_ConsultaOfertas_url" expr="AppState.var_ConsultaOfertas_url" />
			<param name="var_GetToken_Token" expr="AppState.var_GetToken_Token" />
			<filled>
				<if cond="ConsultaOfertaSubdialog.id_Cliente != 'undefined'">
  					<assign name="AppState.id_Cliente" expr="ConsultaOfertaSubdialog.id_Cliente" /> 
  				</if>
				<if cond="ConsultaOfertaSubdialog.var_estado_oferta != 'undefined'">
  					<assign name="AppState.var_estado_oferta" expr="ConsultaOfertaSubdialog.var_estado_oferta" /> 
  				</if>
				<goto next="#sesionId" />
			</filled>
		</subdialog>
		
	</form>

	<!-- This is the Assign4 block in Disabled mode -->
	<form id="Assign4">
    	<block>
    		<goto next="#CerrarSesionCert" />
    	</block>
	</form>

	<!-- This is the CerrarSesionCert block in Disabled mode -->
	<form id="CerrarSesionCert">
    	<block>
    		<goto next="#Logger032" />
    	</block>
	</form>

	<!-- This is the Log5 block in Disabled mode -->
	<form id="Log5">
    	<block>
    		
    	</block>
	</form>

	<!-- This is the BranchCerrar2 block in Disabled mode -->
	<form id="BranchCerrar2">
    	<block>	
    		<goto next="#Servinco" />
    	</block>
	</form>

	<!-- This is the BranchCerrar3 block in Disabled mode -->
	<form id="BranchCerrar3">
    	<block>	
    		<goto next="#LogNav" />
    	</block>
	</form>

	<!-- This is the Logger031 block in Disabled mode -->
	<form id="Logger031">
    	<block>
    		<goto next="#Log5" />
    	</block>
	</form>

	<!-- This is the Logger032 block in Disabled mode -->
	<form id="Logger032">
    	<block>
    		<goto next="#Log5" />
    	</block>
	</form>

	<!-- This is the pisaHorarioParam block in Disabled mode -->
	<form id="pisaHorarioParam">
    	<block>
    		<goto next="#LogHorarioParamNew" />
    	</block>
	</form>

	<!-- This is the JSP_Ofertable2 block in Disabled mode -->
	<form id="JSP_Ofertable2">
    	<block>
    		<goto next="#Logger_Ofertable" />
    	</block>
	</form>

	<!-- This is the Prm_SalidaSMS block in Disabled mode -->
	<form id="Prm_SalidaSMS">
    	<block>
    		<goto next="#AccionCortar3" />
    	</block>
	</form>

</vxml>
